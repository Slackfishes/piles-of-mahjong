System.register("chunks:///_virtual/Ad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UI.ts","./BSingleton.ts","./Crazy.ts"],(function(n){var t,e,o,i,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){o=n.UI},function(n){i=n.default},function(n){c=n.Crazy}],execute:function(){e._RF.push({},"b6816S7bAFEZrNNihEC2WlE","Ad",void 0);n("Ad",function(n){function e(){return n.call(this)||this}t(e,n);var i=e.prototype;return i.ready=function(){c.instance.game.loadingStop()},i.showFullScreen=function(n){c.instance.ad.showFullScreen(n)},i.showVideo=function(n,t){t||(t=function(n){o.instance.showTip(n)}),c.instance.ad.showVideo(n,t)},e}(i.Instance0()));e._RF.pop()}}}));

System.register("chunks:///_virtual/Audio.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BSingleton.ts","./Config.ts"],(function(o){var n,i,t,e,u,l,c,f,s;return{setters:[function(o){n=o.inheritsLoose},function(o){i=o.cclegacy,t=o.resources,e=o.assetManager,u=o.AudioClip,l=o.Node,c=o.AudioSource},function(o){f=o.default},function(o){s=o.default}],execute:function(){i._RF.push({},"6c032JXqrdGUbxJjrIW8EOC","Audio",void 0);o("default",function(o){function i(){var n,i;(i=o.call(this)||this).bundle=void 0,i.music=void 0,i.effect=void 0,i.config={bundle:null!=(n=s.Audio.bundle)?n:void 0};var t=new l("_Audio");return i.music=t.addComponent(c),i.effect=t.addComponent(c),i.loadBundle(),i}n(i,o);var f=i.prototype;return f.loadBundle=function(o){var n=this;return this.bundle?null==o?void 0:o():this.config.bundle?void e.loadBundle(this.config.bundle,(function(i,t){i?console.error(i):(n.bundle=t,null==o||o())})):(this.bundle=t,void(null==o||o()))},f.load=function(o,n){var i=this;this.loadBundle((function(){var t;null==(t=i.bundle)||t.load(o,u,(function(o,i){o?console.error(o):null==n||n(i)}))}))},f.playMusic=function(o,n){var i=this;this.load(o,(function(o){i.music.clip!==o&&(i.music.stop(),i.music.clip=o),i.music.playing||(i.music.loop=!0,void 0!==n&&(i.music.volume=n),i.music.play())}))},f.playEffect=function(o,n){var i=this;this.load(o,(function(o){i.effect.playOneShot(o,n)}))},f.playLoopEffect=function(o,n){var i=this;this.load(o,(function(o){i.effect.clip=o,i.effect.loop=!0,void 0!==n&&(i.effect.volume=n),i.effect.play()}))},f.stopLoopEffect=function(){this.effect.stop()},f.setMusicVolume=function(o){this.music.volume=o},f.setEffectVolume=function(o){this.effect.volume=o},i}(f.Instance0()));i._RF.pop()}}}));

System.register("chunks:///_virtual/auto-config-intl-manager.ts",["cc","./l10n-manager.ts","./env"],(function(){var t,n,e,a;return{setters:[function(e){t=e.cclegacy,n=e.game},function(t){e=t.default},function(t){a=t.EDITOR}],execute:async function(){t._RF.push({},"2f21bx4gAFNj6dct9qDHJHH","auto-config-intl-manager",void 0),t.GAME_VIEW||a?await e.createIntl({}):n.onPostProjectInitDelegate.add((function(){return e.createIntl({})})),t._RF.pop()}}}));

System.register("chunks:///_virtual/BanTouch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BSingleton.ts","./Config.ts"],(function(n){var t,e,o,i,a,c,r,s,u,d;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){o=n.cclegacy,i=n.find,a=n.Node,c=n.UITransform,r=n.BlockInputEvents,s=n.Layers},function(n){u=n.default},function(n){d=n.default}],execute:function(){o._RF.push({},"6ffd3ZVbQ1CiZhq1gxTF6cN","BanTouch",void 0);n("default",function(n){function o(){var t;(t=n.call(this)||this)._node=void 0;var e=i(d.CanvasPath);if(!e)throw new Error("Canvas not found");var o=new a("_BanTouch");return o.parent=e,o.addComponent(c).setContentSize(3333,3333),o.addComponent(r),o.layer=s.Enum.UI_2D,t._node=o,t._node.active=!1,t}t(o,n);var u=o.prototype;return u.open=function(){this._node.setSiblingIndex(99999),this._node.active=!0},u.close=function(){this._node.active=!1},e(o,[{key:"active",get:function(){return this._node.active}}]),o}(u.Instance0()));o._RF.pop()}}}));

System.register("chunks:///_virtual/BSingleton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,i,e,s;return{setters:[function(n){t=n.inheritsLoose,i=n.createClass},function(n){e=n.cclegacy,s=n.Component}],execute:function(){e._RF.push({},"f31e5wetuFPiop3HnHLIYcv","BSingleton",void 0);n("default",function(){function n(){}return n.Complete=function(){var n;return(n=function(n){function i(){return n.apply(this,arguments)||this}return t(i,n),i.prototype.onLoad=function(){i.instance=this},i}(s)).instance=void 0,n},n.Instance=function(){var n;return(n=function(){function n(n){this.params=void 0,this.params=n}return n.init=function(n){return this._instance||(this._instance=new this(n)),this._instance},i(n,null,[{key:"instance",get:function(){if(!this._instance)throw new Error("undefined _instance");return this._instance}}]),n}())._instance=void 0,n},n.Instance0=function(){var n;return(n=function(){function n(){}return i(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new this),this._instance}}]),n}())._instance=void 0,n},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"4b38c6j/AlC9a9icPX61H2h","Config",void 0);var e=t("default",(function(){}));e.adEnable=!0,e.wechatAd={videoId:"",interstitialId:"",bannerId:""},e.CanvasPath="UI",e.Storage={key:"ldiakci39dc",enable:!0},e.Popup={container:"UI/Popups"},e.Audio={bundle:""};t("GameDataConfig",{hp:{max:5,duration:600,ad:3,coin:100}}),t("GameData",{init:{randomSeed:0,saveTime:0},settings:{sound:!0,music:!0},runData:{level:0,maxLevel:0,score:0,hp:{current:5,timestamp:0},prop:{back:0,clear:0,turn:0,shuffle:0,time:0,coin:0},reward:{count:0,time:0,date:0}},unx:{}}),t("PropConfigs",[{id:"coin",text:"金币",l10nKey:"textCoin",l10nTipKey:"textCoinTip",count:100,buyAd:!0,hide:!0},{id:"back",text:"回退",l10nKey:"textBack",l10nTipKey:"textBackTip",coin:100,count:2,buyAd:!0},{id:"clear",text:"消除",l10nKey:"textClear",l10nTipKey:"textClearTip",coin:100,count:1,buyAd:!0},{id:"turn",text:"翻牌",l10nKey:"textTurn",l10nTipKey:"textTurnTip",coin:300,count:1,buyAd:!0},{id:"shuffle",text:"洗牌",l10nKey:"textShuffle",l10nTipKey:"textShuffleTip",coin:300,count:1,buyAd:!0}]),t("RewardConfigs",[{duration:0,content:[{id:"coin",count:100},{id:"back",count:1},{id:"clear",count:1}]},{duration:900,content:[{id:"coin",count:300},{id:"back",count:1},{id:"clear",count:1}]},{duration:1800,content:[{id:"coin",count:300},{id:"back",count:1},{id:"clear",count:1},{id:"shuffle",count:1}]},{duration:2700,content:[{id:"coin",count:300},{id:"back",count:2},{id:"clear",count:2},{id:"turn",count:1},{id:"shuffle",count:1}]},{duration:3600,content:[{id:"coin",count:500},{id:"back",count:3},{id:"clear",count:3},{id:"turn",count:1},{id:"shuffle",count:1}]}]);n._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"ce9cehTAaBKmKogOn3MTavc","Constant",void 0);var _=e("Constant",(function(){}));_.EventMain={FixCamera:"main_fix_camera",OnScreenChange:"main_on_screen_change"},_.EventManager={BTN_XIPAI:"BTN_XIPAI",BTN_FANPAI:"BTN_FANPAI",BTN_TUIPAI:"BTN_TUIPAI",BTN_TUIPAIALL:"BTN_TUIPAIALL",BTN_HEPAI:"BTN_HEPAI",BTN_START:"BTN_START",BTN_CONTINUE:"BTN_CONTINUE"},_.EventCube={Combine:"cube_combine",CombineEnd:"cube_combine_end",Select:"cube_select",SelectEnd:"cube_select_end",GameOver:"cube_game_over",GameFinish:"cube_game_finish",GetMatchCount:"cube_get_match_count",SendStart:"cube_send_start",SendEnd:"cube_send_end",GetPaiInWorld:"cube_get_pai_in_world",FixSceneAndCamera:"cube_fix_scene_and_camera",ResetGame:"cube_reset_game"},_.EventGame={GameRestart:"game_restart",GameRestartNoHp:"game_restart_no_hp",GameRevive:"game_revive",GameTime:"game_time",NextLevel:"game_next_level",UpdateProp:"game_update_prop"},_.EventHome={UpdateCoin:"home_update_coin",UpdateHp:"home_update_hp"},_.EventPopup={UpdateHp:"popup_one_update_hp",UpdateProp:"popup_over_update_prop",UpdateReward:"popup_reward_update",RewardOnBuyCallback:"popup_reward_on_buy_callback"};e("ScreenOrientation",function(e){return e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL",e}({})),e("GameStartType",function(e){return e[e.NEW=0]="NEW",e[e.CONTINUE=1]="CONTINUE",e}({}));a._RF.pop()}}}));

System.register("chunks:///_virtual/Crazy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./UI.ts","./BSingleton.ts","./CrazySDK.ts","./LogicAudio.ts","./l10n-manager.ts"],(function(t){var e,n,r,a,o,i,u,c,s,d,l;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,o=t.game,i=t.log},null,function(t){u=t.UI},function(t){c=t.default},function(t){s=t.default},function(t){d=t.default},function(t){l=t.default}],execute:function(){a._RF.push({},"1f425Kgs05Ht53PWryL7ycb","Crazy",void 0);var f=t("UpdatePrevAdTime",(function(t){void 0===t&&(t=0),window._prevAdTime=o.totalTime+1e3*t})),m=function(){function t(){this.isAdPlay=!1}var e=t.prototype;return e.showVideo=function(t,e){var n=this;if(this.isAdPlay)return e(l.t("loading"));this.isAdPlay=!0,d.muteAll(),u.instance.showLoading();var r=function(){n.isAdPlay=!1,d.unmuteAll(),o.isPaused()&&o.resume(),u.instance.hideLoading()};s.ad.requestAd("rewarded",{adStarted:function(){f(),d.muteAll(),o.pause(),i("Ad started")},adError:function(t){f(-20);var n=t.message;n.includes("AdBlock")||e(n),r()},adFinished:function(){f(),t(),r(),i("Ad finished")}})},e.showFullScreen=function(t){var e,n=Math.floor((o.totalTime-(null!=(e=window._prevAdTime)?e:0))/1e3);if(i("full screen click",n),!(n<30)){d.muteAll();var r=function(t){o.isPaused()&&o.resume(),d.unmuteAll(),u.instance.hideLoading(),i(t)};s.ad.requestAd("midgame",{adStarted:function(){f(),d.muteAll(),o.pause(),i("Ad started")},adError:function(t){r(t.message)},adFinished:function(){t&&t(),r("Ad finished")}})}},t}(),p=function(){function t(){}var e=t.prototype;return e.getItem=function(t){return s.data.getItem(t)},e.clear=function(){s.data.clear()},e.removeItem=function(t){s.data.removeItem(t)},e.setItem=function(t,e){s.data.setItem(t,e)},t}(),g=function(){function t(){}var e=t.prototype;return e.happyTime=function(){try{s.game.happytime()}catch(t){console.error(t)}},e.playStart=function(){try{s.game.gameplayStart()}catch(t){console.error(t)}},e.playStop=function(){try{s.game.gameplayStop()}catch(t){console.error(t)}},e.loadingStart=function(){try{s.game.loadingStart()}catch(t){console.error(t)}},e.loadingStop=function(){f();try{s.game.loadingStop()}catch(t){console.error(t)}},t}();t("Crazy",function(t){function a(){var e;return(e=t.call(this)||this).game=void 0,e.ad=void 0,e.data=void 0,e.game=new g,e.ad=new m,e.data=new p,e}return e(a,t),a.prototype.init=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.isSupportedPlatform){t.next=2;break}return t.abrupt("return",s.init());case 2:return t.abrupt("return",Promise.reject());case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a}(c.Instance0()));a._RF.pop()}}}));

System.register("chunks:///_virtual/CrazySDK.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,r,o,s,a,u;return{setters:[function(t){e=t.asyncToGenerator,n=t.createClass,i=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t.error,s=t.sys,a=t.game,u=t.DebugMode}],execute:function(){r._RF.push({},"792a6oyKFlE2pY2M64Y7d9k","CrazySDK",void 0);var c=function(){function t(){}return t.Log=function(){var t;if(a.config.debugMode&&!([u.VERBOSE,u.INFO].indexOf(a.config.debugMode)<0)){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).log.apply(t,["[CrazySDK]"].concat(n))}},t}(),d=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.REQUESTED=1]="REQUESTED",t[t.INITIALIZED=2]="INITIALIZED",t}(d||{});t("default",new(function(){function t(){this.initResolvers=[],this.initState=d.UNINITIALIZED,this.sdk=void 0,this._isSupportedPlatform=void 0,this._version="2.0.0";var t=[s.Platform.MOBILE_BROWSER,s.Platform.DESKTOP_BROWSER];this._isSupportedPlatform=t.indexOf(s.platform)>=0}var r=t.prototype;return r.ensureInitialized=function(){if(this.initState!==d.INITIALIZED)throw new Error("CrazySDK is not initialized yet. Please call CrazySDK.init() first.")},r.initInternal=function(){var t=this;if(this.initState===d.UNINITIALIZED){this.initState=d.REQUESTED;var n=document.createElement("script");n.src="https://sdk.crazygames.com/crazygames-sdk-v3.js",n.async=!0,n.onload=e(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.Log("JS SDK loaded"),t.sdk=window.CrazyGames.SDK,e.next=4,t.sdk.init({wrapper:{engine:"cocos",sdkVersion:t._version}});case 4:t.initState=d.INITIALIZED,t.initResolvers.forEach((function(t){return t()})),t.initResolvers=[];case 7:case"end":return e.stop()}}),e)}))),n.onerror=function(){return o("Failed to load CrazySDK JS. Please check your internet connection.")},document.head.appendChild(n)}},r.init=function(){var t=this;if(!this.isSupportedPlatform)throw new Error("CrazySDK is not enabled on this platform");return new Promise((function(e){t.initState===d.INITIALIZED?e():(t.initResolvers.push(e),t.initInternal())}))},n(t,[{key:"isSupportedPlatform",get:function(){return this._isSupportedPlatform}},{key:"environment",get:function(){return this.ensureInitialized(),this.sdk.environment}},{key:"isQaTool",get:function(){return this.ensureInitialized(),this.sdk.isQaTool}},{key:"ad",get:function(){return this.ensureInitialized(),this.sdk.ad}},{key:"game",get:function(){return this.ensureInitialized(),this.sdk.game}},{key:"user",get:function(){return this.ensureInitialized(),this.sdk.user}},{key:"data",get:function(){return this.ensureInitialized(),this.sdk.data}}]),t}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/CrazySDK.types.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,n;return{setters:[function(r){e=r.inheritsLoose},function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"88000zBqn1CW7B/eSU4wd3L","CrazySDK.types",void 0);var t=r("GeneralError",(function(r,e){this.code=r,this.message=e}));r("AdError",function(r){function n(e,n){var t;return(t=r.call(this,e,n)||this).code=e,t.message=n,t}return e(n,r),n}(t)),r("UserError",function(r){function n(e,n){var t;return(t=r.call(this,e,n)||this).code=e,t.message=n,t}return e(n,r),n}(t)),r("DataError",function(r){function n(e,n){var t;return(t=r.call(this,e,n)||this).code=e,t.message=n,t}return e(n,r),n}(t)),r("BannerError",function(r){function n(e,n,t){var s;return(s=r.call(this,e,n)||this).code=e,s.message=n,s.containerId=t,s}return e(n,r),n}(t));n._RF.pop()}}}));

System.register("chunks:///_virtual/Cubes.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mesh.ts","./Levels.ts","./EventManager.ts","./Constant.ts","./Game.ts","./LogicData.ts","./Interface.ts","./GameRunData.ts"],(function(t){var e,n,i,a,o,r,s,l,h,c,u,f,d,p,v,g,m,C,_,b,N,P,y,E,I,T,S,w,A,O,M,x,D,k,B,R,L,G,F,U,W,z,V,H,q,X;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,s=t._decorator,l=t.Prefab,h=t.Color,c=t.SpriteAtlas,u=t.Node,f=t.NodePool,d=t.instantiate,p=t.RigidBody,v=t.Vec3,g=t.Layers,m=t.Quat,C=t.MeshRenderer,_=t.toRadian,b=t.toDegree,N=t.view,P=t.Camera,y=t.UITransform,E=t.find,I=t.input,T=t.Input,S=t.Collider,w=t.Tween,A=t.geometry,O=t.PhysicsSystem,M=t.randomRangeInt,x=t.UIOpacity,D=t.tween,k=t.Component},function(t){B=t.CubeMesh},function(t){R=t.GetLevel,L=t.LevelStep,G=t.LevelRadius,F=t.LevelVelocity},function(t){U=t.default},function(t){W=t.Constant,z=t.ScreenOrientation},function(t){V=t.Game},function(t){H=t.GlobalGame},function(t){q=t.CardStatus},function(t){X=t.default}],execute:function(){var Y,Z,j,J,Q,K,$,tt,et,nt,it,at;r._RF.push({},"81d4eLB8j5NELnDioXtJ6pn","Cubes",void 0);var ot=s.ccclass,rt=s.property,st=s.executionOrder;t("Cubes",(Y=ot("Cubes"),Z=st(-5),j=rt(l),J=rt(h),Q=rt(c),K=rt(u),Y($=Z((et=e((tt=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"cube",et,a(e)),i(e,"color",nt,a(e)),i(e,"sprAtlas",it,a(e)),e.cameraNode=null,i(e,"selcetNode",at,a(e)),e.uiNode=null,e.camera0=null,e.camera1=null,e._level=0,e._config=null,e._locked=!1,e._verFOV=45,e._baseNode=void 0,e._nodePool=new f,e._localBuffer=new Float32Array(4),e._effectInc=0,e._matchCount=0,e._paiSelectCount=0,e._paiRands=new Array,e._paiSelets=new Array,e._paiInWorld=new Map,e}n(e,t);var r=e.prototype;return r.btnStart=function(t){void 0===t&&(t=this._level),this._locked||(this.resetGame(),this.loadLevel(t),this.faPai(),X.Clear())},r.btnContinue=function(){if(!this._locked){var t=X.runData;if(!t)return this.btnStart();this.resetGame();var e=R(t.level);this._config=e,this._level=e.Level;var n=Math.ceil((3*e.Count-t.cards.length)/3);this._matchCount=n,this.faPaiByData(t.cards)}},r.btnXiPai=function(){this._locked||this.xiPai()},r.btnFanPai=function(){this._locked||this.fanPai()},r.btnTuiPai=function(t){if(this._locked)return null==t?void 0:t(!1);var e=this.tuiPai();return null==t?void 0:t(e)},r.btnTuiPaiAll=function(){this._locked||this.tuiPaiAll()},r.btnHePai=function(t){if(this._locked)return null==t?void 0:t(!1);var e=this.hePai();return null==t?void 0:t(e)},r.putNode=function(t){this._nodePool.put(t)},r.getNode=function(){var t=this._nodePool.get();return t||(t=d(this.prefabNode())),t},r.initPool=function(t){for(var e=0;e<t;e++){var n=d(this.cube);this.enablePhysics(n,!0),this.setCubeTexture(n,"s4"),n.getComponent(p).angularDamping=.8,n.scale=this._level>0?v.ONE:new v(1.25,1.25,1.25),n.layer=g.Enum.DEFAULT,n.rotation=m.IDENTITY,this._nodePool.put(n)}},r.prefabNode=function(){if(!this._baseNode){this._baseNode=d(this.cube);var t=this._baseNode.getComponent(C);t.mesh=B;var e=this.sprAtlas.getTexture(),n=t.getSharedMaterial(0);n.setProperty("mainTexture",e),n.setProperty("mainColor",this.color)}return this._baseNode},r.verticalFOVToHorizontal=function(t,e){var n=_(t),i=Math.tan(n/2),a=2*Math.atan(i*e);return b(a)},r.horizontalFOVToVertical=function(t,e){var n=_(t),i=Math.tan(n/2),a=2*Math.atan(i/e);return b(a)},r.fixSceneAndCamera=function(){this.fixCamera(),this.fixSceneUI()},r.fixCamera=function(){var t,e;this._verFOV=45;var n=N.getVisibleSize(),i=1*n.width/n.height;this.camera0=null==(t=this.cameraNode.getChildByName("Camera0"))?void 0:t.getComponent(P),this.camera1=null==(e=this.cameraNode.getChildByName("Camera1"))?void 0:e.getComponent(P);var a=this.verticalFOVToHorizontal(this._verFOV,i);this.camera1.fov=this.camera0.fov=a,this.camera0.camera.update(!0),this.camera1.camera.update(!0)},r.fixSceneUI=function(){var t,e=null==(t=this.uiNode.getComponentInChildren(V))?void 0:t.node,n=e.getChildByName("top"),i=e.getChildByName("bottom"),a=e.getChildByName("select"),o=this.camera0.convertToUINode(new v(12,0,0),this.uiNode),r=i.getComponent(y);r.width=2.1*o.x,(r=n.getComponent(y)).width=2.1*o.x,r=a.getComponent(y);var s=2*o.x/r.width;a.scale=new v(s,s,s);var l=this.cameraNode.getChildByName("BackGround"),h=this.camera0.node.position.length();s=2*Math.tan(_(this._verFOV/2)),l.scale.set(s*h,s*h,1);var c=N.getVisibleSize();s=-a.position.y/c.height;var u=this.camera0.node.parent.position.z;this.selcetNode.setPosition(0,0,s*l.scale.y+u)},r.addEvent=function(){U.on(W.EventManager.BTN_XIPAI,this.btnXiPai,this),U.on(W.EventManager.BTN_FANPAI,this.btnFanPai,this),U.on(W.EventManager.BTN_TUIPAI,this.btnTuiPai,this),U.on(W.EventManager.BTN_TUIPAIALL,this.btnTuiPaiAll,this),U.on(W.EventManager.BTN_HEPAI,this.btnHePai,this),U.on(W.EventManager.BTN_START,this.btnStart,this),U.on(W.EventManager.BTN_CONTINUE,this.btnContinue,this),U.on(W.EventCube.GetMatchCount,this.GetMatchCount,this),U.on(W.EventCube.GetPaiInWorld,this.GetPaiInWorld,this),U.on(W.EventCube.FixSceneAndCamera,this.fixSceneAndCamera,this),U.on(W.EventCube.ResetGame,this.resetGame,this)},r.remEvent=function(){U.off(W.EventManager.BTN_XIPAI,this.btnXiPai,this),U.off(W.EventManager.BTN_FANPAI,this.btnFanPai,this),U.off(W.EventManager.BTN_TUIPAI,this.btnTuiPai,this),U.off(W.EventManager.BTN_TUIPAIALL,this.btnTuiPaiAll,this),U.off(W.EventManager.BTN_HEPAI,this.btnHePai,this),U.off(W.EventManager.BTN_START,this.btnStart,this),U.off(W.EventManager.BTN_CONTINUE,this.btnContinue,this),U.off(W.EventCube.GetMatchCount,this.GetMatchCount,this),U.off(W.EventCube.GetPaiInWorld,this.GetPaiInWorld,this),U.off(W.EventCube.FixSceneAndCamera,this.fixSceneAndCamera,this),U.off(W.EventCube.ResetGame,this.resetGame,this)},r.GetMatchCount=function(t){null==t||t(this._matchCount)},r.GetPaiInWorld=function(t){null==t||t(this._paiInWorld)},r.onLoad=function(){this.cameraNode=E("Camera"),this.uiNode=E("UI"),this.addEvent(),this.fixCamera(),this.fixSceneUI(),I.on(T.EventType.TOUCH_END,this.pickCube,this)},r.onDestroy=function(){this._nodePool.clear(),this._baseNode&&this._baseNode.destroy(),I.off(T.EventType.TOUCH_END,this.pickCube,this),this.remEvent()},r.enablePhysics=function(t,e){var n=t.getComponent(p),i=t.getComponent(S);n.enabled=e,i.enabled=e},r.setCubeTexture=function(t,e){var n=this.sprAtlas.getSpriteFrame(e),i=n.rect,a=n.texture,o=this._localBuffer;o[0]=1*i.x/a.width,o[1]=1*i.y/a.height,o[2]=1*i.width/a.width,o[3]=1*i.height/a.height,t.getComponent(C).setInstancedAttribute("a_uv",o)},r.resetGame=function(){var t,e=this;w.stopAll(),this.unscheduleAllCallbacks();var n=(null==(t=this.uiNode.getComponentInChildren(V))?void 0:t.node).getChildByName("effects");n.children[0].active=!1,n.children[1].active=!1,n.children[2].active=!1,this._paiSelets.forEach((function(t){for(var n=t.length-1;n>=0;n--)e.putNode(t[n])}));for(var i=this.node.children,a=i.length-1;a>=0;a--)this.putNode(i[a]);this._paiSelets.length=0,this._paiSelectCount=0,this._paiInWorld.clear(),this._matchCount=0,this._locked=!1},r.pickCube=function(t){var e=new A.Ray;if(this.camera0.screenPointToRay(t.getLocationX(),t.getLocationY(),e),O.instance.raycastClosest(e,2,100,!1)){var n=O.instance.raycastClosestResult.collider.node;if(this.flyToSelect(n)){var i=this._paiInWorld.get(n.name),a=i.indexOf(n);a>=0&&i.splice(a,1),U.emit(W.EventCube.Select)}}},r.loadLevel=function(t){var e,n=R(t);t=n.Level;var i=n.TypeRands,a=n.Count;this._config=n,this._level=t;var o=[];if(0==n.Types.length)for(var r=this.sprAtlas.spriteFrames,s=0,l=Object.keys(r);s<l.length;s++){var h=l[s];o.push(h)}else for(var c=n.Types,u=0;u<c.length;u++)o[u]=c[u];var f=o.length;i>f&&(i=f);for(var d=null!=(e=this._config.DwCount)?e:-1,p=[],v=0,g=f-i;v<g;v++){var m=M(0,f--);if(-1!=d){var C=o[m].startsWith("dw");d>0?C&&(p.push(o[m]),d--):C||(m=o.findIndex((function(t){return t.startsWith("dw")})))}o.splice(m,1)}p.length>0&&o.splice.apply(o,[0,p.length].concat(p));for(var _=this._paiRands=[],b=0;b<a;b++){var N=o[b%i];_.push(N,N,N)}f=_.length;for(var P=0;P<f;P++){var y=M(0,f),E=_[P];_[P]=_[y],_[y]=E}},r.getPaiNotWorld=function(t){var e=this.getNode();return this.node.addChild(e),this.enablePhysics(e,!0),this.setCubeTexture(e,t),e.getComponent(p).angularDamping=.8,e.scale=this._level>0?v.ONE:new v(1.25,1.25,1.25),e.layer=g.Enum.DEFAULT,e.rotation=m.IDENTITY,e.name=t,e},r.getPai=function(t){if(t||(t=this._paiRands.pop()),!t)return null;var e=this.getNode();this.node.addChild(e),this.enablePhysics(e,!0),this.setCubeTexture(e,t),e.getComponent(p).angularDamping=.8,e.scale=this._level>0?v.ONE:new v(1.25,1.25,1.25),e.layer=g.Enum.DEFAULT,e.rotation=m.IDENTITY,e.name=t;var n=this._paiInWorld.get(t);return n||(n=[],this._paiInWorld.set(t,n)),n.push(e),e},r.wakeUpOthers=function(t){var e=t.position,n=new A.Ray(e.x,e.y,e.z,0,1,0);if(O.instance.sweepBox(n,new v(1.5,1,2),t.rotation,2,20,!1))for(var i=O.instance.sweepCastResults,a=0;a<i.length;a++){var o;null==(o=i[a].collider.attachedRigidBody)||o.wakeUp()}},r.combineEffect=function(t){var e,n=this,i=(null==(e=this.uiNode.getComponentInChildren(V))?void 0:e.node).getChildByName("effects"),a=this.camera0.convertToUINode(t,i),o=i.children[this._effectInc];o.position=a,o.active=!0;var r=o.children[0],s=o.children[1],l=o.children[2],h=s.getComponent(x),c=l.getComponent(x);r.setScale(new v(1.5,1.5,1.5)),s.setScale(new v(.5,.5,.5)),l.setScale(v.ZERO),h.opacity=255,c.opacity=255,D().target(r).to(.2,{scale:v.ZERO},{easing:"quadOut"}).start(),D().target(s).to(.1,{scale:v.ONE},{easing:"quintOut"}).start(),D().target(h).to(.1,{opacity:0}).start(),D().target(l).to(.2,{scale:v.ONE},{easing:"quintOut"}).start(),D().target(c).delay(.1).to(.1,{opacity:0}).start(),this.scheduleOnce((function(){o.active=!1,U.emit(W.EventCube.CombineEnd),X.Save(),n._matchCount>=n._config.Count&&U.emit(W.EventCube.GameFinish,n._level)}),.25),this._effectInc=++this._effectInc%i.children.length},r.fixPosition=function(t,e,n){for(var i=this._paiSelets,a=this.selcetNode.position,o=0,r=0;o<i.length;o++)for(var s=i[o],l=0;l<s.length;l++,r++){var h=s[l];r>=e&&D().target(h).to(.3,{position:new v(3.5*(r-3),0,a.z)},{easing:"quintOut"}).call((function(){0==--t&&n()})).start()}},r.fixSelectEnd=function(){for(var t=this,e=0,n=this._paiSelets,i=function(){var i=n[a];if(i.length>=3){e+=3,t._paiSelectCount-=3,3==i.length&&n.splice(a,1);var o=i.pop(),r=i.pop(),s=i.pop();U.emit(W.EventCube.Combine);var l=r.position;D().target(o).to(.1,{position:l},{easing:"quadOut"}).start(),D().target(s).to(.1,{position:l},{easing:"quadOut"}).call((function(){t.combineEffect(r.worldPosition),t.putNode(o),t.putNode(r),t.putNode(s),0==(e-=3)&&t.fixPosition(t._paiSelectCount,0,(function(){})),++t._matchCount,t._config.Count})).start()}},a=n.length-1;a>=0;a--)i();this._paiSelectCount>=7&&U.emit(W.EventCube.GameOver)},r.flyToSelect=function(t){var e=this;if(this._paiSelectCount+1>7)return!1;this.enablePhysics(t,!1),this.wakeUpOthers(t),this._paiSelectCount++,t.setParent(this.selcetNode.parent),t.layer=g.Enum.UI_3D,t.rotation=m.IDENTITY,t.setScale(new v(.95,.95,.95));for(var n=0,i=!0,a=this._paiSelets,o=0,r=a.length;o<r;o++){var s=a[o],l=s.length;if(s[0].name==t.name){i=!1,s.push(t),n+=l;break}n+=l}var h=this._paiSelectCount-n;return i&&a.push([t]),this.fixPosition(h,n,(function(){e.fixSelectEnd(),U.emit(W.EventCube.SelectEnd)})),!0},r.hePai=function(){var t=!1,e=7-this._paiSelectCount;if(e<=0)return!1;for(var n=this._paiSelets,i=0;i<n.length;i++){var a=n[i],o=3-a.length;if(o>=0&&o<=e){t=!0;var r=a[0].name,s=this._paiInWorld.get(r);if(s&&o<=s.length){for(var l=0;l<o;l++)this.flyToSelect(s.pop());break}}}return t},r.fanPai=function(){var t=this;this._locked=!0;for(var e=1,n=D(this.node),i=this.camera0.node,a=0;a<50;a++){e*=-1;var o=3*(1-Math.sin(a*Math.PI/100));n.then(D(i).to(.02,{position:new v(o*e,0,0)}))}n.then(D(i).to(.02,{position:v.ZERO})),this.scheduleOnce((function(){for(var e=t.node.children,n=0;n<e.length;n++){var i=e[n];i.rotation=m.IDENTITY,i.getComponent(p).angularDamping=1}})),n.call((function(){for(var e=t.node.children,n=0;n<e.length;n++)e[n].getComponent(p).angularDamping=.8;t._locked=!1})).start()},r.xiPai=function(){var t=this;this._locked=!0;var e=this.node.children,n=e.length;if(!(n<=0)){O.instance.enable=!1,this._paiInWorld.clear();for(var i=n,a=function(){var n=e[o],a=n.position,r=a.length()/40;D().target(n).to(r,{position:new v(0,a.y,0)}).call((function(){t._paiRands.push(n.name),t.putNode(n),--i<=0&&t.faPai()})).start()},o=0;o<n;o++)a()}},r.zhuaPai=function(){var t=this,e=0,n=[];this._paiInWorld.forEach((function(t){t.length>=3&&e<6&&(e+=3,n.push(t.pop()),n.push(t.pop()),n.push(t.pop()))}));for(var i=function(){var i=n[a];t.enablePhysics(i,!1);var o=i.position.length()/20;D().target(i).to(o,{position:new v(0,10,0)},{easing:"quartIn"}).call((function(){t.putNode(i),--e})).start()},a=e-1;a>=0;a--)i()},r.tuiPaiAll=function(){for(var t=0;t<7;t++)this.tuiPai()},r.tuiPai=function(){var t=this,e=this._paiSelets.length-1;if(e>=0){var n=this._paiSelets[e],i=n.pop();if(i)return this._paiSelectCount--,0==n.length&&this._paiSelets.pop(),D().target(i).to(.2,{position:new v(3*(e-3),15,0)},{easing:"quartOut"}).call((function(){t.putNode(i);var e=t.getPai(i.name);e.getComponent(p).setLinearVelocity(new v(0,-2,0)),e.scale=t._level>0?v.ONE:new v(1.25,1.25,1.25)})).start(),!0}return!1},r.faPai=function(){var t,e,n,i=this;if(this._locked=!0,O.instance.enable=!0,0!=this._level){U.emit(W.EventCube.SendStart);var a=0,o=null!=(t=this._config.Step)?t:L.Default,r=0,s=null!=(e=this._config.Radius)?e:G.Default,l=null!=(n=this._config.Velocity)?n:F.Default;this.schedule((function t(){var e=i.getPai();if(!e)return i.unschedule(t),i._locked=!1,void U.emit(W.EventCube.SendEnd);var n=Math.cos(r),h=Math.sin(r),c=1+a++/10*.5;e.position=new v(n*s,c,h*s);var u=e.getComponent(p);u.setLinearVelocity(new v(n*l,0,h*l)),i.scheduleOnce((function(){u.angularDamping=.8}),i._config.DampTime),u.angularDamping=1,r+=o*Math.PI/180}),.003)}else{for(var h=0;;h++){var c=this.getPai();if(!c)break;var u=H.orientation==z.HORIZONTAL?7:10;c.position=new v(8*(h%3-1),1,(~~(h/3)-1)*u),c.rotation=m.fromAxisAngle(new m,v.UNIT_Y,Math.random()*Math.PI/6)}this._locked=!1}},r.faPaiByData=function(t){this._locked=!0,O.instance.enable=!0;for(var e=t.length,n=0;n<e;n++){var i=t[n];if(i.status==q.Selected){var a=this.getPaiNotWorld(i.name);this.flyToSelect(a)}else{var o=this.getPai(i.name);if(!o)continue;o.setWorldPosition(i.position.x,i.position.y,i.position.z),o.setRotationFromEuler(i.rotation.x,i.rotation.y,i.rotation.z),o.setScale(1,1,1)}}this._locked=!1,U.emit(W.EventCube.SendEnd)},o(e,[{key:"PaiInWorld",get:function(){return this._paiInWorld}},{key:"PaiSelected",get:function(){return this._paiSelets}},{key:"PaiCount",get:function(){var t=0;return this._paiInWorld.forEach((function(e){t+=e.length})),t+=this._paiSelectCount}}]),e}(k)).prototype,"cube",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(tt.prototype,"color",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h("#0785FA")}}),it=e(tt.prototype,"sprAtlas",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(tt.prototype,"selcetNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=tt))||$)||$));r._RF.pop()}}}));

System.register("chunks:///_virtual/d.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"fd2c1BARAVCIbhUrlc24Ase","d",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/DB.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./Config.ts","./WeChat.ts","./Yandex.ts","./Crazy.ts"],(function(t){var e,r,n,a,u,i,s,o,c,f,h,p;return{setters:[function(t){e=t.createClass,r=t.inheritsLoose,n=t.asyncToGenerator,a=t.regeneratorRuntime,u=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){s=t.default},function(t){o=t.default,c=t.GameData},function(t){f=t.default},function(t){h=t.default},function(t){p=t.Crazy}],execute:function(){i._RF.push({},"4a5673YOwRE9oGxN3VtKHUm","DB",void 0);var l="cmHCj4EEdihturTk_",d=function(){function t(){this.Config=void 0,this._data={},this.Config={enable:o.Storage.enable,key:o.Storage.key}}var r=t.prototype;return r.getData=function(){var t=n(a().mark((function t(e){var r,n,i,s,o,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e||(e=Object.keys(c)),Object.keys(this._data).length!=e.length){t.next=3;break}return t.abrupt("return",this._data);case 3:for(r=e.length-1;r>=0;r--)void 0!==this._data[e[r]]&&e.splice(r,1);if(0!=e.length){t.next=6;break}return t.abrupt("return",this._data);case 6:return t.next=8,this.getStorageValues(e);case 8:for(n=t.sent,i=u(e);!(s=i()).done;)f=s.value,this._data[f]=null!=(o=n[f])?o:c[f];return t.abrupt("return",this._data);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=n(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=this._data[e])){t.next=3;break}return t.abrupt("return",r);case 3:return t.next=5,this.getStorageValues([e]).then((function(t){return t[e]}));case 5:return(r=t.sent)||(r=c[e]),this._data[e]=r,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setData=function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e];this._data[n]=t[n]}},r.set=function(t,e){this._data[t]=e},r.save=function(){this.setStorageValues(this._data)},r.getStorageValues=function(){var t=n(a().mark((function t(e){var r,n,u,i,s,o,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},t.next=3,this.retrieveStorageValues(e);case 3:for(n=t.sent,u=Object.keys(n),i=0,s=u;i<s.length;i++){o=s[i],c="unx"!==o?this.xor(n[o],o):n[o];try{r[o]=JSON.parse(c)}catch(t){r[o]=void 0}}return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setStorageValues=function(){var t=n(a().mark((function t(e){var r,n,u,i,s,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r={},n=Object.keys(e),u=0,i=n;u<i.length;u++)s=i[u],o=JSON.stringify(e[s]),"unx"!==s&&(o=this.xor(o,s),r[s]=o);this.updateStorageValues(r);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.xor=function(t,e){if(t&&this.Config.enable&&this.Config.key){var r=s.hashCode(e);t=s.xor(t,this.Config.key,r)}return t},e(t,[{key:"data",get:function(){return this._data}}]),t}(),v=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.retrieveStorageValues=function(){var t=n(a().mark((function t(e){var r,n,i,s,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r={},n=u(e);!(i=n()).done;)s=i.value,(o=p.instance.data.getItem(l+s))&&(r[s]=o);return t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.updateStorageValues=function(){var t=n(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in e)p.instance.data.setItem(l+r,e[r]);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}(d),g=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.retrieveStorageValues=function(){var t=n(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.data.getData(e).then((function(t){for(var e,r={},n=u(t);!(e=n()).done;){var a=e.value;r[a.key]=a.value}return r})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.updateStorageValues=function(){var t=n(a().mark((function t(e){var r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n in r=[],e)r.push({key:n,value:e[n]});return t.next=4,f.data.setData(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}(d),y=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var u=e.prototype;return u.retrieveStorageValues=function(){var t=n(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h.data.getData(e).then((function(t){var e={};return t&&(e=t),e})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u.updateStorageValues=function(){var t=n(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.data.setData(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}(d),x=t("DB",function(){function t(){}return e(t,null,[{key:"cloud",get:function(){return this.yandex}},{key:"local",get:function(){return this._local||(this._local=new v),this._local}},{key:"wechat",get:function(){return this._wechat||(this._wechat=new g),this._wechat}},{key:"yandex",get:function(){return this._yandex||(this._yandex=new y),this._yandex}}]),t}());x._local=void 0,x._wechat=void 0,x._yandex=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.EventTarget}],execute:function(){n._RF.push({},"fd0304JXPtHKYfE3YTTrQVs","EventManager",void 0);e("default",new(function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n}(r)));n._RF.pop()}}}));

System.register("chunks:///_virtual/FinishPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./EventManager.ts","./Constant.ts","./LogicData.ts","./LogicAudio.ts","./Ad.ts","./LogicScene.ts","./Crazy.ts","./PopupManager.ts","./GameRunData.ts","./Levels.ts"],(function(t){var i,n,e,o,a,r,u,s,c,l,p,d,b,f,h,y,v,g,w,m,R,P;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,u=t.Node,s=t.tween,c=t.randomRange,l=t.Label,p=t.instantiate},function(t){d=t.default},function(t){b=t.default},function(t){f=t.Constant},function(t){h=t.default},function(t){y=t.default},function(t){v=t.Ad},function(t){g=t.default},function(t){w=t.Crazy},function(t){m=t.default},function(t){R=t.default},function(t){P=t.GetLevel}],execute:function(){var k,I,C,L,N,O,T,D,S;a._RF.push({},"178421sbOxIc5zkD7EGQDBe","FinishPopup",void 0);var z=r.ccclass,E=r.property,F=[{id:"coin",count:100,probability:100},{id:"back",count:2,probability:100},{id:"clear",count:1,probability:100},{id:"shuffle",count:1,probability:50},{id:"turn",count:1,probability:50},{id:"coin",count:200,probability:50},{id:"coin",count:300,probability:30},{id:"back",count:5,probability:20},{id:"shuffle",count:2,probability:10},{id:"turn",count:2,probability:10},{id:"coin",count:400,probability:10},{id:"coin",count:500,probability:7},{id:"shuffle",count:3,probability:5},{id:"turn",count:3,probability:5},{id:"coin",count:600,probability:5},{id:"shuffle",count:4,probability:1},{id:"turn",count:4,probability:1},{id:"coin",count:1e3,probability:1}];t("FinishPopup",(k=z("FinishPopup"),I=E(u),C=E(u),L=E(u),k((T=i((O=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,e(i,"typesNode",T,o(i)),e(i,"typesShowNode",D,o(i)),e(i,"nRewardIconTip",S,o(i)),i}n(i,t);var a=i.prototype;return a.init=function(){R.Clear();var t=[this.randomReward()],i=h.maxLevel(),n=i==this.options;0==this.options&&!n&&t.pop(),n&&(t.push(this.randomReward()),P(i).Hard&&(t.push(this.randomReward(),this.randomReward()),w.instance.game.happyTime())),t.forEach((function(t){h.addProp({id:t.id,count:t.count},!1)})),n&&1==h.runData.level&&w.instance.game.happyTime(),this.options?this.options=this.options+1:this.options=h.runData.level+1,h.setLevel(this.options),h.incrbyScore(10*(this.options-1)),this.showValues(t),y.playWin();var e=h.getRewardInfo();this.nRewardIconTip.parent.active=!!e&&e.isok,(null==e?void 0:e.isok)&&s(this.nRewardIconTip).to(.2,{angle:20},{easing:"sineInOut"}).to(.2,{angle:-20},{easing:"sineInOut"}).to(.2,{angle:20},{easing:"sineInOut"}).to(.2,{angle:-20},{easing:"sineInOut"}).to(.1,{angle:0},{easing:"sineIn"}).delay(.5).union().repeatForever().start(),b.once(f.EventPopup.RewardOnBuyCallback,this.onRewardOk,this)},a.onDestroy=function(){b.off(f.EventPopup.RewardOnBuyCallback,this.onRewardOk,this)},a.onRewardOk=function(){this.nRewardIconTip.parent.active=!1},a.btnNext=function(){h.isHpEmpty||v.instance.showFullScreen(),b.emit(f.EventGame.NextLevel,this.options)},a.btnHome=function(){y.playClick(),this.hide(!1,0),g.instance.toHome()},a.btnReward=function(){y.playClick(),m.show("prefabs/popup/PopupPropReward",void 0,{immediately:!0})},a.randomReward=function(){var t=c(0,this.getTotal(F)),i=0;for(var n in F){var e=F[n];if(t<=(i+=e.probability))return e}return F[0]},a.randomRewardPremium=function(){var t=F.filter((function(t){return t.probability<50})),i=c(0,this.getTotal(t)),n=0;for(var e in t){var o=t[e];if(i<=(n+=o.probability))return o}return t[0]},a.getTotal=function(t){var i=0;for(var n in t)i+=t[n].probability;return i},a.showValues=function(t){var i=this;t.forEach((function(t,n){var e=i.typesNode.getChildByName(t.id);if(e){var o;(null==(o=e.getChildByName("count"))?void 0:o.getComponent(l)).string="x"+t.count;var a=p(e),r=a.getScale();a.setParent(i.typesShowNode),a.setScale(0,0,0),s(a).delay(.1*n).to(.3,{scale:r},{easing:"backOut"}).start()}}))},i}(d)).prototype,"typesNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(O.prototype,"typesShowNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(O.prototype,"nRewardIconTip",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=O))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Constant.ts","./LogicAudio.ts","./PopupManager.ts","./LogicData.ts","./Levels.ts","./TimeManager.ts","./UI.ts","./l10n.ts","./GameRunData.ts","./l10n-manager.ts"],(function(e){var t,n,i,a,o,s,r,u,p,h,l,f,c,d,v,m,b,g,C,T,G,E,P,y,S,H;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,s=e.createClass},function(e){r=e.cclegacy,u=e._decorator,p=e.Label,h=e.Node,l=e.game,f=e.tween,c=e.v3,d=e.Component},function(e){v=e.default},function(e){m=e.GameStartType,b=e.Constant},function(e){g=e.default},function(e){C=e.default},function(e){T=e.default,G=e.GlobalGame},function(e){E=e.GetLevel},function(e){P=e.TimeManager},function(e){y=e.UI},null,function(e){S=e.default},function(e){H=e.default}],execute:function(){var N,w,B,D,L,R,_,O,I;r._RF.push({},"46c67OgPutP/aBId6s8NckW","Game",void 0);var F=u.ccclass,M=u.property;u.executionOrder,e("Game",(N=F("Game"),w=M(p),B=M(h),D=M(h),N((_=t((R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"lvInfoCount",_,a(t)),i(t,"nHand",O,a(t)),i(t,"nLoading",I,a(t)),t._GameStartType=m.NEW,t._init=!1,t.prevTimeOver=0,t.prevTimeFinish=0,t.downBtnTime=0,t._handTween=void 0,t}n(t,e);var r=t.prototype;return r.initType=function(e){this._GameStartType=e},r.onLoad=function(){v.on(b.EventCube.Combine,this.onCombine,this),v.on(b.EventCube.CombineEnd,this.onCombineEnd,this),v.on(b.EventCube.Select,this.onSelect,this),v.on(b.EventCube.GameOver,this.onGameOver,this),v.on(b.EventCube.GameFinish,this.onGameFinish,this),v.on(b.EventCube.SendStart,this.onSendStart,this),v.on(b.EventCube.SendEnd,this.onSendEnd,this),v.on(b.EventGame.GameRestart,this.fnGameRestart,this),v.on(b.EventGame.GameRestartNoHp,this.fnGameRestartNoHp,this),v.on(b.EventGame.GameTime,this.fnGameTime,this),v.on(b.EventGame.GameRevive,this.fnGameRevive,this),v.on(b.EventGame.NextLevel,this.fnNextLevel,this),v.on(b.EventGame.UpdateProp,this.updateProp,this),P.instance.init(this.node.getChildByName("top").getChildByName("Time").getChildByName("Label").getComponent(p))},r.start=function(){this.fnGameRestart(T.runData.level),v.emit(b.EventCube.ResetGame),this.fnStart(),this._init=!0},r.onEnable=function(){G.isGame=!0,this._init&&(this.fnGameRestart(T.runData.level),v.emit(b.EventCube.ResetGame),this.fnStart())},r.onDestroy=function(){v.off(b.EventCube.Combine,this.onCombine,this),v.off(b.EventCube.CombineEnd,this.onCombineEnd,this),v.off(b.EventCube.Select,this.onSelect,this),v.off(b.EventCube.GameOver,this.onGameOver,this),v.off(b.EventCube.GameFinish,this.onGameFinish,this),v.off(b.EventCube.SendStart,this.onSendStart,this),v.off(b.EventCube.SendEnd,this.onSendEnd,this),v.off(b.EventGame.GameRestart,this.fnGameRestart,this),v.off(b.EventGame.GameRestartNoHp,this.fnGameRestartNoHp,this),v.off(b.EventGame.GameTime,this.fnGameTime,this),v.off(b.EventGame.GameRevive,this.fnGameRevive,this),v.off(b.EventGame.NextLevel,this.fnNextLevel,this)},r.initFreeProp=function(e){var t;if(e){var n;t=null==(n=S.runData)?void 0:n.freeProp,E(S.runData.level).Hard&&C.show("prefabs/popup/PopupHardTip")}else{var i=E(T.runData.level);t=i.FreeProp,i.Hard&&C.show("prefabs/popup/PopupHardTip")}if(t)for(var a in t){var o=a;T.freeProp.set(o,t[o])}else T.freeProp.clear()},r.play=function(e){void 0===e&&(e=0),this.initFreeProp(e>0),this.updateProp(!0),this.updateLevelInfo(),P.instance.start(e,1),v.emit(b.EventMain.FixCamera)},r.onCombine=function(){T.incrbyScore(1),g.playCombine()},r.onCombineEnd=function(){this.updateLevelInfo()},r.onSelect=function(){g.playDown(),0==T.runData.level&&this.showHand()},r.onGameOver=function(e){void 0===e&&(e="full"),l.totalTime-this.prevTimeOver<0||(this.prevTimeOver=l.totalTime+1e3,C.show("prefabs/popup/PopupOver",{type:e}),P.instance.stop())},r.onGameFinish=function(e){l.totalTime-this.prevTimeFinish<0||(this.prevTimeFinish=l.totalTime+1e3,C.hideAll(!1),C.show("prefabs/popup/PopupFinish",e),P.instance.stop())},r.onSendStart=function(){G.isSendCube=!0,g.playShuffle()},r.onSendEnd=function(){G.isSendCube=!1,g.stopLoopEffect(),this.nLoading.active=!1},r.updateLevelInfo=function(){var e=this,t=this.node.getChildByName("top"),n=null==t?void 0:t.getChildByName("Level"),i=E(T.runData.level);n.getChildByName("lv").getComponent(p).string=H.t("textLevel")+" "+(T.runData.level+1).toString(),v.emit(b.EventCube.GetMatchCount,(function(t){e.lvInfoCount.string=(3*i.Count-3*t).toString()}))},r.updateProp=function(e){void 0===e&&(e=!1);var t=this.node.getChildByName("bottom");null==t||t.children.forEach((function(t,n){var i,a,o,s=t.name,r=null!=(i=T.runData.prop[s])?i:0,u=null==(a=t.getChildByName("count"))?void 0:a.getComponent(p);u.string=r.toString();var h=t.getChildByName("add");h.active=r<=0,u.node.active=!h.active;var l=t.getChildByName("free"),d=null!=(o=T.freeProp.get(s))?o:0;l.active=d>0,l.active&&(l.getChildByName("count").getComponent(p).string=d.toString(),e&&(l.setScale(0,0,0),f(l).delay(.1*n).to(.5,{scale:c(1.5,1.5,1.5)},{easing:"quadOut"}).to(.5,{scale:c(1,1,1)},{easing:"sineOut"}).start()),h.active=u.node.active=!1)}))},r.fnStart=function(){var e=this;this._GameStartType==m.NEW?(this.fnGameRestart(T.runData.level),this.nLoading.active=!1):(this._GameStartType=m.NEW,this.nLoading.active=!0,this.scheduleOnce((function(){e.fnContinue()})))},r.fnNextLevel=function(e){var t;if(T.runData.hp.current<=0)return y.instance.showTip(H.t("msgNoHp")),void C.show("prefabs/popup/PopupPropOne",{id:"hp"},{immediately:!0});T.incrbyHp(-1),e=null!=(t=e)?t:T.runData.level,v.emit(b.EventManager.BTN_START,e),C.hide(),this.play()},r.fnGameRestartNoHp=function(e){v.emit(b.EventManager.BTN_START,e),C.hide(),this.play(),0==e?this.showHand():this.hideHand()},r.fnContinue=function(){var e,t;v.emit(b.EventManager.BTN_CONTINUE),C.hide(),this.play(null!=(e=null==(t=S.runData)?void 0:t.duration)?e:0)},r.fnGameRestart=function(e){if(0!=e){if(T.isHpEmpty)return y.instance.showTip(H.t("msgNoHp")),void C.show("prefabs/popup/PopupPropOne",{id:"hp"},{immediately:!0});T.incrbyHp(-1)}v.emit(b.EventManager.BTN_START,e),C.hide(),this.play(),0==e?this.showHand():this.hideHand()},r.fnGameTime=function(){P.instance.incrby(60),C.hide()},r.fnGameRevive=function(){P.instance.continue(),v.emit(b.EventManager.BTN_TUIPAIALL),C.hide()},r.btnSettings=function(){g.playClick(),G.isSendCube||(C.show("prefabs/popup/PopupSetting",{isNav:!0}),P.instance.stop())},r.btnXiPai=function(){if(this.isDownBtn){g.playClick();var e=T.runData.prop.shuffle,t=T.freeProp.get("shuffle");if(e>0||t>0){if(G.isSendCube)return;v.emit(b.EventManager.BTN_XIPAI),T.useProp("shuffle"),this.updateProp(),this.downBtnTime=l.totalTime}else P.instance.stop(),C.show("prefabs/popup/PopupPropOne",{id:"shuffle"})}},r.btnFanPai=function(){if(this.isDownBtn){g.playClick();var e=T.runData.prop.turn,t=T.freeProp.get("turn");if(e>0||t>0){if(G.isSendCube)return;v.emit(b.EventManager.BTN_FANPAI),T.useProp("turn"),this.updateProp(),this.downBtnTime=l.totalTime}else P.instance.stop(),C.show("prefabs/popup/PopupPropOne",{id:"turn"})}},r.btnTuiPai=function(){var e=this;if(this.isDownBtn){g.playClick();var t=T.runData.prop.back,n=T.freeProp.get("back");if(t>0||n>0){if(G.isSendCube)return;v.emit(b.EventManager.BTN_TUIPAI,(function(t){t?T.useProp("back"):y.instance.showTip(H.t("msgBackError")),e.updateProp()}))}else P.instance.stop(),C.show("prefabs/popup/PopupPropOne",{id:"back"})}},r.btnHePai=function(){var e=this;if(this.isDownBtn){g.playClick();var t=T.runData.prop.clear,n=T.freeProp.get("clear");if(t>0||n>0){if(G.isSendCube)return;v.emit(b.EventManager.BTN_HEPAI,(function(t){t?T.useProp("clear"):y.instance.showTip(H.t("msgClearError")),e.updateProp()}))}else P.instance.stop(),C.show("prefabs/popup/PopupPropOne",{id:"clear"})}},r.showHand=function(){var e=this;this.nHand.active=!0,this._handTween&&this._handTween.stop(),this._handTween=f(this.nHand).to(.35,{scale:c(.9,.9,.9)},{easing:"sineInOut"}).to(.35,{scale:c(1,1,1)},{easing:"sineInOut"}).union().repeatForever().start(),v.emit(b.EventCube.GetPaiInWorld,(function(t){for(var n,i="",a=5,s=o(t);!(n=s()).done;){var r=n.value,u=r[0],p=r[1];p.length>0&&p.length<a&&(i=u,a=p.length)}if(""!=i){var h=t.get(i)[0].getPosition();e.nHand.setPosition(25*h.x,25*-h.z+50,1),e.nHand.position.x<20&&e.nHand.setPosition(e.nHand.position.x+20,e.nHand.position.y,1),e.nHand.position.y<20&&e.nHand.setPosition(e.nHand.position.x,e.nHand.position.y+20,1)}else e.hideHand()}))},r.hideHand=function(){this.nHand.active&&(this.nHand.active=!1,this._handTween&&this._handTween.stop())},s(t,[{key:"isDownBtn",get:function(){return l.totalTime-this.downBtnTime>1e3}}]),t}(d)).prototype,"lvInfoCount",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(R.prototype,"nHand",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(R.prototype,"nLoading",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=R))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameRunData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Cubes.ts","./Utils.ts","./Config.ts","./Interface.ts","./Constant.ts","./LogicData.ts","./TimeManager.ts"],(function(t){var e,r,n,o,a,i,s,u,c,l,f,p,d;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy,n=t.sys,o=t.error,a=t.director},function(t){i=t.Cubes},function(t){s=t.default},function(t){u=t.default},function(t){c=t.CardStatus},function(t){l=t.ScreenOrientation},function(t){f=t.default,p=t.GlobalGame},function(t){d=t.TimeManager}],execute:function(){r._RF.push({},"96b47AcKfdJVbQ3Cba/7BMf","GameRunData",void 0);var h=t("default",function(){function t(){}return t._saveData=function(t,e){void 0===e&&(e=!1),f.RunGameSave(t,e),n.localStorage.setItem(this._local_key,t)},t._loadData=function(){return f.RunGameGet()},t.Init=function(){var t=n.localStorage.getItem(this._local_key);this._saveData(t),this.Load()},t.Save=function(e){void 0===e&&(e=!1);var r=t.RunDataToString();r+=s.md5(r+u.Storage.key),this._saveData(r,e)},t.Clear=function(t){void 0===t&&(t=!1),this.runData=void 0,this._saveData(void 0,t)},t.Load=function(){var t=this._loadData();if(t){var e=t.slice(-32);if(t=t.slice(0,-32),s.md5(t+u.Storage.key)!==e)return void o("md5 error");var r=this.StringToRunData(t);r&&this.sortRunData(r),this.runData=r}console.log(this.runData)},t.RunDataToString=function(){var e=this,r=this.Cubes.sprAtlas.getSpriteFrames(),n=t.getRunData(),o="";return n.cards.forEach((function(t){var n=0==e.precision?t.position.x:Math.floor(t.position.x*e.precision),a=0==e.precision?t.position.y:Math.floor(t.position.y*e.precision),i=0==e.precision?t.position.z:Math.floor(t.position.z*e.precision),s=0==e.precision?t.rotation.x:Math.floor(t.rotation.x*e.precision),u=0==e.precision?t.rotation.y:Math.floor(t.rotation.y*e.precision),l=0==e.precision?t.rotation.z:Math.floor(t.rotation.z*e.precision),f=t.status===c.Selected?0:1,p=function(t){if(null==r)return-1;for(var e=0;e<r.length;e++){var n=r[e];if(n&&n.name===t)return e}return-1}(t.name);o+=""+f+n+","+a+","+i+","+s+","+u+","+l+","+p+";"})),o=o.slice(0,-1),o=""+n.dir+o,o+="|"+n.level,o+="|"+n.duration,o+="|"+n.freeProp.back+n.freeProp.clear+n.freeProp.shuffle+n.freeProp.turn},t.StringToRunData=function(t){var e=this,r=this.Cubes.sprAtlas.getSpriteFrames(),n=0===parseInt(t[0])?l.VERTICAL:l.HORIZONTAL,o=(t=t.slice(1)).split("|"),a=o[0],i=o[1],s=o[2],u=o[3],f={cards:[],dir:n,level:parseInt(i),duration:parseInt(s),freeProp:{back:parseInt(u[0]),clear:parseInt(u[1]),shuffle:parseInt(u[2]),turn:parseInt(u[3])}};if(a.split(";").forEach((function(t){var n="0"===t[0]?c.Selected:c.UnSelected,o=(t=t.slice(1)).split(",");if(o[6]){var a=0==e.precision?1:e.precision,i={x:Number(o[0])/a,y:Number(o[1])/a,z:Number(o[2])/a},s={x:Number(o[3])/a,y:Number(o[4])/a,z:Number(o[5])/a},u=function(t){if(null==r)return"";if(t<0||t>=r.length)return"";var e=r[t];return e?e.name:""}(parseInt(o[6]));u&&f.cards.push({position:i,rotation:s,status:n,name:u})}})),0!==f.cards.length)return f},t.sortRunData=function(t){t.cards.sort((function(t,e){return e.position.y-t.position.y}))},t.getRunData=function(){var e=this.runData={cards:[],dir:p.orientation,level:f.runData.level,duration:d.instance.duration,freeProp:{back:f.freeProp.get("back"),clear:f.freeProp.get("clear"),shuffle:f.freeProp.get("shuffle"),turn:f.freeProp.get("turn")}},r=t.Cubes;return r.PaiInWorld.forEach((function(t){for(var r=0;r<t.length;r++){var n=t[r];e.cards.push({position:{x:n.worldPosition.x,y:n.worldPosition.y,z:n.worldPosition.z},rotation:{x:n.eulerAngles.x,y:n.eulerAngles.y,z:n.eulerAngles.z},name:n.name,status:c.UnSelected})}})),r.PaiSelected.forEach((function(t){for(var r=0;r<t.length;r++){var n=t[r];e.cards.push({position:{x:n.worldPosition.x,y:n.worldPosition.y,z:n.worldPosition.z},rotation:{x:n.eulerAngles.x,y:n.eulerAngles.y,z:n.eulerAngles.z},name:n.name,status:c.Selected})}})),e},e(t,null,[{key:"Cubes",get:function(){var e;t._cubes||(t._cubes=null==(e=a.getScene())?void 0:e.getComponentInChildren(i));return t._cubes}}]),t}());h._local_key="_run_data_m",h._cubes=void 0,h.runData=void 0,h.precision=100,r._RF.pop()}}}));

System.register("chunks:///_virtual/HardTipPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./l10n.ts","./l10n-manager.ts"],(function(t){var i,e,n,o,r,a,l,p,u,c,s,f,y,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Label,p=t.Node,u=t.UIOpacity,c=t.v3,s=t.color,f=t.tween},function(t){y=t.default},null,function(t){d=t.default}],execute:function(){var b,h,g,T,m,v,w,P,O;r._RF.push({},"1299dU9LIZKZYHUUFIX6yux","HardTipPopup",void 0);var H=a.ccclass,z=a.property;t("HardTipPopup",(b=H("HardTipPopup"),h=z(l),g=z(p),T=z(u),b((w=i((v=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"lbTip",w,o(i)),n(i,"arrow",P,o(i)),n(i,"uiOpacity",O,o(i)),i.showAnimation=function(t,i,e){t.set({scale:c(1,1,0)}),t.to(e,{scale:c(1,1,1)},{easing:"sineOut",onUpdate:function(t,e){i.opacity=255*Math.min(1.4*e,1)}})},i.hideAnimation=function(t,i,e){t.set({scale:c(1,1,1)}),i.opacity=0},i}return e(i,t),i.prototype.init=function(){var t=this;this.uiOpacity.opacity=255,this.lbTip.string=d.t("dSpike"),this.lbTip.node.setPosition(-600,0,0),this.lbTip.color=s(255,255,255,0),f(this.lbTip).to(.5,{color:{r:255,g:255,b:255,a:255}}).start(),f(this.lbTip.node).to(.5,{position:c(0,0,0)},{easing:"quadOut"}).start(),f(this.uiOpacity).delay(2).to(1,{opacity:0}).call((function(){t.hide()})).start()},i}(y)).prototype,"lbTip",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(v.prototype,"arrow",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(v.prototype,"uiOpacity",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/Home.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Constant.ts","./LogicScene.ts","./PopupManager.ts","./LogicData.ts","./Utils.ts","./Config.ts","./UI.ts","./l10n.ts","./TimeManager.ts","./Ad.ts","./LogicAudio.ts","./GameRunData.ts","./l10n-manager.ts"],(function(e){var n,t,i,a,o,r,u,l,p,s,c,f,d,h,v,b,m,g,C,w,L,y,R,T,D,I,H;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,u=e.Node,l=e.Label,p=e.Tween,s=e.tween,c=e.find,f=e.Component},function(e){d=e.default},function(e){h=e.Constant,v=e.GameStartType},function(e){b=e.default},function(e){m=e.default},function(e){g=e.default,C=e.GlobalGame},function(e){w=e.default},function(e){L=e.GameDataConfig},function(e){y=e.UI},null,function(e){R=e.TimeManager},function(e){T=e.Ad},function(e){D=e.default},function(e){I=e.default},function(e){H=e.default}],execute:function(){var P,S,z,k,x,E,G,F,M,O,U,A,B,_,N,j,K,V,W;o._RF.push({},"cd88doiW45ApoVym6K+zjt9","Home",void 0);var q=r.ccclass,J=r.property;e("Home",(P=q("Home"),S=J({type:u,tooltip:"继续游戏按钮"}),z=J(l),k=J(l),x=J(l),E=J(l),G=J(u),F=J(u),M=J(l),P((A=n((U=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,i(n,"nCuntinue",A,a(n)),i(n,"hpCountLabel",B,a(n)),i(n,"hpDateLabel",_,a(n)),i(n,"coinCountLabel",N,a(n)),i(n,"levelLabel",j,a(n)),i(n,"nReward",K,a(n)),i(n,"nRewardIconTip",V,a(n)),i(n,"lRewardTime",W,a(n)),n}t(n,e);var o=n.prototype;return o.onLoad=function(){d.on(h.EventHome.UpdateCoin,this.updateCoin,this),d.on(h.EventHome.UpdateHp,this.updateHp,this),T.instance.ready(),d.on(h.EventMain.OnScreenChange,this.updateContinue,this)},o.start=function(){d.emit(h.EventMain.FixCamera,"home"),D.playBgm(),0==g.maxLevel()&&b.instance.toGame()},o.onEnable=function(){C.isGame=!1,this.nRewardIconTip.active=!1,p.stopAllByTarget(this.nRewardIconTip),s(this.nRewardIconTip).to(.2,{angle:20},{easing:"sineInOut"}).to(.2,{angle:-20},{easing:"sineInOut"}).to(.2,{angle:20},{easing:"sineInOut"}).to(.2,{angle:-20},{easing:"sineInOut"}).to(.1,{angle:0},{easing:"sineIn"}).delay(.5).union().repeatForever().start(),R.instance.stop(),D.stopLoopEffect(),this.updateInfo(),this.updateContinue()},o.updateContinue=function(){if(I.runData&&C.orientation==I.runData.dir&&I.runData.cards.length>0){var e,n,t;this.nCuntinue.active=!0;var i=null==(e=c("info/Level-info-count/lv",this.nCuntinue))?void 0:e.getComponent(l),a=null==(n=c("info/Time/Label",this.nCuntinue))?void 0:n.getComponent(l),o=null==(t=c("info/Level/lv",this.nCuntinue))?void 0:t.getComponent(l);return i.string=I.runData.cards.length+"",a.string=w.formatSeconds(I.runData.duration),o.string=H.t("textLevel")+" "+(I.runData.level+1),void(this.levelLabel.node.parent.active=!1)}this.nCuntinue.active=!1,this.levelLabel.node.parent.active=!0},o.updateInfo=function(){var e=g.maxLevel()+1;this.levelLabel.string=H.t("textLevel")+" "+e,this.updateHp(),this.updateCoin()},o.updateHp=function(){var e=g.recoverHpByTimestamp(),n=e.time,t=e.current,i=e.isFull,a=w.formatSeconds(n);i&&(a=H.t("textHpFull")),this.hpCountLabel.string=t+"",this.hpDateLabel.string=a,d.emit(h.EventPopup.UpdateHp,n,t,i);var o=g.getRewardInfo();if(this.nReward.active=!!o,this.nReward.active){this.nRewardIconTip.active=o.isok,this.lRewardTime.node.parent.active=!o.isok;var r=o.time-1<0?0:o.time-1;this.lRewardTime.string=w.formatSeconds(r)}},o.updateCoin=function(){var e=g.runData.prop.coin;this.coinCountLabel.string=e+""},o.btnContinue=function(){var e;D.playClick(),T.instance.showFullScreen();var n=null==(e=I.runData)?void 0:e.level;n&&g.setLevel(n),b.instance.toGame(v.CONTINUE)},o.btnStart=function(){D.playClick(),g.isHpEmpty?m.show("prefabs/popup/PopupPropOne",{id:"hp"}):(T.instance.showFullScreen(),g.setLevel(g.maxLevel()),b.instance.toGame())},o.btnSetting=function(){D.playClick(),m.show("prefabs/popup/PopupSetting")},o.btnShop=function(){D.playClick(),m.show("prefabs/popup/PopupProp")},o.btnHp=function(){D.playClick(),g.runData.hp.current>=L.hp.max?y.instance.showTip(H.t("msgHpMax")):m.show("prefabs/popup/PopupPropOne",{id:"hp"})},o.btnReward=function(){D.playClick(),m.show("prefabs/popup/PopupPropReward")},o.btnLevel=function(){D.playClick(),m.show("prefabs/popup/PopupLevels")},n}(f)).prototype,"nCuntinue",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(U.prototype,"hpCountLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(U.prototype,"hpDateLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(U.prototype,"coinCountLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(U.prototype,"levelLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(U.prototype,"nReward",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(U.prototype,"nRewardIconTip",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(U.prototype,"lRewardTime",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=U))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/icu-component.ts",["cc"],(function(){var e,c;return{setters:[function(t){e=t.cclegacy,c=t._decorator}],execute:function(){e._RF.push({},"7a9702ZfUJLAYlcof0GxBG1","icu-component",void 0);c.ccclass,c.property,c.requireComponent,c.executeInEditMode;e._RF.pop()}}}));

System.register("chunks:///_virtual/icu-options.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"dc153GItvdCNIAlIBY8vQ+M","icu-options",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/icu-type.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e5dc4ljkiFFpI9LqK8hBCPl","icu-type",void 0);var i=e("default",function(e){return e[e.DateTime=0]="DateTime",e[e.Number=1]="Number",e[e.List=2]="List",e[e.RelativeTime=3]="RelativeTime",e}(i||{}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Interface.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"cab8e6vekBMNJOSoJ7KnU6v","Interface",void 0);e("CardStatus",function(e){return e[e.Selected=0]="Selected",e[e.UnSelected=1]="UnSelected",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Intl.PluralRules.ts",["cc","./polyfill.mjs_cjs=&original=.js"],(function(){var l;return{setters:[function(n){l=n.cclegacy},null],execute:function(){l._RF.push({},"c9594RdIOFIPIqnCMoH103U","Intl.PluralRules",void 0),l._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-component.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(t){var e,n,o,r,i,l,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.createClass},function(t){r=t.cclegacy,i=t._decorator,l=t.Label,a=t.Component},function(t){s=t.EDITOR}],execute:function(){var c,p,u,d,h,f,g;r._RF.push({},"64a56e3cKhJIYlOsrVQprpv","l10n-component",void 0);var v=i.ccclass,b=i.property,y=i.disallowMultiple,m=i.requireComponent,L=i.menu;t("default",(c=v("L10nComponent"),p=m(l),u=y(),d=L("hidden:LocalizationEditor/L10nComponent"),h=b({readonly:!0}),c(f=p(f=u(f=d((e((g=function(t){function e(){var e;return(e=t.call(this)||this).label=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.label=this.node.getComponent(l)},r.start=function(){this.render()},r.render=function(){},r.preview=function(t){if(this.label&&s){var e=this.label.string;this.label._string=t,this.label.updateRenderData(!0),cce.Engine.repaintInEditMode(),this.label._string=e}},o(e,[{key:"string",get:function(){var t;return(null==(t=this.label)?void 0:t.string)||""}}]),e}(a)).prototype,"string",[h],Object.getOwnPropertyDescriptor(g.prototype,"string"),g.prototype),f=g))||f)||f)||f)||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n-manager.ts","./l10n-component.ts"],(function(t){var e,n,o,r,i,c,l,u,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass},function(t){c=t.cclegacy,l=t._decorator,u=t.CCInteger},function(t){a=t.default},function(t){s=t.default}],execute:function(){var p,y,f,d,b,h,v,_,g,k,L;c._RF.push({},"30d83qzRfZHLYMFn4KA9PG4","l10n-label",void 0);var m=l.ccclass,z=l.property,w=l.executeInEditMode,D=l.menu;t("default",(p=m("L10nLabel"),y=w(!0),f=D("LocalizationEditor/L10nLabel"),d=z({visible:!1}),b=z({visible:!0}),h=z({visible:!1}),v=z({type:u,visible:!0}),p(_=y(_=f((k=e((g=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i))||this,o(e,"_key",k,r(e)),o(e,"_count",L,r(e)),e}n(e,t);var c=e.prototype;return c.onLoad=function(){"function"==typeof t.prototype.onLoad&&t.prototype.onLoad.call(this)},c.render=function(){var t=a.t(this._key,{count:this._count});void 0!==this.label&&void 0!==t&&(this.label.string=t)},i(e,[{key:"key",get:function(){return this._key},set:function(t){this._key=t,this.render()}},{key:"count",get:function(){return this._count},set:function(t){this._count=t,this.render()}}]),e}(s)).prototype,"_key",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(g.prototype,"key",[b],Object.getOwnPropertyDescriptor(g.prototype,"key"),g.prototype),L=e(g.prototype,"_count",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(g.prototype,"count",[v],Object.getOwnPropertyDescriptor(g.prototype,"count"),g.prototype),_=g))||_)||_)||_));c._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-listen-event.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"34153BqzJ9LR4lhJDevpA4f","l10n-listen-event",void 0);var t=e("default",function(e){return e.languageChanged="languageChanged",e.onMissingKey="missingKey",e}(t||{}));n._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./i18next.js","./resource-data-manager.ts","./localization-global.ts"],(function(e){var t,n,r,a,i,l,s,u,o,c,g;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,r=e.regeneratorRuntime,a=e.extends},function(e){i=e.cclegacy,l=e.assetManager,s=e.game},function(e){u=e.createInstance},function(e){o=e.default},function(e){c=e.mainName,g=e.pluginName}],execute:function(){var h;i._RF.push({},"2856a7GSV9Fbb53nOimJ33J","l10n-manager",void 0);var f=e("L10nManager",function(){function e(){this._intl=void 0,this._options={},this.resourceList=void 0,this.resourceBundle={},this.resourceDataManager=void 0,this.resourceDataManager=new o}var i=e.prototype;return i.isInitialized=function(){var e,t;return null!=(e=null==(t=this._intl)?void 0:t.isInitialized)&&e},i.createIntl=function(){var t=n(r().mark((function t(n){var i,l,s,o,c,g,h,f,v,_;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reloadResourceData();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return this._options=n,this._intl=u(),c=void 0,c=localStorage.getItem(null!=(g=d._options.localStorageLanguageKey)?g:e.LOCAL_STORAGE_LANGUAGE_KEY),c=this.checkLanguage(c),h=null!=(i=null!=(l=c)?l:n.language)?i:this.resourceList.defaultLanguage,f=null!=(s=n.fallbackLanguage)?s:this.resourceList.fallbackLanguage,v=null!=(o=n.resources)?o:this.resourceBundle,_={lng:h,fallbackLng:f,resources:a({},v),ns:e.ALLOW_NAMESPACE,defaultNS:e.DEFAULT_NAMESPACE,initImmediate:!1,load:"currentOnly"},t.next=15,this._intl.init(_);case 15:this.setAssetOverrideMap(v[h][e.ASSET_NAMESPACE]);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.checkLanguage=function(e){if(e&&0!==e.length&&"null"!==e&&null!==e&&"undefined"!==e&&void 0!==e)return this.resourceList&&this.resourceList.languages.length>0&&this.resourceList.languages.find((function(t){return t===e}))?e:void 0},i.cloneIntl=function(e){if(!this._intl)throw new Error("i18next not init, please use 'l10n.createIntl'");this._intl=this._intl.cloneInstance(e)},i.reloadResourceData=function(){var e=n(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resourceDataManager.readResourceList();case 2:if(this.resourceList=e.sent,this.resourceList){e.next=6;break}return console.log("["+g+"] not found translate language list, skip init l10n"),e.abrupt("return",!1);case 6:return e.next=8,this.resourceDataManager.readResourceBundle(null!=(t=null==(n=this.resourceList)?void 0:n.languages)?t:[]);case 8:if(this.resourceBundle=e.sent,null!=(a=this.resourceList)&&a.defaultLanguage){e.next=12;break}return console.log("["+g+"] not found translate language data, skip init l10n"),e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.config=function(e){this.cloneIntl(e)},i.changeLanguage=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return console.warn("["+g+"] invalid language tag"),t.abrupt("return");case 3:if(console.log("["+g+"] will change language to",n),!this._intl){t.next=12;break}return this.currentLanguage&&this.releaseOverrideMap(this.resourceBundle[this.currentLanguage][e.ASSET_NAMESPACE]),t.next=8,this._intl.changeLanguage(n);case 8:this.setAssetOverrideMap(this.resourceBundle[n][e.ASSET_NAMESPACE]),localStorage.setItem(e.LOCAL_STORAGE_LANGUAGE_KEY,n),console.log("["+g+"] game will restart"),s.restart(),t.next=13;break;case 12:console.log("["+g+"] language data not load, please confirm whether the language data is included in the build");case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.t=function(e,t){var n,r;return null!=(n=null==(r=this._intl)?void 0:r.isInitialized)&&n?this._intl.t(e,t):e},i.tn=function(e,t){var n,r,a;if(null==(n=null==(r=this._intl)?void 0:r.isInitialized)||!n)return e.toString();var i={};Object.assign(i,t);for(var l=0,s=Object.keys(i);l<s.length;l++){var u=s[l];("string"==typeof i[u]&&0===i[u].length||"number"==typeof i[u]&&0===i[u])&&delete i[u]}return new Intl.NumberFormat(null==(a=this._intl)?void 0:a.language,i).format(e)},i.td=function(e,t){var n,r,a;if(null==(n=null==(r=this._intl)?void 0:r.isInitialized)||!n)return e.toString();var i={};Object.assign(i,t);for(var l=0,s=Object.keys(i);l<s.length;l++){var u=s[l];"string"==typeof i[u]&&0===i[u].length&&delete i[u]}return new Intl.DateTimeFormat(null==(a=this._intl)?void 0:a.language,i).format(e)},i.tt=function(e,t,n){var r,a,i;if(null==(r=null==(a=this._intl)?void 0:a.isInitialized)||!r)return e.toString();var l={};Object.assign(l,n);for(var s=0,u=Object.keys(l);s<u.length;s++){var o=u[s];"string"==typeof l[o]&&0===l[o].length&&delete l[o]}return new Intl.RelativeTimeFormat(null==(i=this._intl)?void 0:i.language,l).format(e,t)},i.tl=function(e){var t,n,r;return null!=(t=null==(n=this._intl)?void 0:n.isInitialized)&&t?new Intl.ListFormat(null==(r=this._intl)?void 0:r.language).format(e):e.toString()},i.exists=function(e){var t,n;return null!=(t=null==(n=this._intl)?void 0:n.exists(e))&&t},i.direction=function(e){return(e?new Intl.Locale(e):new Intl.Locale(this._intl.language)).textInfo().direction},i.on=function(e,t){var n;null==(n=this._intl)||n.on(e,t)},i.off=function(e,t){var n;null==(n=this._intl)||n.off(e,t)},i.getResourceBundle=function(e,t){var n;return null==(n=this._intl)?void 0:n.getResourceBundle(e,t)},i.setAssetOverrideMap=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];l.assetsOverrideMap.set(r,e[r])}},i.releaseOverrideMap=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];l.assetsOverrideMap.delete(r)}},t(e,[{key:"currentLanguage",get:function(){var e,t;return null!=(e=null==(t=this._intl)?void 0:t.language)?e:""}},{key:"languages",get:function(){var e,t;return null!=(e=null==(t=this.resourceList)?void 0:t.languages)?e:[]}}]),e}());h=f,f.LOCAL_STORAGE_LANGUAGE_KEY=c+"/language",f.DEFAULT_NAMESPACE="translation",f.ASSET_NAMESPACE="asset",f.ALLOW_NAMESPACE=[h.DEFAULT_NAMESPACE,h.ASSET_NAMESPACE],f.l10n=new h;var d=e("default",f.l10n);i._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-options.ts",["cc"],(function(){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"b4618IbsRtLLbRp2dQrE3EI","l10n-options",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/l10n.ts",["cc","./l10n-manager.ts","./l10n-listen-event.ts","./l10n-label.ts"],(function(n){var t;return{setters:[function(n){t=n.cclegacy},function(t){var e={};e.L10nManager=t.L10nManager,e.l10n=t.default,n(e)},function(t){n("L10nListenEvent",t.default)},function(t){n("L10nLabel",t.default)}],execute:function(){t._RF.push({},"07b54nOFPVJZJ/ENmuVbfjY","l10n",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Levels.ts",["cc","./Constant.ts","./Random.ts","./Utils.ts","./LogicData.ts"],(function(e){var T,n,t,p,a;return{setters:[function(e){T=e.cclegacy},function(e){n=e.ScreenOrientation},function(e){t=e.default},function(e){p=e.default},function(e){a=e.GlobalGame}],execute:function(){T._RF.push({},"6321c5rmwZPBbrNrrCII4Gd","Levels",void 0);e("GetLevel",(function(e){var T=e,n=y[T];if(0==e)return n;n||(n=s(T),y[T]=n);var t,p=n.Radius,a=n.Step,m=n.DampTime,o=n.DwCount,u=35,d=20,R=!1;return u=35+T,d=Math.floor(u/2),T%5==0?(R=!0,u*=.8,d+=Math.floor(.3*d)):d=Math.min(d,65),t=i(T),u=Math.min(u,100),d=Math.min(d,80),{Level:n.Level,Count:u,Time:n.Time,DampTime:m,TypeRands:d,Types:n.Types,Step:a,Radius:p,Hard:R,DwCount:o,Velocity:n.Velocity,FreeProp:t}}));var i=function(e){if(e%5==0){var T=Math.floor(e/5);return{back:Math.min(9,Math.ceil(T/2)),clear:Math.min(3,Math.ceil(T/4)),shuffle:Math.min(3,Math.ceil(T/6)),turn:Math.min(3,Math.ceil(T/8))}}},s=(e("GetLevel2",(function(e){var T=e,p=y[T];return p||(p=s(T),y[T]=p),p.Velocity||(p.Velocity=t.instance.randomSystemRangeInt(u.Min,u.Max)),e>0&&(void 0===p.LandscapeCount&&(p.LandscapeCount=p.Count+Math.min(T,10)),void 0===p.PortraitCount&&(p.PortraitCount=p.Count),a.orientation==n.HORIZONTAL?p.Count=p.LandscapeCount:p.Count=p.PortraitCount),p})),function(e){var T=[600,660,720,780,840,900][t.instance.pseudoInt(0,6)];return{Level:e,Count:100+t.instance.pseudoInt(0,10),Time:T,DampTime:t.instance.pseudoInt(0,3),TypeRands:t.instance.pseudoInt(75,81),Types:[],Step:p.getRandomObj(m),Radius:p.getRandomObj(o)}}),m=e("LevelStep",{Slow:5,Default:15,Rice1:45,Rice2:60,Svastika:75,Vertical:90,Three1:115,Three2:125,Confused:150,One1:170,One2:175,Horizontal:180,One3:185,One4:190}),o=e("LevelRadius",{Default:3,Zero:0,One:1,Two:2}),u=e("LevelVelocity",{Min:15,Max:35,Default:30}),y=e("Levels",[{Level:0,Count:3,Time:300,DampTime:2,TypeRands:3,Types:["s1","t1","w1","fa","zhong"]},{Level:1,Count:35,Time:600,DampTime:2,TypeRands:22,Types:[],Step:m.Confused,Radius:o.Zero,DwCount:2},{Level:2,Count:40,Time:720,DampTime:1,TypeRands:24,Types:[],Step:m.Default,Radius:o.Two,DwCount:4},{Level:3,Count:45,Time:600,DampTime:2,TypeRands:26,Types:[],Step:m.Three1,Radius:o.Zero,DwCount:5},{Level:4,Count:50,Time:600,DampTime:1,TypeRands:28,Types:[],Step:m.One1,DwCount:6},{Level:5,Count:50,Time:720,DampTime:1,TypeRands:30,Types:[],Step:m.Three2,Radius:o.Two,DwCount:7},{Level:6,Count:50,Time:600,DampTime:0,TypeRands:30,Types:[],Step:m.Vertical,Radius:o.Zero,DwCount:7},{Level:7,Count:55,Time:600,DampTime:2,TypeRands:32,Types:[],Step:m.Svastika,Radius:o.One,DwCount:8},{Level:8,Count:55,Time:720,DampTime:0,TypeRands:34,Types:[],Step:m.Slow,Radius:o.Two,DwCount:9},{Level:9,Count:60,Time:600,DampTime:1,TypeRands:36,Types:[],Step:m.Rice1,Radius:o.Zero,DwCount:10},{Level:10,Count:60,Time:720,DampTime:0,TypeRands:38,Types:[],Step:m.One4,DwCount:10},{Level:11,Count:65,Time:600,DampTime:2,TypeRands:39,Types:[],Step:m.Horizontal,Radius:o.One,DwCount:11},{Level:12,Count:65,Time:720,DampTime:0,TypeRands:40,Types:[],Step:m.One2,Radius:o.Zero,DwCount:12},{Level:13,Count:70,Time:600,DampTime:1,TypeRands:41,Types:[],Step:m.Rice1,DwCount:13},{Level:14,Count:70,Time:720,DampTime:0,TypeRands:42,Types:[],Step:m.One3,Radius:o.Zero,DwCount:14},{Level:15,Count:75,Time:600,DampTime:2,TypeRands:43,Types:[],Step:m.Slow,DwCount:15},{Level:16,Count:75,Time:720,DampTime:0,TypeRands:44,Types:[],Step:m.Three1,DwCount:16},{Level:17,Count:80,Time:600,DampTime:2,TypeRands:45,Types:[],Step:m.Confused,Radius:o.Two,DwCount:16},{Level:18,Count:80,Time:720,DampTime:0,TypeRands:46,Types:[],Step:m.Default,DwCount:17},{Level:19,Count:85,Time:600,DampTime:1,TypeRands:47,Types:[],Step:m.One2,Radius:o.Zero,DwCount:18},{Level:20,Count:85,Time:660,DampTime:1,TypeRands:48,Types:[],Step:m.Svastika,Radius:o.Zero,DwCount:19},{Level:21,Count:90,Time:600,DampTime:2,TypeRands:49,Types:[],Step:m.Default,DwCount:20},{Level:22,Count:90,Time:720,DampTime:0,TypeRands:50,Types:[],Step:m.Vertical,Radius:o.Zero},{Level:23,Count:95,Time:600,DampTime:2,TypeRands:51,Types:[],Step:m.Horizontal},{Level:24,Count:95,Time:660,DampTime:0,TypeRands:52,Types:[],Step:m.Three1,Radius:o.Zero},{Level:25,Count:100,Time:660,DampTime:1,TypeRands:53,Types:[],Step:m.One2,Radius:o.Two},{Level:26,Count:100,Time:720,DampTime:0,TypeRands:54,Types:[],Step:m.Three2},{Level:27,Count:100,Time:660,DampTime:1,TypeRands:55,Types:[],Step:m.Rice1,Radius:o.Zero},{Level:28,Count:100,Time:720,DampTime:2,TypeRands:56,Types:[],Step:m.Slow,Radius:o.Zero},{Level:29,Count:100,Time:660,DampTime:1,TypeRands:57,Types:[],Step:m.One4,Radius:o.Zero},{Level:30,Count:100,Time:720,DampTime:0,TypeRands:58,Types:[],Step:m.One3,Radius:o.Zero},{Level:31,Count:100,Time:600,DampTime:2,TypeRands:59,Types:[],Step:m.Confused},{Level:32,Count:100,Time:720,DampTime:0,TypeRands:60,Types:[],Step:m.Vertical,Radius:o.Two},{Level:33,Count:100,Time:720,DampTime:0,TypeRands:61,Types:[],Step:m.One1},{Level:34,Count:100,Time:720,DampTime:1,TypeRands:62,Types:[],Step:m.Three2},{Level:35,Count:100,Time:600,DampTime:2,TypeRands:63,Types:[],Step:m.Three1,Radius:o.Zero},{Level:36,Count:100,Time:720,DampTime:0,TypeRands:64,Types:[],Step:m.One3,Radius:o.One},{Level:37,Count:100,Time:600,DampTime:2,TypeRands:65,Types:[],Radius:o.Zero},{Level:38,Count:100,Time:720,DampTime:0,TypeRands:66,Types:[],Step:m.Rice2,Radius:o.Zero},{Level:39,Count:100,Time:600,DampTime:2,TypeRands:67,Types:[],Step:m.Slow},{Level:40,Count:100,Time:660,DampTime:1,TypeRands:68,Types:[],Step:m.One2,Radius:o.Zero},{Level:41,Count:100,Time:600,DampTime:2,TypeRands:69,Types:[],Step:m.Three2},{Level:42,Count:100,Time:660,DampTime:1,TypeRands:70,Types:[],Step:m.Default},{Level:43,Count:100,Time:600,DampTime:1,TypeRands:71,Types:[],Step:m.Rice1,Radius:o.Zero},{Level:44,Count:100,Time:720,DampTime:0,TypeRands:72,Types:[],Step:m.Svastika,Radius:o.Zero},{Level:45,Count:100,Time:600,DampTime:2,TypeRands:73,Types:[],Step:m.Slow},{Level:46,Count:100,Time:660,DampTime:1,TypeRands:74,Types:[],Step:m.Confused,Radius:o.Zero},{Level:47,Count:100,Time:720,DampTime:0,TypeRands:75,Types:[],Step:m.Three1,Radius:o.Two},{Level:48,Count:100,Time:600,DampTime:2,TypeRands:76,Types:[],Step:m.One2,Radius:o.One},{Level:49,Count:100,Time:660,DampTime:1,TypeRands:77,Types:[],Step:m.Confused,Radius:o.Two},{Level:50,Count:100,Time:600,DampTime:2,TypeRands:78,Types:[],Step:m.One3,Radius:o.Zero},{Level:51,Count:100,Time:660,DampTime:1,TypeRands:79,Types:[],Step:m.Three1,Radius:o.Zero},{Level:52,Count:100,Time:720,DampTime:0,TypeRands:80,Types:[],Step:m.Vertical},{Level:53,Count:100,Time:600,DampTime:0,TypeRands:80,Types:[],Step:m.Svastika,Radius:o.Zero}]);T._RF.pop()}}}));

System.register("chunks:///_virtual/LevelsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./ListItem.ts","./List.ts","./LogicAudio.ts","./LogicData.ts","./Ad.ts","./LogicScene.ts","./Levels.ts","./PopupManager.ts"],(function(t){var e,i,o,n,s,a,l,r,c,u,p,h,d,f,v,L,g,m,y,w,O;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,l=t.Label,r=t.color,c=t.v3,u=t.Tween,p=t.UIOpacity,h=t.tween},function(t){d=t.default},function(t){f=t.default},function(t){v=t.default},function(t){L=t.default},function(t){g=t.default},function(t){m=t.Ad},function(t){y=t.default},function(t){w=t.GetLevel},function(t){O=t.default}],execute:function(){var b,S,x,C,P,_,G;s._RF.push({},"bb0bdWsRkFIIYygK6LS49RO","LevelsPopup",void 0);var k=a.ccclass,I=a.property;t("LevelsPopup",(b=k("LevelsPopup"),S=I(v),x=I(l),b((_=e((P=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(e,"listG",_,n(e)),o(e,"info",G,n(e)),e.data=[],e.maxLevel=0,e.toScrollLevel=0,e.row=3,e._color=r(255,255,255,255),e.showAnimation=function(t,e,i){t.set({scale:c(1,1,0)}),t.to(i,{scale:c(1,1,1)},{easing:"sineOut",onUpdate:function(t,i){e.opacity=255*Math.min(1.4*i,1)}})},e.hideAnimation=function(t,e,i){t.set({scale:c(1,1,1)}),e.opacity=0},e.isShowCurrent=!1,e}i(e,t);var s=e.prototype;return s.__preload=function(){this.maxLevel=g.maxLevel(),this.toScrollLevel=this.maxLevel},s.init=function(t){this.data=[];var e=this.maxLevel+50;e+=this.row-e%this.row;for(var i=0;i<e;i++)this.data.push(i);this.listG.numItems=this.data.length,this.listG.scrollTo(this.toScrollLevel,.5,.4)},s.showCurrent=function(t){if(!this.isShowCurrent){this.isShowCurrent=!0,u.stopAllByTag(913854);var e=t.getComponentsInChildren(p);h(e[0].node).tag(913854).to(1.5,{scale:c(1.45,1.45,1.45)},{easing:"quadOut",onUpdate:function(t,i){e[0].opacity=255*(1-i)}}).set({scale:c(1,1,1)}).delay(.5).union().repeatForever().start(),h(e[1].node).tag(913854).delay(.5).to(1.5,{scale:c(1.45,1.45,1.45)},{easing:"quadOut",onUpdate:function(t,i){e[1].opacity=255*(1-i)}}).set({scale:c(1,1,1)}).union().repeatForever().start()}},s.onListGridRender=function(t,e){var i=t.getComponent(f),o=this.data[e];i.lock.active=this.maxLevel<o,i.title.node.active=!i.lock.active,i.lock.active||(i.title.string=o+1+""),i.lock.active?this._color.set(115,48,16,255):this._color.set(255,255,255,255),i.hard.color=this._color;var n=w(o);i.hard.node.active=n.Hard||!1,n.Hard&&(i.lock.active=!1,i.title.node.active=!1),i.current.active=o==this.maxLevel,o==this.maxLevel&&this.showCurrent(i.current),this.info.string="ListG当前渲染总数 = "+this.listG.displayItemNum},s.onListSelected=function(t,e,i,o){if(t)if(this.maxLevel<e){var n=t.getChildByName("content");h(n).to(.05,{position:c(-5,5,0)},{easing:"sineOut"}).to(.05,{position:c(5,-5,0)},{easing:"sineOut"}).to(.05,{position:c(-5,5,0)},{easing:"sineOut"}).to(.05,{position:c(5,-5,0)},{easing:"sineOut"}).to(.05,{position:c(-5,5,0)},{easing:"sineOut"}).to(.05,{position:c(5,-5,0)},{easing:"sineOut"}).to(.05,{position:c(0,0,0)},{easing:"sineOut"}).start()}else L.playClick(),g.isHpEmpty?O.show("prefabs/popup/PopupPropOne",{id:"hp"},{immediately:!0}):(g.setLevel(e),m.instance.showFullScreen(),y.instance.toGame())},e}(d)).prototype,"listG",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(P.prototype,"info",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=P))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./ListItem.ts"],(function(t){var e,i,s,o,n,a,l,r,c,h,_,d,u,m,p,g,f,v,I,y,T,S,w,z,D,N,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,l=t._decorator,r=t.ScrollView,c=t.Enum,h=t.Node,_=t.Prefab,d=t.CCFloat,u=t.EventHandler,m=t.CCBoolean,p=t.CCInteger,g=t.isValid,f=t.UITransform,v=t.Layout,I=t.instantiate,y=t.NodePool,T=t.Vec3,S=t.Size,w=t.Widget,z=t.tween,D=t.Component},function(t){N=t.DEV},function(t){b=t.default}],execute:function(){var E,P,L,G,C,O,R,A,U,B,k,M,x,V,F,H,X,Y,Z,W,j,q,K,J,Q,$,tt,et,it,st,ot,nt,at,lt,rt,ct,ht,_t,dt,ut,mt,pt,gt;a._RF.push({},"505a4bLXEFLo5kzKCT1yErn","List",void 0);var ft=l.ccclass,vt=l.property,It=l.disallowMultiple,yt=l.menu,Tt=l.executionOrder,St=l.requireComponent,wt=function(t){return t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB",t}(wt||{}),zt=function(t){return t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE",t}(zt||{}),Dt=function(t){return t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT",t}(Dt||{});t("default",(E=It(),P=yt("App/List"),L=St(r),G=Tt(-5e3),C=vt({type:c(wt),tooltip:""}),O=vt({type:h,tooltip:"",visible:function(){return this.templateType==wt.NODE}}),R=vt({type:_,tooltip:N,visible:function(){return this.templateType==wt.PREFAB}}),A=vt({}),U=vt({type:c(zt),tooltip:N}),B=vt({type:d,range:[0,1,.1],tooltip:N,slide:!0,visible:function(){return this._slideMode==zt.PAGE}}),k=vt({type:u,tooltip:N,visible:function(){return this._slideMode==zt.PAGE}}),M=vt({}),x=vt({type:m,tooltip:N}),V=vt({tooltip:N,visible:function(){var t=this.slideMode==zt.NORMAL;return t||(this.cyclic=!1),t}}),F=vt({tooltip:N,visible:function(){return this.virtual}}),H=vt({tooltip:N,visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}}),X=vt({type:p}),Y=vt({type:p,range:[0,6,1],tooltip:N,slide:!0}),Z=vt({type:p,range:[0,12,1],tooltip:N,slide:!0}),W=vt({type:u,tooltip:N}),j=vt({type:c(Dt),tooltip:N}),q=vt({type:u,tooltip:N,visible:function(){return this.selectedMode>Dt.NONE}}),K=vt({tooltip:N,visible:function(){return this.selectedMode==Dt.SINGLE}}),J=vt({serializable:!1}),ft(Q=E(Q=P(Q=L(Q=G((tt=e(($=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,s(e,"templateType",tt,o(e)),s(e,"tmpNode",et,o(e)),s(e,"tmpPrefab",it,o(e)),s(e,"_slideMode",st,o(e)),s(e,"pageDistance",ot,o(e)),s(e,"pageChangeEvent",nt,o(e)),s(e,"_virtual",at,o(e)),s(e,"cyclic",lt,o(e)),s(e,"lackCenter",rt,o(e)),s(e,"lackSlide",ct,o(e)),s(e,"_updateRate",ht,o(e)),s(e,"frameByFrameRenderNum",_t,o(e)),s(e,"renderEvent",dt,o(e)),s(e,"selectedMode",ut,o(e)),s(e,"selectedEvent",mt,o(e)),s(e,"repeatEventSingle",pt,o(e)),e._selectedId=-1,e._lastSelectedId=void 0,e.multSelected=void 0,e._forceUpdate=!1,e._align=void 0,e._horizontalDir=void 0,e._verticalDir=void 0,e._startAxis=void 0,e._alignCalcType=void 0,e.content=void 0,e._contentUt=void 0,e.firstListId=void 0,e.displayItemNum=void 0,e._updateDone=!0,e._updateCounter=void 0,e._actualNumItems=void 0,e._cyclicNum=void 0,e._cyclicPos1=void 0,e._cyclicPos2=void 0,s(e,"_numItems",gt,o(e)),e._inited=!1,e._scrollView=void 0,e._layout=void 0,e._resizeMode=void 0,e._topGap=void 0,e._rightGap=void 0,e._bottomGap=void 0,e._leftGap=void 0,e._columnGap=void 0,e._lineGap=void 0,e._colLineNum=void 0,e._lastDisplayData=void 0,e.displayData=void 0,e._pool=void 0,e._itemTmp=void 0,e._itemTmpUt=void 0,e._needUpdateWidget=!1,e._itemSize=void 0,e._sizeType=void 0,e._customSize=void 0,e.frameCount=void 0,e._aniDelRuning=!1,e._aniDelCB=void 0,e._aniDelItem=void 0,e._aniDelBeforePos=void 0,e._aniDelBeforeScale=void 0,e.viewTop=void 0,e.viewRight=void 0,e.viewBottom=void 0,e.viewLeft=void 0,e._doneAfterUpdate=!1,e.elasticTop=void 0,e.elasticRight=void 0,e.elasticBottom=void 0,e.elasticLeft=void 0,e.scrollToListId=void 0,e.adhering=!1,e._adheringBarrier=!1,e.nearestListId=void 0,e.curPageNum=0,e._beganPos=void 0,e._scrollPos=void 0,e._curScrollIsTouch=void 0,e._scrollToListId=void 0,e._scrollToEndTime=void 0,e._scrollToSo=void 0,e._lack=void 0,e._allItemSize=void 0,e._allItemSizeNoEdge=void 0,e._scrollItem=void 0,e._thisNodeUt=void 0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this._init()},a.onDestroy=function(){var t=this;g(t._itemTmp)&&t._itemTmp.destroy(),g(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()},a.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},a.onDisable=function(){this._unregisterEvent()},a._registerEvent=function(){var t=this;t.node.on(h.EventType.TOUCH_START,t._onTouchStart,t),t.node.on("touch-up",t._onTouchUp,t),t.node.on(h.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.on("scroll-began",t._onScrollBegan,t),t.node.on("scroll-ended",t._onScrollEnded,t),t.node.on("scrolling",t._onScrolling,t),t.node.on(h.EventType.SIZE_CHANGED,t._onSizeChanged,t)},a._unregisterEvent=function(){var t=this;t.node.off(h.EventType.TOUCH_START,t._onTouchStart,t),t.node.off("touch-up",t._onTouchUp,t),t.node.off(h.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.off("scroll-began",t._onScrollBegan,t),t.node.off("scroll-ended",t._onScrollEnded,t),t.node.off("scrolling",t._onScrolling,t),t.node.off(h.EventType.SIZE_CHANGED,t._onSizeChanged,t)},a._init=function(){var t=this;if(!t._inited)if(t._thisNodeUt=t.node.getComponent(f),t._scrollView=t.node.getComponent(r),t.content=t._scrollView.content,t._contentUt=t.content.getComponent(f),t.content){switch(t._layout=t.content.getComponent(v),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(I(t.templateType==wt.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=zt.ADHERING&&t._slideMode!=zt.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new y,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case v.Type.HORIZONTAL:switch(t._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case v.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case v.Type.VERTICAL:switch(t._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case v.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case v.Type.GRID:switch(t._startAxis){case v.AxisDirection.HORIZONTAL:switch(t._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case v.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case v.AxisDirection.VERTICAL:switch(t._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case v.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else console.error(t.node.name+"'s ScrollView unset content!")},a._processAutoScrolling=function(t){var e=1e-4,i=new T,s=this._scrollView,o=s._isNecessaryAutoScrollBrake(),n=o?.05:1;s._autoScrollAccumulatedTime+=t*(1/n);var a,l=Math.min(1,s._autoScrollAccumulatedTime/s._autoScrollTotalTime);s._autoScrollAttenuate&&(a=l,l=(a-=1)*a*a*a*a+1);var c=s._autoScrollTargetDelta.clone();c.multiplyScalar(l);var h=s._autoScrollStartPosition.clone();h.add(c);var _=Math.abs(l-1)<=e;if(Math.abs(l-1)<=s.getScrollEndedEventTiming()&&!s._isScrollEndedWithThresholdEventFired&&(s._dispatchEvent(r.EventType.SCROLL_ENG_WITH_THRESHOLD),s._isScrollEndedWithThresholdEventFired=!0),s.elastic){var d=h.clone();d.subtract(s._autoScrollBrakingStartPosition),o&&d.multiplyScalar(n),h.set(s._autoScrollBrakingStartPosition),h.add(d)}else{var u=h.clone();u.subtract(s._getContentPosition());var m=s._getHowMuchOutOfBoundary(u);m.equals(i,e)||(h.add(m),_=!0)}_&&(s._autoScrolling=!1);var p=new T(h);p.subtract(s._getContentPosition()),s._clampDelta(p),s._moveContent(p,_),s._dispatchEvent(r.EventType.SCROLLING),s._autoScrolling||(s._isBouncing=!1,s._scrolling=!1,s._dispatchEvent(r.EventType.SCROLL_ENDED))},a.setTemplateItem=function(t){if(t){var e=this;if(e._itemTmp=t,e._itemTmpUt=t.getComponent(f),e._resizeMode==v.ResizeMode.CHILDREN)e._itemSize=e._layout.cellSize;else{var i=t.getComponent(f);e._itemSize=new S(i.width,i.height)}var s=t.getComponent(b),o=!1;switch(s||(o=!0),o&&(e.selectedMode=Dt.NONE),(s=t.getComponent(w))&&s.enabled&&(e._needUpdateWidget=!0),e.selectedMode==Dt.MULT&&(e.multSelected=[]),e._align){case v.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case v.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case v.Type.GRID:switch(e._startAxis){case v.AxisDirection.HORIZONTAL:var n=e._contentUt.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((n+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case v.AxisDirection.VERTICAL:var a=e._contentUt.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((a+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},a.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&console.error("List initialization not completed!"),!1)},a._resizeContent=function(){var t,e=this;switch(e._align){case v.Type.HORIZONTAL:if(e._customSize){var i=e._getFixedSize(null);t=e._leftGap+i.val+e._itemSize.width*(e._numItems-i.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case v.Type.VERTICAL:if(e._customSize){var s=e._getFixedSize(null);t=e._topGap+s.val+e._itemSize.height*(e._numItems-s.count)+e._lineGap*(e._numItems-1)+e._bottomGap}else t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case v.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case v.AxisDirection.HORIZONTAL:var o=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*o+e._lineGap*(o-1)+e._bottomGap;break;case v.AxisDirection.VERTICAL:var n=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*n+e._columnGap*(n-1)+e._rightGap}}var a=e.content.getComponent(v);if(a&&(a.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var l=e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width;e._cyclicPos1=0,l-=e._cyclicPos1,e._cyclicNum=Math.ceil(l/e._allItemSizeNoEdge)+1;var r=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+r,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+r*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=r*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width);var c=e._lack&&e.lackCenter||!e.lackSlide?.1:0,h=e._lack?(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width)-c:e.cyclic?e._cyclicAllItemSize:e._allItemSize;h<0&&(h=0),e._sizeType?e._contentUt.height=h:e._contentUt.width=h},a._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),s=this._sizeType?new T(0,i,0):new T(i,0,0),o=this.content.getPosition();switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(o.set(-this._cyclicPos2,o.y,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(s))):e<-this._cyclicPos2&&(o.set(-this._cyclicPos1,o.y,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(s)));break;case 2:e<this._cyclicPos1?(o.set(this._cyclicPos2,o.y,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(s))):e>this._cyclicPos2&&(o.set(this._cyclicPos1,o.y,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(s)));break;case 3:e<this._cyclicPos1?(o.set(o.x,this._cyclicPos2,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(s))):e>this._cyclicPos2&&(o.set(o.x,this._cyclicPos1,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(s)));break;case 4:e>-this._cyclicPos1?(o.set(o.x,-this._cyclicPos2,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(s))):e<-this._cyclicPos2&&(o.set(o.x,-this._cyclicPos1,o.z),this.content.setPosition(o),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(s)))}}var n,a,l,r;if(this._calcViewPos(),this._sizeType?(n=this.viewTop,l=this.viewBottom):(a=this.viewRight,r=this.viewLeft),this._virtual){var c;this.displayData=[];var h=0,_=this._numItems-1;if(this._customSize)for(var d=!1;h<=_&&!d;h++)switch(c=this._calcItemPos(h),this._align){case v.Type.HORIZONTAL:c.right>=r&&c.left<=a?this.displayData.push(c):0!=h&&this.displayData.length>0&&(d=!0);break;case v.Type.VERTICAL:c.bottom<=n&&c.top>=l?this.displayData.push(c):0!=h&&this.displayData.length>0&&(d=!0);break;case v.Type.GRID:switch(this._startAxis){case v.AxisDirection.HORIZONTAL:c.bottom<=n&&c.top>=l?this.displayData.push(c):0!=h&&this.displayData.length>0&&(d=!0);break;case v.AxisDirection.VERTICAL:c.right>=r&&c.left<=a?this.displayData.push(c):0!=h&&this.displayData.length>0&&(d=!0)}}else{var u=this._itemSize.width+this._columnGap,m=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:h=(r-this._leftGap)/u,_=(a-this._leftGap)/u;break;case 2:h=(-a-this._rightGap)/u,_=(-r-this._rightGap)/u;break;case 3:h=(-n-this._topGap)/m,_=(-l-this._topGap)/m;break;case 4:h=(l-this._bottomGap)/m,_=(n-this._bottomGap)/m}for(h=Math.floor(h)*this._colLineNum,_=Math.ceil(_)*this._colLineNum,h<0&&(h=0),--_>=this._numItems&&(_=this._numItems-1);h<=_;h++)this.displayData.push(this._calcItemPos(h))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var p=this._lastDisplayData.length,g=this.displayItemNum!=p;if(g&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort((function(t,e){return t-e})),g=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[p-1]),this._forceUpdate||g)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var f=0;f<this.displayItemNum;f++)this._createOrUpdateItem(this.displayData[f]);this._forceUpdate=!1}this._calcNearestItem()}}},a._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this._thisNodeUt.width,this.elasticRight=this.viewRight>this._contentUt.width?Math.abs(this.viewRight-this._contentUt.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this._thisNodeUt.width,this.elasticLeft=this.viewLeft<-this._contentUt.width?Math.abs(this.viewLeft+this._contentUt.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this._thisNodeUt.height,this.elasticBottom=this.viewBottom<-this._contentUt.height?Math.abs(this.viewBottom+this._contentUt.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this._thisNodeUt.height,this.elasticTop=this.viewTop>this._contentUt.height?Math.abs(this.viewTop-this._contentUt.height):0,this.viewTop-=this.elasticTop}},a._calcItemPos=function(t){var e,i,s,o,n,a,l,r;switch(this._align){case v.Type.HORIZONTAL:switch(this._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var c=this._getFixedSize(t);n=this._leftGap+(this._itemSize.width+this._columnGap)*(t-c.count)+(c.val+this._columnGap*c.count);var h=this._customSize[t];e=h>0?h:this._itemSize.width}else n=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter)n-=this._leftGap,n+=this._contentUt.width/2-this._allItemSizeNoEdge/2;return{id:t,left:n,right:a=n+e,x:n+this._itemTmpUt.anchorX*e,y:this._itemTmp.y};case v.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){var _=this._getFixedSize(t);a=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-_.count)-(_.val+this._columnGap*_.count);var d=this._customSize[t];e=d>0?d:this._itemSize.width}else a=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter)a+=this._rightGap,a-=this._contentUt.width/2-this._allItemSizeNoEdge/2;return{id:t,right:a,left:n=a-e,x:n+this._itemTmpUt.anchorX*e,y:this._itemTmp.y}}break;case v.Type.VERTICAL:switch(this._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){var u=this._getFixedSize(t);s=-this._topGap-(this._itemSize.height+this._lineGap)*(t-u.count)-(u.val+this._lineGap*u.count);var m=this._customSize[t];i=m>0?m:this._itemSize.height}else s=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter)s+=this._topGap,s-=this._contentUt.height/2-this._allItemSizeNoEdge/2;return{id:t,top:s,bottom:o=s-i,x:this._itemTmp.x,y:o+this._itemTmpUt.anchorY*i};case v.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){var p=this._getFixedSize(t);o=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-p.count)+(p.val+this._lineGap*p.count);var g=this._customSize[t];i=g>0?g:this._itemSize.height}else o=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter)o-=this._bottomGap,o+=this._contentUt.height/2-this._allItemSizeNoEdge/2;return{id:t,top:s=o+i,bottom:o,x:this._itemTmp.x,y:o+this._itemTmpUt.anchorY*i}}case v.Type.GRID:var f=Math.floor(t/this._colLineNum);switch(this._startAxis){case v.AxisDirection.HORIZONTAL:switch(this._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:r=(o=(s=-this._topGap-(this._itemSize.height+this._lineGap)*f)-this._itemSize.height)+this._itemTmpUt.anchorY*this._itemSize.height;break;case v.VerticalDirection.BOTTOM_TO_TOP:s=(o=this._bottomGap+(this._itemSize.height+this._lineGap)*f)+this._itemSize.height,r=o+this._itemTmpUt.anchorY*this._itemSize.height}switch(l=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:l+=this._itemTmpUt.anchorX*this._itemSize.width,l-=this._contentUt.anchorX*this._contentUt.width;break;case v.HorizontalDirection.RIGHT_TO_LEFT:l+=(1-this._itemTmpUt.anchorX)*this._itemSize.width,l-=(1-this._contentUt.anchorX)*this._contentUt.width,l*=-1}return{id:t,top:s,bottom:o,x:l,y:r};case v.AxisDirection.VERTICAL:switch(this._horizontalDir){case v.HorizontalDirection.LEFT_TO_RIGHT:a=(n=this._leftGap+(this._itemSize.width+this._columnGap)*f)+this._itemSize.width,l=n+this._itemTmpUt.anchorX*this._itemSize.width,l-=this._contentUt.anchorX*this._contentUt.width;break;case v.HorizontalDirection.RIGHT_TO_LEFT:l=(n=(a=-this._rightGap-(this._itemSize.width+this._columnGap)*f)-this._itemSize.width)+this._itemTmpUt.anchorX*this._itemSize.width,l+=(1-this._contentUt.anchorX)*this._contentUt.width}switch(r=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case v.VerticalDirection.TOP_TO_BOTTOM:r-=(1-this._itemTmpUt.anchorY)*this._itemSize.height,r+=(1-this._contentUt.anchorY)*this._contentUt.height;break;case v.VerticalDirection.BOTTOM_TO_TOP:r-=this._itemTmpUt.anchorY*this._itemSize.height,r+=this._contentUt.anchorY*this._contentUt.height,r*=-1}return{id:t,left:n,right:a,x:l,y:r}}}},a._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var i=e.getComponent(f),s=e.getPosition(),o={id:t,x:s.x,y:s.y};return this._sizeType?(o.top=s.y+i.height*(1-i.anchorY),o.bottom=s.y-i.height*i.anchorY):(o.left=s.x-i.width*i.anchorX,o.right=s.x+i.width*(1-i.anchorX)),o},a.getItemPos=function(t){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},a._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,i=0;for(var s in this._customSize)parseInt(s)<t&&(e+=this._customSize[s],i++);return{val:e,count:i}},a._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},a._onScrollEnded=function(){var t=this;if(t._curScrollIsTouch=!1,null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&z(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=zt.ADHERING||t.adhering?t._slideMode==zt.PAGE&&(null!=t._beganPos&&t._curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()},a._onTouchStart=function(t,e){if(!this._scrollView._hasNestedViewGroup(t,e)&&(this._curScrollIsTouch=!0,!(t.eventPhase===Event.AT_TARGET&&t.target===this.node))){for(var i=t.target;null==i._listId&&i.parent;)i=i.parent;this._scrollItem=null!=i._listId?i:t.target}},a._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==zt.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==zt.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},a._onTouchCancelled=function(t,e){var i=this;i._scrollView._hasNestedViewGroup(t,e)||t.simulate||(i._scrollPos=null,i._slideMode==zt.ADHERING?(i.adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==zt.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)},a._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},a._onItemAdaptive=function(t){var e=t.getComponent(f);if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});var i=this._sizeType?e.height:e.width;this._customSize[t._listId]!=i&&(this._customSize[t._listId]=i,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},a._pageAdhere=function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,i=(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i){var s=.5;switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(s):t.nextPage(s);break;case 2:case 3:t._beganPos<e?t.prePage(s):t.nextPage(s)}}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},a.adhere=function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width);t.scrollTo(t.nearestListId,.7,e)}},a.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var i=this.displayData[e];i&&this._createOrUpdateItem(i)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==zt.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(var s=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,o=this._updateCounter;o<s;o++)this._createOrUpdateItem2(o);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==zt.PAGE&&(this.curPageNum=this.nearestListId)},a._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(new T(t.x,t.y,0)),this._resetItemSize(e),this.renderEvent&&u.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var i=this._pool.size()>0;if(e=i?this._pool.get():I(this._itemTmp),i&&g(e)||(e=I(this._itemTmp),i=!1),e._listId!=t.id)e._listId=t.id,e.getComponent(f).setContentSize(this._itemSize);if(e.setPosition(new T(t.x,t.y,0)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){var s=e.getComponent(w);s&&s.updateAlignment()}e.setSiblingIndex(this.content.children.length-1);var o=e.getComponent(b);e.listItem=o,o&&(o.listId=t.id,o.list=this,o._registerEvent()),this.renderEvent&&u.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},a._createOrUpdateItem2=function(t){var e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&u.emitEvents([this.renderEvent],i,t%this._actualNumItems)):((i=I(this._itemTmp))._listId=t,this.content.addChild(i),e=i.getComponent(b),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&u.emitEvents([this.renderEvent],i,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},a._updateListItem=function(t){if(t&&this.selectedMode>Dt.NONE){var e=t.node;switch(this.selectedMode){case Dt.SINGLE:t.selected=this.selectedId==e._listId;break;case Dt.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},a._resetItemSize=function(t){},a._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)},a.setMultSelected=function(t,e){var i=this;if(i.checkInited()){var s,o;if(Array.isArray(t)||(t=[t]),null==e)i.multSelected=t;else if(e)for(var n=t.length-1;n>=0;n--)s=t[n],(o=i.multSelected.indexOf(s))<0&&i.multSelected.push(s);else for(var a=t.length-1;a>=0;a--)s=t[a],(o=i.multSelected.indexOf(s))>=0&&i.multSelected.splice(o,1);i._forceUpdate=!0,i._onScrolling()}},a.getMultSelected=function(){return this.multSelected},a.hasMultSelected=function(t){return this.multSelected&&this.multSelected.indexOf(t)>=0},a.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var s=t[e],o=this.getItemByListId(s);o&&u.emitEvents([this.renderEvent],o,s%this._actualNumItems)}}},a.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},a.getItemByListId=function(t){if(this.content)for(var e=this.content.children.length-1;e>=0;e--){var i=this.content.children[e];if(i._listId==t)return i}},a._getOutsideItem=function(){for(var t,e=[],i=this.content.children.length-1;i>=0;i--)t=this.content.children[i],this.displayData.find((function(e){return e.id==t._listId}))||e.push(t);return e},a._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){i.isCached=!0,this._pool.put(i);for(var s=this._lastDisplayData.length-1;s>=0;s--)if(this._lastDisplayData[s]==i._listId){this._lastDisplayData.splice(s,1);break}}}else for(;this.content.children.length>this._numItems;)this._delSingleItem(this.content.children[this.content.children.length-1])},a._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},a.aniDelItem=function(t,e,i){var s=this;if(!s.checkInited()||s.cyclic||!s._virtual)return console.error("This function is not allowed to be called!");if(!e)return console.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(s._aniDelRuning)return console.warn("Please wait for the current deletion to finish!");var o,n=s.getItemByListId(t);if(n){o=n.getComponent(b),s._aniDelRuning=!0,s._aniDelCB=e,s._aniDelItem=n,s._aniDelBeforePos=n.position,s._aniDelBeforeScale=n.scale;var a=s.displayData[s.displayData.length-1].id,l=o.selected;o.showAni(i,(function(){var i;if(a<s._numItems-2&&(i=a+1),null!=i){var o=s._calcItemPos(i);s.displayData.push(o),s._virtual?s._createOrUpdateItem(o):s._createOrUpdateItem2(i)}else s._numItems--;if(s.selectedMode==Dt.SINGLE)l?s._selectedId=-1:s._selectedId-1>=0&&s._selectedId--;else if(s.selectedMode==Dt.MULT&&s.multSelected.length){var r=s.multSelected.indexOf(t);r>=0&&s.multSelected.splice(r,1);for(var c=s.multSelected.length-1;c>=0;c--){s.multSelected[c]>=t&&s.multSelected[c]--}}if(s._customSize){s._customSize[t]&&delete s._customSize[t];var h,_={};for(var d in s._customSize){h=s._customSize[d];var u=parseInt(d);_[u-(u>=t?1:0)]=h}s._customSize=_}for(var m,p,g=null!=i?i:a;g>=t+1;g--)if(n=s.getItemByListId(g)){var f=s._calcItemPos(g-1);m=z(n).to(.2333,{position:new T(f.x,f.y,0)}),g<=t+1&&(p=!0,m.call((function(){s._aniDelRuning=!1,e(t),delete s._aniDelCB}))),m.start()}p||(s._aniDelRuning=!1,e(t),s._aniDelCB=null)}),!0)}else e(t)},a.scrollTo=function(t,e,i,s){void 0===e&&(e=.5),void 0===i&&(i=null),void 0===s&&(s=!1);var o=this;if(o.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=o._numItems&&(t=o._numItems-1),!o._virtual&&o._layout&&o._layout.enabled&&o._layout.updateLayout();var n,a,l=o.getItemPos(t);if(!l)return N;switch(o._alignCalcType){case 1:n=l.left,n-=null!=i?o._thisNodeUt.width*i:o._leftGap,l=new T(n,0,0);break;case 2:n=l.right-o._thisNodeUt.width,n+=null!=i?o._thisNodeUt.width*i:o._rightGap,l=new T(n+o._contentUt.width,0,0);break;case 3:a=l.top,a+=null!=i?o._thisNodeUt.height*i:o._topGap,l=new T(0,-a,0);break;case 4:a=l.bottom+o._thisNodeUt.height,a-=null!=i?o._thisNodeUt.height*i:o._bottomGap,l=new T(0,-a+o._contentUt.height,0)}var r=o.content.getPosition();r=Math.abs(o._sizeType?r.y:r.x);var c=o._sizeType?l.y:l.x;Math.abs((null!=o._scrollPos?o._scrollPos:r)-c)>.5&&(o._scrollView.scrollToOffset(l,e),o._scrollToListId=t,o._scrollToEndTime=(new Date).getTime()/1e3+e,o._scrollToSo=o.scheduleOnce((function(){if(o._adheringBarrier||(o.adhering=o._adheringBarrier=!1),o._scrollPos=o._scrollToListId=o._scrollToEndTime=o._scrollToSo=null,s){var e=o.getItemByListId(t);e&&z(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}}),e+.1),e<=0&&o._onScrolling())}},a._calcNearestItem=function(){var t,e,i,s,o,n,a=this;a.nearestListId=null,a._virtual&&a._calcViewPos(),i=a.viewTop,s=a.viewRight,o=a.viewBottom,n=a.viewLeft;for(var l=!1,r=0;r<a.content.children.length&&!l;r+=a._colLineNum)if(t=a._virtual?a.displayData[r]:a._calcExistItemPos(r))switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:t.right>=n&&(a.nearestListId=t.id,n>e&&(a.nearestListId+=a._colLineNum),l=!0);break;case 2:t.left<=s&&(a.nearestListId=t.id,s<e&&(a.nearestListId+=a._colLineNum),l=!0);break;case 3:t.bottom<=i&&(a.nearestListId=t.id,i<e&&(a.nearestListId+=a._colLineNum),l=!0);break;case 4:t.top>=o&&(a.nearestListId=t.id,o>e&&(a.nearestListId+=a._colLineNum),l=!0)}if((t=a._virtual?a.displayData[a.displayItemNum-1]:a._calcExistItemPos(a._numItems-1))&&t.id==a._numItems-1)switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:s>e&&(a.nearestListId=t.id);break;case 2:n<e&&(a.nearestListId=t.id);break;case 3:o<e&&(a.nearestListId=t.id);break;case 4:i>e&&(a.nearestListId=t.id)}},a.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},a.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},a.skipPage=function(t,e){var i=this;if(i.checkInited())return i._slideMode!=zt.PAGE?console.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._numItems||i.curPageNum!=t&&(i.curPageNum=t,i.pageChangeEvent&&u.emitEvents([i.pageChangeEvent],t),i.scrollTo(t,e)))},a.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return console.error("Unset template item!");if(!e.renderEvent)return console.error("Unset Render-Event!");e._customSize={};var i=I(e._itemTmp),s=i.getComponent(f);e.content.addChild(i);for(var o=0;o<t;o++)u.emitEvents([e.renderEvent],i,o),s.height==e._itemSize.height&&s.width==e._itemSize.width||(e._customSize[o]=e._sizeType?s.height:s.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}},n(e,[{key:"slideMode",get:function(){return this._slideMode},set:function(t){this._slideMode=t}},{key:"virtual",get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()}},{key:"updateRate",get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)}},{key:"selectedId",get:function(){return this._selectedId},set:function(t){var e,i=this;switch(i.selectedMode){case Dt.SINGLE:if(!i.repeatEventSingle&&t==i._selectedId)return;if(e=i.getItemByListId(t),i._selectedId>=0?i._lastSelectedId=i._selectedId:i._lastSelectedId=null,i._selectedId=t,e&&(e.getComponent(b).selected=!0),i._lastSelectedId>=0&&i._lastSelectedId!=i._selectedId){var s=i.getItemByListId(i._lastSelectedId);s&&(s.getComponent(b).selected=!1)}i.selectedEvent&&u.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems);break;case Dt.MULT:if(!(e=i.getItemByListId(t)))return;var o=e.getComponent(b);i._selectedId>=0&&(i._lastSelectedId=i._selectedId),i._selectedId=t;var n=!o.selected;o.selected=n;var a=i.multSelected.indexOf(t);n&&a<0?i.multSelected.push(t):!n&&a>=0&&i.multSelected.splice(a,1),i.selectedEvent&&u.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems,n)}}},{key:"numItems",get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)console.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=zt.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);var i=e.content.getComponent(v);if(i&&(i.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var s=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,o=0;o<s;o++)e._createOrUpdateItem2(o);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(var n=0;n<e._numItems;n++)e._createOrUpdateItem2(n);e.displayItemNum=e._numItems}}}},{key:"scrollView",get:function(){return this._scrollView}}]),e}(D)).prototype,"templateType",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return wt.NODE}}),et=e($.prototype,"tmpNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e($.prototype,"tmpPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e($.prototype,"_slideMode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return zt.NORMAL}}),e($.prototype,"slideMode",[U],Object.getOwnPropertyDescriptor($.prototype,"slideMode"),$.prototype),ot=e($.prototype,"pageDistance",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),nt=e($.prototype,"pageChangeEvent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),at=e($.prototype,"_virtual",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e($.prototype,"virtual",[x],Object.getOwnPropertyDescriptor($.prototype,"virtual"),$.prototype),lt=e($.prototype,"cyclic",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rt=e($.prototype,"lackCenter",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ct=e($.prototype,"lackSlide",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ht=e($.prototype,"_updateRate",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e($.prototype,"updateRate",[Y],Object.getOwnPropertyDescriptor($.prototype,"updateRate"),$.prototype),_t=e($.prototype,"frameByFrameRenderNum",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dt=e($.prototype,"renderEvent",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),ut=e($.prototype,"selectedMode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Dt.NONE}}),mt=e($.prototype,"selectedEvent",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),pt=e($.prototype,"repeatEventSingle",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gt=e($.prototype,"_numItems",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Q=$))||Q)||Q)||Q)||Q)||Q));a._RF.pop()}}}));

System.register("chunks:///_virtual/ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){var t,i,n,o,r,l,s,a,c,u,p,d,h,f,m,b,g,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){l=e.cclegacy,s=e._decorator,a=e.Node,c=e.Sprite,u=e.Label,p=e.Enum,d=e.SpriteFrame,h=e.EventHandler,f=e.UITransform,m=e.tween,b=e.Vec3,g=e.Button,v=e.Component},function(e){y=e.DEV}],execute:function(){var w,C,_,S,E,F,I,z,k,N,T,D,L,H,M,O,G,A,W,R,V;l._RF.push({},"dc4b741o3BJFpuXWgfvsVtO","ListItem",void 0);var B=s.ccclass,x=s.property,P=s.disallowMultiple,Z=s.menu,j=s.executionOrder,J=function(e){return e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH",e}(J||{});e("default",(w=P(),C=Z("App/List Item"),_=j(-5001),S=x({type:a,tooltip:y}),E=x({type:c,tooltip:y}),F=x({type:u,tooltip:""}),I=x({type:a,tooltip:""}),z=x({type:p(J),tooltip:y}),k=x({type:a,tooltip:y,visible:function(){return this.selectedMode>J.NONE}}),N=x({type:d,tooltip:y,visible:function(){return this.selectedMode==J.SWITCH}}),T=x({tooltip:y}),B(D=w(D=C(D=_((H=t((L=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"current",H,o(t)),n(t,"hard",M,o(t)),n(t,"title",O,o(t)),n(t,"lock",G,o(t)),n(t,"selectedMode",A,o(t)),n(t,"selectedFlag",W,o(t)),n(t,"selectedSpriteFrame",R,o(t)),t._unselectedSpriteFrame=null,n(t,"adaptiveSize",V,o(t)),t._selected=!1,t._btnCom=void 0,t.list=void 0,t._eventReg=!1,t.listId=void 0,t}i(t,e);var l=t.prototype;return l.onLoad=function(){if(this.selectedMode==J.SWITCH){var e=this.selectedFlag.getComponent(c);this._unselectedSpriteFrame=e.spriteFrame}},l.onDestroy=function(){this.node.off(a.EventType.SIZE_CHANGED,this._onSizeChange,this)},l._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(a.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},l._onSizeChange=function(){this.list._onItemAdaptive(this.node)},l.createEvt=function(e,t,i){if(void 0===i&&(i=null),e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new h;return n.target=i||e.node,n.component=e.comName,n.handler=t,n}},l.showAni=function(e,t,i){var n,o=this,r=o.node.getComponent(f);switch(e){case 0:n=m(o.node).to(.2,{scale:new b(.7,.7)}).by(.3,{position:new b(0,2*r.height)});break;case 1:n=m(o.node).to(.2,{scale:new b(.7,.7)}).by(.3,{position:new b(2*r.width,0)});break;case 2:n=m(o.node).to(.2,{scale:new b(.7,.7)}).by(.3,{position:new b(0,-2*r.height)});break;case 3:n=m(o.node).to(.2,{scale:new b(.7,.7)}).by(.3,{position:new b(-2*r.width,0)});break;default:n=m(o.node).to(.3,{scale:new b(.1,.1)})}(t||i)&&n.call((function(){if(i){o.list._delSingleItem(o.node);for(var e=o.list.displayData.length-1;e>=0;e--)if(o.list.displayData[e].id==o.listId){o.list.displayData.splice(e,1);break}}t()})),n.start()},l.onClickThis=function(){this.list.selectedId=this.listId},r(t,[{key:"selected",get:function(){return this._selected},set:function(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case J.TOGGLE:this.selectedFlag.active=e;break;case J.SWITCH:var t=this.selectedFlag.getComponent(c);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}}},{key:"btnCom",get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(g)),this._btnCom}}]),t}(v)).prototype,"current",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"hard",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(L.prototype,"title",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(L.prototype,"lock",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(L.prototype,"selectedMode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.NONE}}),W=t(L.prototype,"selectedFlag",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(L.prototype,"selectedSpriteFrame",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(L.prototype,"adaptiveSize",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=L))||D)||D)||D)||D));l._RF.pop()}}}));

System.register("chunks:///_virtual/LoadAssets.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){var t,r,o;return{setters:[function(s){t=s.createForOfIteratorHelperLoose},function(s){r=s.cclegacy,o=s.resources}],execute:function(){r._RF.push({},"0417bafOBVBKrdKnDzAiq/K","LoadAssets",void 0);s("default",function(){function s(){this._count=0,this.progress=[],this.progressValue=0,this.paths=[],this.assets=new Set,this.__onProgress=void 0,this.__onComplete=void 0,this.__onError=void 0}s.create=function(){return new s};var r=s.prototype;return r.onProgress=function(s){this.__onProgress=s},r.onComplete=function(s){this.__onComplete=s},r.onError=function(s){this.__onError=s},r.getAssets=function(s){return Array.from(this.assets).filter((function(t){return t instanceof s}))},r.add=function(s){return Array.isArray(s)?this.paths.push({type:"file",paths:s}):this.paths.push({type:"file",paths:[s]}),this._count+=1,this},r.addDir=function(s){return Array.isArray(s)?this.paths.push({type:"dir",paths:s}):this.paths.push({type:"dir",paths:[s]}),this._count+=1,this},r.load=function(s){var t=this;this.progressValue=0,this.progress=new Array(this.paths.length).fill(0),this.paths.forEach((function(r,e){"file"===r.type?o.load(r.paths,(function(s,r,o){t.progress[e]=s/r,t._onProgress()}),(function(r,o){r?t._onError(r):(t._count-=1,t._addAsset(o,s),0===t._count&&t._onComplete())})):"dir"===r.type&&o.loadDir(r.paths[0],(function(s,r,o){t.progress[e]=s/r,t._onProgress()}),(function(r,o){r?t._onError(r):(t._count-=1,t._addAsset(o,s),0===t._count&&t._onComplete())}))}))},r.addProgress=function(s){var t=.99;return this.progressValue<t?(this.progressValue+=s,this.progressValue>=t&&(this.progressValue=t)):this.progressValue>=1&&(this.progressValue=1),this.progressValue},r._onProgress=function(){for(var s,t=0,r=0,o=this.progress.length;r<o;r++)t+=this.progress[r];var e=t/this.progress.length;e>this.progressValue?this.progressValue=e:this.progressValue<.999&&(this.progressValue+=.001),null==(s=this.__onProgress)||s.call(this,this.progressValue)},r._addAsset=function(s,r){var o=this;if(r)for(var e,n=function(){var s=e.value;r instanceof Array?r.find((function(t){return s instanceof t}))&&o.assets.add(s):s instanceof r&&o.assets.add(s)},i=t(s);!(e=i()).done;)n()},r._onComplete=function(){var s;null==(s=this.__onComplete)||s.call(this,this.assets)},r._onError=function(s){var t;null==(t=this.__onError)||t.call(this,s)},s}());r._RF.pop()}}}));

System.register("chunks:///_virtual/localization-global.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"02d9etKgNBGqLPpvU7RX29o","localization-global",void 0);e("pluginName","Localization Editor"),e("mainName","localization-editor"),e("runtimeBundleName","l10n"),e("resourceListPath","resource-list"),e("resourceBundlePath","resource-bundle");t._RF.pop()}}}));

System.register("chunks:///_virtual/LogicAudio.ts",["cc","./Audio.ts","./LogicData.ts"],(function(n){var t,e,c;return{setters:[function(n){t=n.cclegacy},function(n){e=n.default},function(n){c=n.default}],execute:function(){t._RF.push({},"833dcXKHt5Eor95WDgmhGwG","LogicAudio",void 0);var i="audio/shuffle",o="audio/qing",u="audio/down",f="audio/click",a="audio/getReward",s="audio/upLevel",l="audio/lose";n("default",function(){function n(){}return n.playShuffle=function(){e.instance.playLoopEffect(i)},n.playCombine=function(){e.instance.playEffect(o,.7)},n.playDown=function(){e.instance.playEffect(u)},n.playClick=function(){e.instance.playEffect(f)},n.playPropTip=function(){e.instance.playEffect(a)},n.playWin=function(){e.instance.playEffect(s,.5)},n.playLose=function(){e.instance.playEffect(l)},n.playBgm=function(){},n.stopLoopEffect=function(){e.instance.stopLoopEffect()},n.setVolume=function(n,t){e.instance.setMusicVolume(n?1:0),e.instance.setEffectVolume(t?1:0)},n.muteAll=function(){e.instance.setEffectVolume(0),e.instance.setMusicVolume(0)},n.unmuteAll=function(){c.settings.music&&e.instance.setMusicVolume(1),c.settings.sound&&e.instance.setEffectVolume(1)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/LogicData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DB.ts","./Config.ts","./Constant.ts","./Crazy.ts","./Utils.ts"],(function(t){var a,e,r,n,i,u,s,o,c,h,f,d;return{setters:[function(t){a=t.createClass,e=t.extends,r=t.objectWithoutPropertiesLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){u=t.cclegacy},function(t){s=t.DB},function(t){o=t.RewardConfigs,c=t.GameDataConfig},function(t){h=t.ScreenOrientation},function(t){f=t.UpdatePrevAdTime},function(t){d=t.default}],execute:function(){var p,v=["isFull","time"];u._RF.push({},"a1bcaiA6b5BKLgrAQrWm497","LogicData",void 0);var l=t("default",function(){function t(){}return t.init=function(){var t=n(i().mark((function t(){var a,e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.local.getData();case 2:return 0==s.local.data.init.randomSeed&&(a=Date.now(),this.setData({init:{randomSeed:a,saveTime:a}}),this.save()),null==(e=s.local.data).runData.maxLevel&&this.setLevel(e.runData.level,!1),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t.setReward=function(t,a){var r,n,i,u={count:null!=(r=t.count)?r:this.runData.reward.count,time:null!=(n=t.time)?n:this.runData.reward.time,date:null!=(i=t.date)?i:this.runData.reward.date};this.setRunData(e({},this.runData,{reward:u}),a)},t.getRewardInfo=function(){var t=o[this.reward.count];if(t)return{isok:this.reward.time>t.duration,time:Math.max(0,t.duration-this.reward.time),content:t.content}},t.giveReward=function(t){var a=this;void 0===t&&(t=!1);var e=this.getRewardInfo();if(e&&(e.isok||t))return e.content.forEach((function(t){a.addProp(t,!1)})),this.setReward({time:0,count:this.reward.count+1,date:d.getTimestamp()},!0),e},t.recoverRewardTime=function(){var t=o[this.reward.count];if(t){var a=this.reward.time;if(!(a>t.duration)){var e={time:a+1,count:this.reward.count},r=e.time%30==0;return this.setReward(e,r),e}}},t.maxLevel=function(){return this.runData.maxLevel||this.runData.level},t.setRunData=function(t,a){void 0===a&&(a=!0),this.setData({runData:t}),a&&this.save()},t.setSettings=function(t){this.setData({settings:t}),this.save()},t.setLevel=function(t,a){void 0===a&&(a=!0);var r=this.runData,n=r.maxLevel?Math.max(r.maxLevel,t):t,i=e({},r,{level:t,maxLevel:n});this.setData({runData:i}),a&&this.save()},t.setUnxor=function(t,a){this.setData({unx:t})},t.RunGameSave=function(t,a){void 0===a&&(a=!1),this.setUnxor(e({},this.data.unx,{runGame:t}),a)},t.RunGameGet=function(){var t;return null==(t=this.data.unx)?void 0:t.runGame},t.incrbyHp=function(t,a){void 0===a&&(a=!0);var r=this.runData.hp.timestamp;t<0&&this.runData.hp.current>=c.hp.max&&(r=Math.floor(Date.now()/1e3));var n={current:this.runData.hp.current+t,timestamp:r};n.current=n.current;var i=e({},this.runData,{hp:n});return this.setData({runData:i}),a&&this.save(),n.current},t.buyHp=function(){var t=this.runData.prop.coin,a=c.hp.coin;return t<a?"nocoin":(f(-15),this.incrbyHp(1,!1),this.setProp({coin:t-a}),"success")},t.recoverHpByTimestamp=function(){var t=e({},this.runData.hp,{isFull:!1,time:c.hp.duration});if(t.current>=c.hp.max)return t.isFull=!0,t;var a=Math.floor(Date.now()/1e3),n=a-t.timestamp,i=Math.floor(n/c.hp.duration);if(t.time=c.hp.duration-n%c.hp.duration,i<=0)return t;t.timestamp=a,t.current=Math.min(t.current+i,c.hp.max),t.isFull=t.current>=c.hp.max;t.isFull,t.time;var u=r(t,v),s=e({},this.runData,{hp:u});return this.setData({runData:s}),this.save(),t},t.setProp=function(t,a){void 0===a&&(a=!0);var r=this.runData,n=e({},r.prop,t),i=e({},r,{prop:n});this.setData({runData:i}),a&&this.save()},t.useProp=function(t,a){var e;if(this.freeProp.use(t))return!0;var r=this.runData.prop[t];return!(r<=0)&&(this.setProp(((e={})[t]=r-1,e)),!0)},t.addProp=function(a,e){var r;void 0===e&&(e=!0);var n=t.runData.prop[a.id];this.setProp(((r={})[a.id]=a.count+n,r),e)},t.buyProp=function(a){var e,r=t.runData.prop.coin;if(null==a.coin)return"nobuy";if(r<a.coin)return"nocoin";f(-20);var n=r-a.coin,i=t.runData.prop[a.id]+a.count;return this.setProp(((e={})[a.id]=i,e.coin=n,e)),"success"},t.incrbyScore=function(t){if(void 0===t&&(t=1),t<=0)return this.runData.score;var a=0==this.runData.score,r=this.runData.score+t;return this.setRunData(e({},this.runData,{score:r}),!1),(r%3==0||a||t>=10)&&this.save(),r},t.setData=function(t){s.local.setData(t)},t.save=function(){var t=n(i().mark((function t(){var a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e({},this.data.init,{saveTime:Date.now()}),this.setData({init:a}),s.local.save();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a(t,null,[{key:"data",get:function(){return s.local.data}},{key:"settings",get:function(){return this.data.settings}},{key:"runData",get:function(){return this.data.runData}},{key:"isHpEmpty",get:function(){return this.runData.hp.current<=0}},{key:"reward",get:function(){return this.runData.reward||this.setReward({count:0,time:0,date:d.getTimestamp()},!1),d.isSameDayAsCurrent(this.runData.reward.date)||this.setReward({count:0,date:d.getTimestamp()},!0),this.runData.reward}}]),t}());p=l,l._freePropData={},l.freeProp={set:function(t,a){p._freePropData[t]=a},get:function(t){var a;return null!=(a=p._freePropData[t])?a:0},clear:function(){p._freePropData={}},use:function(t){var a=p.freeProp.get(t);return!(a<=0)&&(p.freeProp.set(t,a-1),!0)}};t("GlobalGame",{isGame:!1,orientation:h.VERTICAL,isSendCube:!1});u._RF.pop()}}}));

System.register("chunks:///_virtual/LogicScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BSingleton.ts","./UI.ts","./Constant.ts","./Game.ts"],(function(e){var n,t,c,o,i,a,r;return{setters:[function(e){n=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){c=e.cclegacy},function(e){o=e.default},function(e){i=e.UI},function(e){a=e.GameStartType},function(e){r=e.Game}],execute:function(){c._RF.push({},"cfc1fk5u/VEx4LMldMZDzcL","LogicScene",void 0),e("default",function(e){function c(n){return e.call(this,n)||this}n(c,e);var o=c.prototype;return o.toInit=function(){this.changeScene("Home",!0)},o.toHome=function(){this.changeScene("Home")},o.toGame=function(e){void 0===e&&(e=a.NEW),this.changeScene("Game",!1,e)},o.changeScene=function(e,n,o){var a,u;null==(a=i.instance)||a.closeTipAll(),c.current=e;for(var l,s=t(this.params.children);!(l=s()).done;){var f,m=l.value;if("Game"==m.name&&o)null==(f=m.getComponent(r))||f.initType(o);m.active=m.name==e}var h=null==(u=this.params.parent)||null==(u=u.parent)?void 0:u.getChildByName("World");h&&(h.active="Game"==e),n&&h&&(h.active=!0)},c}(o.Instance())).current="Home",c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Constant.ts","./Cubes.ts","./GameRunData.ts","./Interface.ts","./Levels.ts","./Mesh.ts","./Main.ts","./Config.ts","./BSingleton.ts","./PopupBase.ts","./List.ts","./ListItem.ts","./Crazy.ts","./CrazySDK.ts","./CrazySDK.types.ts","./WeChat.ts","./Yandex.ts","./d.ts","./Ad.ts","./Audio.ts","./BanTouch.ts","./DB.ts","./EventManager.ts","./LoadAssets.ts","./Pools.ts","./PopupManager.ts","./Random.ts","./TimeManager.ts","./Utils.ts","./LogicAudio.ts","./LogicData.ts","./LogicScene.ts","./Game.ts","./Home.ts","./UI.ts","./UITip.ts","./FinishPopup.ts","./HardTipPopup.ts","./LevelsPopup.ts","./OverPopup.ts","./PropOnePopup.ts","./PropPopup.ts","./PropRewardPopup.ts","./PropTipsPopup.ts","./SettingPopup.ts","./PropItem.ts","./icu-component.ts","./l10n-component.ts","./l10n-label.ts","./auto-config-intl-manager.ts","./icu-options.ts","./icu-type.ts","./l10n-listen-event.ts","./l10n-manager.ts","./l10n-options.ts","./localization-global.ts","./resource-data-manager.ts","./l10n.ts","./Intl.PluralRules.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadAssets.ts","./LogicData.ts","./LogicScene.ts","./LogicAudio.ts","./EventManager.ts","./Constant.ts","./l10n.ts","./Crazy.ts","./UI.ts","./PopupManager.ts","./GameRunData.ts","./l10n-manager.ts"],(function(e){var t,n,i,a,o,r,s,c,l,u,h,d,f,p,m,g,v,C,S,y,b,w,_,L,O,P,N,x,T,z,I,A,H,R,B,E,M,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Node,u=e.Camera,h=e.UITransform,d=e.Label,f=e.Prefab,p=e.instantiate,m=e.UIOpacity,g=e.tween,v=e.v3,C=e.view,S=e.toRadian,y=e.toDegree,b=e.find,w=e.Layout,_=e.Widget,L=e.Component,O=e.screen},function(e){P=e.default},function(e){N=e.default,x=e.GlobalGame},function(e){T=e.default},function(e){z=e.default},function(e){I=e.default},function(e){A=e.Constant,H=e.ScreenOrientation},null,function(e){R=e.Crazy},function(e){B=e.UI},function(e){E=e.default},function(e){M=e.default},function(e){G=e.default}],execute:function(){var F,U,D,V,W,k,Z,j,Q,X,Y,q,J,K,$;s._RF.push({},"280fbiC3NFPNoPILjaQybYF","Main",void 0);var ee=c.ccclass,te=c.property;e("Main",(F=ee("Main"),U=te(l),D=te(u),V=te(u),W=te(h),k=te(l),Z=te(l),F((X=t((Q=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"nScene",X,a(t)),i(t,"camera0",Y,a(t)),i(t,"camera1",q,a(t)),i(t,"uiScene",J,a(t)),i(t,"nLoading",K,a(t)),i(t,"nChangeSceneTip",$,a(t)),t._load=void 0,t._progress=0,t._tweenProgress=void 0,t._orientation=void 0,t}n(t,e);var s=t.prototype;return s.start=function(){var e=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window._onAppComplete&&window._onAppComplete(),this._load=P.create(),this.loadAnimation(),I.on(A.EventMain.FixCamera,this.fixCamera,this),this.fixCamera(),O.on("window-resize",this.fixCamera,this),e.next=8,R.instance.init();case 8:return R.instance.game.loadingStart(),e.next=11,this.load();case 11:this.initHp();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.initHp=function(){this.schedule((function(){I.emit(A.EventHome.UpdateHp),N.recoverRewardTime(),I.emit(A.EventPopup.UpdateReward)}),1)},s.load=function(){var e=o(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.init();case 2:return t=e.sent,e.next=5,this.loadAsset();case 5:n=e.sent,M.Init(),n&&(T.init(this.nScene),T.instance.toHome()),t&&z.setVolume(t.settings.music,t.settings.sound),this.nLoading.destroy();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.loadAsset=function(){var e=this,t=this.nScene,n=this.nLoading.getChildByName("Label").getComponent(d);this._load.addDir("prefabs").addDir("audio").load(f),this._load.addProgress(this._progress),this._load.onProgress((function(e){n.string=Math.floor(100*e)+"%"}));var i=["Home","Game","World"];return new Promise((function(a){e._load.onComplete((function(o){o.forEach((function(n){if(-1!=i.indexOf(n.name)){var a,o=p(n);if(o.active=!1,"World"==n.name)null==(a=e.node.parent)||a.addChild(o);else t.addChild(o)}})),n.node.parent.active=!1,a(!0)})),e._load.onError((function(e){console.error(e),a(!1)}))}))},s.loadAnimation=function(){var e=this,t=this.nLoading.getChildByName("Logo"),n=t.getComponent(m),i=this.nLoading.getChildByName("Label").getComponent(d);g(t).to(1,{position:v(0,30,0)},{easing:"sineInOut"}).to(1,{position:v(0,0,0)},{easing:"sineInOut"}).union().repeatForever().start(),g(n).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:235},{easing:"sineInOut"}).union().repeatForever().start(),this._tweenProgress=g(i).call((function(){e._progress=e._load.addProgress(.01),i.string=Math.floor(100*e._progress)+"%"})).delay(.15).union().repeatForever().start()},s.fixCamera=function(e){var t=C.getVisibleSize(),n=1*t.width/t.height,i=this.camera0,a=this.camera1,o=this.verticalFOVToHorizontal(45,n);a.fov=i.fov=o,i.camera.update(!0),a.camera.update(!0),t.width/t.height<1.75?this.uiScene.setContentSize(t.width,t.height):this.uiScene.setContentSize(2240,t.height),void 0===this._orientation&&"home"!=e||(void 0===this._orientation&&(this._orientation="init"),this._onScreenSize(t))},s.verticalFOVToHorizontal=function(e,t){var n=S(e),i=Math.tan(n/2),a=2*Math.atan(i*t);return y(a)},s._onScreenSize=function(e){var t=this.getOrientation(e);if(this._orientation!=t){if(!x.isGame)return void this._onScreenChange(t);this.nChangeSceneTip.active=!0,this.nChangeSceneTip.getChildByName("bottom").getChildByName("off").active=t==H.HORIZONTAL;var n=this.nChangeSceneTip.getChildByName("tipLabel").getComponent(d),i=t==H.HORIZONTAL?"textSceneLandscape":"textScenePortrait";n.string=G.t(i)}else this.nChangeSceneTip.active=!1},s.btnScreenChange=function(){var e=o(r().mark((function e(t,n){var i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.nChangeSceneTip.active=!1,"off"!=n){e.next=3;break}return e.abrupt("return");case 3:if(!x.isSendCube){e.next=7;break}return B.instance.showLoading(),e.next=7,new Promise((function(e){i.schedule((function t(){x.isSendCube||(B.instance.hideLoading(),i.unschedule(t),e(0))}),.5)}));case 7:this._orientation==H.HORIZONTAL?this._orientation=H.VERTICAL:this._orientation=H.HORIZONTAL,this.switchOrientation(this._orientation),I.emit(A.EventGame.GameRestartNoHp),E.hideAll();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),s._onScreenChange=function(e){this._orientation=e,this.switchOrientation(this._orientation),I.emit(A.EventMain.OnScreenChange)},s.getOrientation=function(e){return e||(e=C.getVisibleSize()),e.width/e.height>1.2?H.HORIZONTAL:H.VERTICAL},s.switchOrientation=function(e){var t;x.orientation=e;var n=b("World/Wall_22x33"),i=b("World/Wall_36x20"),a=null==(t=this.nScene.getChildByName("Game"))?void 0:t.getChildByName("bottom");if(n&&i&&a){var o,r,s=e==H.HORIZONTAL;if(s)n.active=!1,i.active=!0,this.camera0.node.setPosition(0,0,55),this.camera1.node.setPosition(0,0,55),null==(o=this.camera0.node.parent)||o.setPosition(0,0,2.5),a.setPosition(0,-570,0);else n.active=!0,i.active=!1,this.camera0.node.setPosition(0,0,70),this.camera1.node.setPosition(0,0,70),null==(r=this.camera0.node.parent)||r.setPosition(0,0,4),a.setPosition(0,-550,0);this.switchUiTop(s),this.switchUiHome(s),I.emit(A.EventCube.FixSceneAndCamera)}},s.switchUiTop=function(e){var t,n,i,a=null==(t=this.nScene.getChildByName("Game"))?void 0:t.getChildByName("top"),o=null==a?void 0:a.getComponent(w),r=null==(n=this.nScene.getChildByName("Game"))?void 0:n.getChildByName("Settings"),s=e?1.35:1,c=e?70:17,l=e?50:0;null==a||a.children.forEach((function(e){e.setScale(s,s,s)})),o&&(o.spacingX=c,o.paddingRight=l,o.updateLayout()),null==r||r.setScale(s,s,s);var u=e?40:20.5,h=null==r?void 0:r.getComponent(_);h&&(h.left=u);var f=null==(i=this.nScene.getChildByName("Game"))?void 0:i.getChildByName("bottom"),p=e?1.15:1,m=e?1.1:1;null==f||f.setScale(p,p,p),null==f||f.getComponentsInChildren(d).forEach((function(e){e.node.setScale(m,m,m)}))},s.switchUiHome=function(e){var t=this.nScene.getChildByName("Home"),n=e?1.25:1,i=["Setting","Reward"];null==t||t.children.forEach((function(t){t.setScale(n,n,n);var a=i.indexOf(t.name);if(a>=0){var o,r=e?100+50*(a+1):100;null==(o=t.getComponent(h))||o.setContentSize(100,r)}if("Level"==t.name){var s=e?-225:-278;t.setPosition(0,s,0)}if("Shop"==t.name){var c=e?-521:-541;t.setPosition(0,c,0)}if("play"==t.name){var l=e?-324:-354;t.setPosition(0,l,0)}}))},t}(L)).prototype,"nScene",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(Q.prototype,"camera0",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(Q.prototype,"camera1",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(Q.prototype,"uiScene",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(Q.prototype,"nLoading",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Q.prototype,"nChangeSceneTip",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Q))||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/Mesh.ts",["cc"],(function(e){var s,t,n;return{setters:[function(e){s=e.cclegacy,t=e.Vec3,n=e.utils}],execute:function(){s._RF.push({},"16023dwO0tLWIxCSsPaKVyM","Mesh",void 0);var i=new t(3,2,4).multiplyScalar(.5),c=new t(-i.x,-i.y,-i.z),u=new t(i.x,i.y,i.z),a=Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z);e("CubeMesh",n.MeshUtils.createMesh({positions:[1.5,.7,1.7,1.4121320343559642,.7,1.9121320343559642,1.2,.7,2,1.4121320343559642,.9121320343559642,1.7,1.35,.9121320343559642,1.8499999999999999,1.2,.9121320343559642,1.9121320343559642,1.2,1,1.7,1.5,.7,-1.7,1.4121320343559642,.7,-1.9121320343559642,1.2,.7,-2,1.4121320343559642,.9121320343559642,-1.7,1.35,.9121320343559642,-1.8499999999999999,1.2,.9121320343559642,-1.9121320343559642,1.2,1,-1.7,-1.5,.7,-1.7,-1.4121320343559642,.7,-1.9121320343559642,-1.2,.7,-2,-1.4121320343559642,.9121320343559642,-1.7,-1.35,.9121320343559642,-1.8499999999999999,-1.2,.9121320343559642,-1.9121320343559642,-1.2,1,-1.7,-1.5,.7,1.7,-1.4121320343559642,.7,1.9121320343559642,-1.2,.7,2,-1.4121320343559642,.9121320343559642,1.7,-1.35,.9121320343559642,1.8499999999999999,-1.2,.9121320343559642,1.9121320343559642,-1.2,1,1.7,1.5,-.7,1.7,1.4121320343559642,-.7,1.9121320343559642,1.2,-.7,2,1.4121320343559642,-.9121320343559642,1.7,1.35,-.9121320343559642,1.8499999999999999,1.2,-.9121320343559642,1.9121320343559642,1.2,-1,1.7,1.5,-.7,-1.7,1.4121320343559642,-.7,-1.9121320343559642,1.2,-.7,-2,1.4121320343559642,-.9121320343559642,-1.7,1.35,-.9121320343559642,-1.8499999999999999,1.2,-.9121320343559642,-1.9121320343559642,1.2,-1,-1.7,-1.5,-.7,-1.7,-1.4121320343559642,-.7,-1.9121320343559642,-1.2,-.7,-2,-1.4121320343559642,-.9121320343559642,-1.7,-1.35,-.9121320343559642,-1.8499999999999999,-1.2,-.9121320343559642,-1.9121320343559642,-1.2,-1,-1.7,-1.5,-.7,1.7,-1.4121320343559642,-.7,1.9121320343559642,-1.2,-.7,2,-1.4121320343559642,-.9121320343559642,1.7,-1.35,-.9121320343559642,1.8499999999999999,-1.2,-.9121320343559642,1.9121320343559642,-1.2,-1,1.7,-1.2,1,-1.7,-1.2,1,1.7,1.2,1,1.7,1.2,1,-1.7,1.2,-1,1.7,1.2,-1,-1.7,-1.2,-1,-1.7,-1.2,-1,1.7,1.5,.7,1.7,1.5,.7,-1.7,1.5,-.7,1.7,1.5,-.7,-1.7,-1.5,.7,-1.7,-1.5,.7,1.7,-1.5,-.7,-1.7,-1.5,-.7,1.7,1.2,.7,2,-1.2,.7,2,1.2,-.7,2,-1.2,-.7,2,1.2,.7,-2,-1.2,.7,-2,1.2,-.7,-2,-1.2,-.7,-2],normals:[1,0,0,.7071067811865476,0,.7071067811865475,0,0,1,.7071067811865476,.7071067811865475,0,.5000000000000001,.7071067811865475,.5,4329780281177467e-32,.7071067811865475,.7071067811865476,0,1,0,1,0,0,.7071067811865476,0,-.7071067811865475,0,0,-1,.7071067811865476,.7071067811865475,0,.5000000000000001,.7071067811865475,-.5,4329780281177467e-32,.7071067811865475,-.7071067811865476,0,1,0,-1,0,0,-.7071067811865476,0,-.7071067811865475,-0,0,-1,-.7071067811865476,.7071067811865475,0,-.5000000000000001,.7071067811865475,-.5,-4329780281177467e-32,.7071067811865475,-.7071067811865476,0,1,0,-1,0,0,-.7071067811865476,0,.7071067811865475,-0,0,1,-.7071067811865476,.7071067811865475,0,-.5000000000000001,.7071067811865475,.5,-4329780281177467e-32,.7071067811865475,.7071067811865476,0,1,0,1,0,0,.7071067811865476,0,.7071067811865475,0,0,1,.7071067811865476,-.7071067811865475,0,.5000000000000001,-.7071067811865475,.5,4329780281177467e-32,-.7071067811865475,.7071067811865476,0,-1,0,1,0,0,.7071067811865476,0,-.7071067811865475,0,0,-1,.7071067811865476,-.7071067811865475,0,.5000000000000001,-.7071067811865475,-.5,4329780281177467e-32,-.7071067811865475,-.7071067811865476,0,-1,0,-1,0,0,-.7071067811865476,0,-.7071067811865475,-0,0,-1,-.7071067811865476,-.7071067811865475,0,-.5000000000000001,-.7071067811865475,-.5,-4329780281177467e-32,-.7071067811865475,-.7071067811865476,0,-1,0,-1,0,0,-.7071067811865476,0,.7071067811865475,-0,0,1,-.7071067811865476,-.7071067811865475,0,-.5000000000000001,-.7071067811865475,.5,-4329780281177467e-32,-.7071067811865475,.7071067811865476,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,1,-0,0,1,0,0,1,-0,0,1,0,0,-1,-0,0,-1,0,0,-1,-0,0,-1],uvs:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[56,57,58,56,58,59,60,62,61,60,63,62,64,66,65,65,66,67,68,70,69,69,70,71,72,73,74,73,75,74,76,78,77,77,78,79,0,3,1,1,3,4,1,4,2,2,4,5,3,6,4,4,6,5,7,8,10,8,11,10,8,9,11,9,12,11,10,11,13,11,12,13,14,17,15,15,17,18,15,18,16,16,18,19,17,20,18,18,20,19,21,22,24,22,25,24,22,23,25,23,26,25,24,25,27,25,26,27,28,29,31,29,32,31,29,30,32,30,33,32,31,32,34,32,33,34,35,38,36,36,38,39,36,39,37,37,39,40,38,41,39,39,41,40,42,43,45,43,46,45,43,44,46,44,47,46,45,46,48,46,47,48,49,52,50,50,52,53,50,53,51,51,53,54,52,55,53,53,55,54,0,1,28,1,29,28,1,2,29,2,30,29,7,35,8,8,35,36,8,36,9,9,36,37,14,15,42,15,43,42,15,16,43,16,44,43,21,49,22,22,49,50,22,50,23,23,50,51,2,5,23,5,26,23,5,6,26,6,27,26,9,16,12,12,16,19,12,19,13,13,19,20,30,51,33,33,51,54,33,54,34,34,54,55,37,40,44,40,47,44,40,41,47,41,48,47,0,7,3,3,7,10,3,10,6,6,10,13,14,21,17,17,21,24,17,24,20,20,24,27,28,31,35,31,38,35,31,34,38,34,41,38,42,45,49,45,52,49,45,48,52,48,55,52],minPos:c,maxPos:u,boundingRadius:a}));s._RF.pop()}}}));

System.register("chunks:///_virtual/OverPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./PopupBase.ts","./Config.ts","./EventManager.ts","./PopupManager.ts","./LogicScene.ts","./l10n.ts","./LogicData.ts","./UI.ts","./LogicAudio.ts","./Ad.ts","./GameRunData.ts","./l10n-manager.ts"],(function(t){var e,n,i,a,o,u,r,l,p,s,c,f,d,m,h,v,b,g,y,w,P,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,u=t._decorator,r=t.Node,l=t.Label,p=t.tween,s=t.find},function(t){c=t.Constant},function(t){f=t.default},function(t){d=t.default},function(t){m=t.default},function(t){h=t.default},function(t){v=t.default},null,function(t){b=t.default},function(t){g=t.UI},function(t){y=t.default},function(t){w=t.Ad},function(t){P=t.default},function(t){R=t.default}],execute:function(){var O,T,C,I,k,L,E,z,G,A,D,F,B;o._RF.push({},"007e9mwNgpEpp0RArzRgu28","OverPopup",void 0);var H=u.ccclass,U=u.property;t("OverPopup",(O=H("OverPopup"),T=U(r),C=U(r),I=U(l),k=U(l),L=U(r),O((G=e((z=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o))||this,i(e,"mainTimeout",G,a(e)),i(e,"mainFull",A,a(e)),i(e,"titleLabel",D,a(e)),i(e,"timeCountLabel",F,a(e)),i(e,"nRewardIconTip",B,a(e)),e}n(e,t);var o=e.prototype;return o.init=function(){var t,e,n;P.Clear(),this.mainTimeout.active="timeout"==(null==(t=this.options)?void 0:t.type),this.mainFull.active="full"==(null==(e=this.options)?void 0:e.type),this.titleLabel.string="timeout"==(null==(n=this.options)?void 0:n.type)?R.t("titleTimeOver"):R.t("titleGameOver"),this.updateProp(),m.on(c.EventPopup.UpdateProp,this.updateProp,this),y.playLose();var i=b.getRewardInfo();this.nRewardIconTip.parent.active=!!i&&i.isok,(null==i?void 0:i.isok)&&p(this.nRewardIconTip).to(.2,{angle:20},{easing:"sineInOut"}).to(.2,{angle:-20},{easing:"sineInOut"}).to(.2,{angle:20},{easing:"sineInOut"}).to(.2,{angle:-20},{easing:"sineInOut"}).to(.1,{angle:0},{easing:"sineIn"}).delay(.5).union().repeatForever().start(),m.once(c.EventPopup.RewardOnBuyCallback,this.onRewardOk,this),this.changeAdBtn(d.adEnable)},o.onDestroy=function(){m.off(c.EventPopup.UpdateProp,this.updateProp,this),m.off(c.EventPopup.RewardOnBuyCallback,this.onRewardOk,this)},o.updateProp=function(){this.timeCountLabel.string=b.runData.prop.time+""},o.onRewardOk=function(){this.nRewardIconTip.parent.active=!1,this.updateProp()},o.changeAdBtn=function(t){s("full/button/revive",this.main).active=t},o.btnRestart=function(){y.playClick(),this.mainTimeout.active&&(b.isHpEmpty||w.instance.showFullScreen()),m.emit(c.EventGame.GameRestart)},o.btnHome=function(){y.playClick(),this.mainTimeout.active,this.hide(!1,0),v.instance.toHome()},o.btnRevive=function(){var t=this;y.playClick(),w.instance.showVideo((function(){t.hide(!1,.1),m.emit(c.EventGame.GameRevive)}))},o.btnTime=function(){y.playClick(),b.useProp("time")?(this.hide(!1,.1),m.emit(c.EventGame.GameTime)):(g.instance.showTip(R.t("msgNoProp")),h.show("prefabs/popup/PopupPropOne",{id:"time"},{immediately:!0}))},o.btnReward=function(){y.playClick(),h.show("prefabs/popup/PopupPropReward",void 0,{immediately:!0})},e}(f)).prototype,"mainTimeout",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(z.prototype,"mainFull",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(z.prototype,"titleLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(z.prototype,"timeCountLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(z.prototype,"nRewardIconTip",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=z))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pools.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BSingleton.ts"],(function(t){var o,n,e,i,s,a;return{setters:[function(t){o=t.inheritsLoose,n=t.createClass},function(t){e=t.cclegacy,i=t.instantiate,s=t.NodePool},function(t){a=t.default}],execute:function(){e._RF.push({},"eaaa6/mYSFFOKdhTQcdRyOr","Pools",void 0);var r=function(){function t(t,o){void 0===o&&(o=0),this.data=void 0,this.pool=void 0,this.data=t,this.pool=new s;for(var n=0;n<o;n++){var e=i(t.node);this.pool.put(e)}}var o=t.prototype;return o.getNode=function(){var t=this.pool.get();return t||(t=i(this.data.node)),this.data.parent&&(t.parent=this.data.parent),t},o.putNode=function(t){this.pool.put(t)},o.clearNode=function(){this.pool.clear()},n(t,[{key:"size",get:function(){return this.pool.size()}}]),t}();t("default",function(t){function n(){var o;return(o=t.call(this)||this).pools={},o}o(n,t);var e=n.prototype;return e.addPool=function(t,o){void 0===o&&(o=0),this.pools[t.name]||(this.pools[t.name]=new r(t,o))},e.getPool=function(t){return this.pools[t]},n}(a.Instance0()));e._RF.pop()}}}));

System.register("chunks:///_virtual/PopupBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./LogicData.ts"],(function(o){var n,t,i,e,a,r,c,l,s,u,p,d,f,m,b,v;return{setters:[function(o){n=o.applyDecoratedDescriptor,t=o.inheritsLoose,i=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){a=o.cclegacy,r=o._decorator,c=o.Node,l=o.Sprite,s=o.BlockInputEvents,u=o.UIOpacity,p=o.tween,d=o.v3,f=o.UITransform,m=o.Component},function(o){b=o.ScreenOrientation},function(o){v=o.GlobalGame}],execute:function(){var h,g,C,y,k,w,D,H,B;a._RF.push({},"cb28dLl7iFMlYMatcmxdOKF","PopupBase",void 0);var S=r.ccclass,A=r.property;o("default",(h=S("PopupBase"),g=A({type:c,tooltip:"背景遮罩"}),C=A({tooltip:"点击背景遮罩关闭弹窗"}),y=A({type:c,tooltip:"弹窗主体"}),h((D=n((w=function(o){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=o.call.apply(o,[this].concat(a))||this,i(n,"background",D,e(n)),i(n,"closeBg",H,e(n)),i(n,"main",B,e(n)),n.animDuration=.3,n.blocker=void 0,n.options=void 0,n.showAnimation=void 0,n.hideAnimation=void 0,n.finishCallback=function(){},n}t(n,o);var a=n.prototype;return a.btnHide=function(o){void 0===o&&(o=!0),o?this.hide():this.hide(!1,0)},a.show=function(o,n){var t=this;return void 0===n&&(n=this.animDuration),new Promise((function(i){var e;t.options=o;var a=t.background,r=t.main;t.node.active=!0,a.active=!0;var f=a.getComponent(l);f.color.set(f.color.r,f.color.g,f.color.b,0),a.getComponent(s)||a.addComponent(s),t.closeBg&&(a.off(c.EventType.TOUCH_END,t.btnHide,t),r.getComponent(s)||r.addComponent(s)),r.active=!0,r.setScale(.5,.5,1);var m=null!=(e=r.getComponent(u))?e:r.addComponent(u);m.opacity=0,t.init(t.options),t.updateDisplay(t.options),p(f).to(.8*n,{color:{r:f.color.r,g:f.color.g,b:f.color.b,a:180}}).start();var h=v.orientation==b.HORIZONTAL?1.25:.9,g=p(r);t.showAnimation?t.showAnimation(g,m,n):g.to(n,{scale:d(h,h,1)},{easing:"backOut",onUpdate:function(o,n){m.opacity=255*Math.min(1.4*n,1)}}),g.call((function(){t.onShow&&t.onShow(),t.closeBg&&a.once(c.EventType.TOUCH_END,t.btnHide,t),i()})).start()}))},a.hide=function(o,n){var t=this;return void 0===o&&(o=!1),void 0===n&&(n=.5*this.animDuration),new Promise((function(i){var e,a=t.node;if(0!==n){var r=t.blocker;if(!r)(r=t.blocker=new c("blocker")).addComponent(s),r.setParent(a),r.addComponent(f).setContentSize(a.getComponent(f).contentSize);r.active=!0}var m=t.background.getComponent(l);p(m).delay(.2*n).to(.8*n,{color:{r:m.color.r,g:m.color.g,b:m.color.b,a:0}}).start();var b=null!=(e=t.main.getComponent(u))?e:t.main.addComponent(u),v=t.main,h=p(v);t.hideAnimation?t.hideAnimation(h,b,n):h.to(n,{scale:d(.5,.5,1)},{easing:"backIn",onUpdate:function(o,n){b.opacity=255*(1-n)}}),h.call((function(){t.blocker&&(t.blocker.active=!1),a.active=!1,t.onHide&&t.onHide(o),i(),t.finishCallback&&t.finishCallback(o)})).start()}))},a.init=function(o){},a.updateDisplay=function(o){},a.onShow=function(){},a.onHide=function(o){},a.setFinishCallback=function(o){this.finishCallback=o},n}(m)).prototype,"background",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(w.prototype,"closeBg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=n(w.prototype,"main",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=w))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/PopupManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./Config.ts"],(function(e){var t,n,r,i,a,u,o,s,c,l,p;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){i=e.cclegacy,a=e.find,u=e.warn,o=e.instantiate,s=e.isValid,c=e.resources},function(e){l=e.default},function(e){p=e.default}],execute:function(){i._RF.push({},"7d6d2Ornu5D9LTd/RNK2rx2","PopupManager",void 0);var d=function(e){return e[e.Once=1]="Once",e[e.Normal=2]="Normal",e[e.Frequent=3]="Frequent",e}(d||{}),h=function(e){return e[e.Done=1]="Done",e[e.Failed=2]="Failed",e[e.Waiting=3]="Waiting",e}(h||{}),f=e("default",function(){function e(){}return e.show=function(e,t,i){var c=this;return new Promise(n(r().mark((function d(f){var _,v,m,g;return r().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(i=c.parseParams(i),!c._current&&!c.locked){d.next=9;break}if(!i||!i.immediately){d.next=6;break}c._TempCurrent=c._current,d.next=9;break;case 6:return c.push(e,t,i),f(h.Waiting),d.abrupt("return");case 9:if(c._current={path:e,options:t,params:i},_=c.getNodeFromCache(e),s(_)){d.next=23;break}return c.loadStartCallback&&c.loadStartCallback(),d.next=15,c.load(e);case 15:if(v=d.sent,c.loadFinishCallback&&c.loadFinishCallback(),s(v)){d.next=22;break}return u("[PopupManager]","弹窗加载失败",e),c._current=void 0,f(h.Failed),d.abrupt("return");case 22:_=o(v);case 23:if(m=_.getComponent(l)){d.next=29;break}return u("[PopupManager]","未找到弹窗组件",e),c._current=void 0,f(h.Failed),d.abrupt("return");case 29:c._current.popup=m,c._current.node=_,c.container||(c.container=a(p.Popup.container)),_.setParent(c.container),_.setSiblingIndex(9999),g=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=2;break}return t.abrupt("return");case 2:return c.locked=c._suspended.length>0||c._queue.length>0,c.recycle(e,_,i.mode),c._current=void 0,c._TempCurrent=void 0,f(h.Done),t.next=9,new Promise((function(e){setTimeout(e,c.interval)}));case 9:c.next();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m.setFinishCallback(g),m.show(t);case 37:case"end":return d.stop()}}),d)}))))},e.hide=function(){var e,t;if(null!=(e=this._current)&&e.popup)this._current.popup.hide();else if(null!=(t=this._TempCurrent)&&t.popup)this._TempCurrent.popup.hide();else{var n;null==(n=this.container)||null==(n=n.getComponentsInChildren(l))||n.forEach((function(e){e.btnHide()}))}},e.hideAll=function(e){var t;void 0===e&&(e=!0),null==(t=this.container)||null==(t=t.getComponentsInChildren(l))||t.forEach((function(t){t.btnHide(e)}))},e.getNodeFromCache=function(e){var t=this._nodeCache;if(t.has(e)){var n=t.get(e);if(s(n))return n;t.delete(e)}var r=this._prefabCache;if(r.has(e)){var i=r.get(e);if(s(i))return i.addRef(),o(i);r.delete(e)}},e.next=function(){var e,t,n,r;if(!(this._current||0===this._suspended.length&&0===this._queue.length)){var i,a,u;if(i=this._queue.length>0?this._queue.shift():this._suspended.length>0?this._suspended.shift():this._queue.shift(),this.locked=!1,s(null==(e=i)?void 0:e.popup))return this._current=i,null==(a=i)||null==(a=a.node)||a.setParent(this.container),void(null==(u=i)||null==(u=u.popup)||u.show(i.options));(null==(t=i)?void 0:t.path)&&this.show(i.path,null==(n=i)?void 0:n.options,null==(r=i)?void 0:r.params)}},e.push=function(e,t,n){this._current||this.locked?n&&(this._queue.push({path:e,options:t,params:n}),this._queue.sort((function(e,t){return e.params.priority-t.params.priority}))):this.show(e,t,n)},e.suspend=function(){var e=n(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._current){e.next=2;break}return e.abrupt("return");case 2:return n=this._current,this._suspended.push(n),e.next=6,null==(t=n.popup)?void 0:t.hide(!0);case 6:this._current=void 0;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.recycle=function(e,t,n){switch(n){case d.Once:this._nodeCache.delete(e),t.destroy(),this.release(e);break;case d.Normal:this._nodeCache.delete(e),t.destroy();break;case d.Frequent:t.removeFromParent(),this._nodeCache.set(e,t)}},e.load=function(e){var t=this;return new Promise((function(n){var r=t._prefabCache;if(r.has(e)){var i=r.get(e);if(s(i))return void n(i);r.delete(e)}c.load(e,(function(t,i){t?n(void 0):(r.set(e,i),n(i))}))}))},e.release=function(e){var t=this._nodeCache,n=t.get(e);n&&(t.delete(e),s(n)&&n.destroy(),n=void 0);var r=this._prefabCache,i=r.get(e);i&&(i.refCount<=1&&r.delete(e),i.decRef(),i=void 0)},e.parseParams=function(e){return null==e?new _:"[object Object]"!==Object.prototype.toString.call(e)?(u("[PopupManager]","弹窗参数无效，使用默认参数"),new _):(null==e.mode&&(e.mode=d.Normal),null==e.priority&&(e.priority=0),null==e.immediately&&(e.immediately=!1),e)},t(e,null,[{key:"prefabCache",get:function(){return this._prefabCache}},{key:"nodeCache",get:function(){return this._nodeCache}},{key:"current",get:function(){return this._current}},{key:"queue",get:function(){return this._queue}},{key:"suspended",get:function(){return this._suspended}},{key:"CacheMode",get:function(){return d}},{key:"ShowResult",get:function(){return h}}]),e}());f._prefabCache=new Map,f._nodeCache=new Map,f._current=void 0,f._queue=[],f._suspended=[],f.locked=!1,f.container=null,f.interval=.05,f._TempCurrent=void 0,f.loadStartCallback=void 0,f.loadFinishCallback=void 0;var _=e("PopupParamsType",(function(){this.mode=d.Normal,this.priority=0,this.immediately=!1}));i._RF.pop()}}}));

System.register("chunks:///_virtual/PropItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts"],(function(n){var t,e,i,o,r,a,c,l,u,s,d,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.Label,l=n.Node,u=n.Button,s=n.EventHandler,d=n.Component},function(n){p=n.default}],execute:function(){var f,h,b,g,v,y,m,C,N,k,w,I,L;r._RF.push({},"5a555tIIvNDOKSj/Hiv8s4U","PropItem",void 0);var z=a.ccclass,A=a.property;n("PropItem",(f=z("PropItem"),h=A(c),b=A(c),g=A(l),v=A(l),y=A(l),f((N=t((C=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"coinLabel",N,o(t)),i(t,"countLabel",k,o(t)),i(t,"adNode",w,o(t)),i(t,"coinNode",I,o(t)),i(t,"typesNode",L,o(t)),t._callback=function(){},t.config=null,t}e(t,n);var r=t.prototype;return r.init=function(n){this.config=n,this.setCoin(n.coin),this.setAd(n.buyAd),this.updateCount(),this.setButtons(),this.showType(n.id),this.changeAdBtn(p.adEnable)},r.changeAdBtn=function(n){this.adNode.active=n},r.onClick=function(n,t){this._callback(this.config,t)},r.onClickCallback=function(n){this._callback=n},r.showType=function(n){n&&this.typesNode.children.forEach((function(t){t.active=t.name==n}))},r.setButtons=function(){var n=this;this.node.getComponentsInChildren(u).forEach((function(t){var e=new s;e.target=n.node,e.component="PropItem",e.handler="onClick",e.customEventData="btnAd"==t.node.name?"ad":"coin",t.clickEvents[0]=e}))},r.setCoin=function(n){var t;this.coinNode.active=null!=n,this.coinLabel.string=null!=(t=null==n?void 0:n.toString())?t:""},r.setAd=function(n){this.adNode.active=null!=n&&n},r.updateCount=function(){var n=this.config.count;this.countLabel.string="x"+n},t}(d)).prototype,"coinLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(C.prototype,"countLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(C.prototype,"adNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(C.prototype,"coinNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(C.prototype,"typesNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=C))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/PropOnePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./Config.ts","./LogicData.ts","./Ad.ts","./PopupManager.ts","./EventManager.ts","./Constant.ts","./Utils.ts","./TimeManager.ts","./l10n.ts","./LogicScene.ts","./UI.ts","./LogicAudio.ts","./l10n-manager.ts"],(function(t){var i,n,e,o,a,r,u,l,p,s,c,d,f,h,b,v,y,g,m,P,L,w,C,N;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,u=t.Label,l=t.Node,p=t.find},function(t){s=t.default},function(t){c=t.default,d=t.PropConfigs,f=t.GameDataConfig},function(t){h=t.default},function(t){b=t.Ad},function(t){v=t.default},function(t){y=t.default},function(t){g=t.Constant},function(t){m=t.default},function(t){P=t.TimeManager},null,function(t){L=t.default},function(t){w=t.UI},function(t){C=t.default},function(t){N=t.default}],execute:function(){var _,B,H,z,T,D,E,U,k,A,M,S,x,O,F,G,I,R,j,K,V;a._RF.push({},"6ebf4ZRtn5AsrjdChsM/waL","PropOnePopup",void 0);var Z=r.ccclass,q=r.property;t("PropOnePopup",(_=Z("PropOnePopup"),B=q(u),H=q(u),z=q(l),T=q(u),D=q(u),E=q(l),U=q(l),k=q(u),A=q(u),_((x=i((S=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,e(i,"titleLabel",x,o(i)),e(i,"tipLabel",O,o(i)),e(i,"typesNode",F,o(i)),e(i,"countLabel",G,o(i)),e(i,"coin",I,o(i)),e(i,"normalNode",R,o(i)),e(i,"hpNode",j,o(i)),e(i,"hpCurrentLabel",K,o(i)),e(i,"hpDateLabel",V,o(i)),i._data=void 0,i._isBuy=!1,i}n(i,t);var a=i.prototype;return a.init=function(){var t,i,n=this;this.changeAdBtn(c.adEnable),this._isBuy=!1;var e=d.find((function(t){var i;return t.id==(null==(i=n.options)?void 0:i.id)}));if(this.hpNode.active="hp"==(null==(t=this.options)?void 0:t.id),this.normalNode.active=!this.hpNode.active,"hp"==(null==(i=this.options)?void 0:i.id))return this.titleLabel.string=N.t("textHp"),y.on(g.EventPopup.UpdateHp,this.updateHp,this),void this.updateHp();if(e){this._data=e,this.titleLabel.string=N.t(e.l10nKey),this.countLabel.string="x"+e.count,this.showType(e.id),this.tipLabel.string=N.t(e.l10nTipKey);var o=null!=e.coin;this.node.parent.active=o,o&&(this.coin.string=e.coin.toString())}},a.changeAdBtn=function(t){p("button/ad",this.normalNode).active=t,p("frame7",this.hpNode).active=t,console.log(p("frame7",this.hpNode))},a.onDestroy=function(){y.off(g.EventPopup.UpdateHp,this.updateHp,this)},a.btnBuy=function(t,i){var n,e=this;if(C.playClick(),this._data)if("coin"==i){var o=h.buyProp(this._data);"success"==o?this.onBuyCallback():"nocoin"==o&&w.instance.showTip(N.t("msgNoCoin"))}else b.instance.showVideo((function(){h.addProp(e._data),e.onBuyCallback()}));else if("hp"==(null==(n=this.options)?void 0:n.id))if("coin"==i){var a=h.buyHp();"success"==a?this.onBuyCallback(1):"nocoin"==a&&w.instance.showTip(N.t("msgNoCoin"))}else b.instance.showVideo((function(){h.incrbyHp(f.hp.ad),e.onBuyCallback(f.hp.ad)}))},a.onHide=function(){if("Game"==L.current){var t;if(this._isBuy)return;if("hp"==(null==(t=this.options)?void 0:t.id))return;P.instance.continue()}},a.updateHp=function(t,i,n){if(this.node.active){if(null==t||null==i||null==n){var e=h.recoverHpByTimestamp();t=e.time,i=e.current,n=e.isFull}var o=m.formatSeconds(t);n&&(o="max"),this.hpDateLabel.string=o,this.hpCurrentLabel.string=i.toString()}},a.onBuyCallback=function(t){var i;this.hide(!1,0),null!=(i=this.options)&&i.id&&(this._isBuy=!0,"hp"==this.options.id?v.show("prefabs/popup/PopupPropTips",{id:"hp",count:t}):this._data?v.show("prefabs/popup/PopupPropTips",[this._data]):console.error("this._data no")),y.emit(g.EventHome.UpdateCoin),y.emit(g.EventHome.UpdateHp),y.emit(g.EventGame.UpdateProp),y.emit(g.EventPopup.UpdateProp)},a.showType=function(t){t&&this.typesNode.children.forEach((function(i){i.active=i.name==t}))},i}(s)).prototype,"titleLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(S.prototype,"tipLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(S.prototype,"typesNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(S.prototype,"countLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(S.prototype,"coin",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(S.prototype,"normalNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(S.prototype,"hpNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(S.prototype,"hpCurrentLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(S.prototype,"hpDateLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=S))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/PropPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./PopupBase.ts","./Config.ts","./Ad.ts","./EventManager.ts","./LogicData.ts","./PropItem.ts","./PopupManager.ts","./UI.ts","./l10n.ts","./LogicAudio.ts","./l10n-manager.ts"],(function(t){var n,o,i,e,r,a,u,p,s,c,l,f,d,P,h,b,y,m,g,v,C;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,u=t._decorator,p=t.Prefab,s=t.Node,c=t.instantiate},function(t){l=t.Constant},function(t){f=t.default},function(t){d=t.PropConfigs},function(t){P=t.Ad},function(t){h=t.default},function(t){b=t.default},function(t){y=t.PropItem},function(t){m=t.default},function(t){g=t.UI},null,function(t){v=t.default},function(t){C=t.default}],execute:function(){var I,L,k,w,B,z,A;a._RF.push({},"ad4dfXkw6VJqZe7nJOqtbgu","PropPopup",void 0);var D=u.ccclass,T=u.property;t("PropPopup",(I=D("PropPopup"),L=T(p),k=T(s),I((z=n((B=function(t){function n(){for(var n,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"propItemPrefab",z,e(n)),i(n,"propList",A,e(n)),n}o(n,t);var a=n.prototype;return a.onBuy=function(t,n){var o=this;if(v.playClick(),"coin"==n){var i=b.buyProp(t);"success"==i?this.onBuyCallback(t):"nocoin"==i?g.instance.showTip(C.t("msgNoCoin")):g.instance.showTip(C.t("msgNoBuy"))}"ad"==n&&P.instance.showVideo((function(){b.addProp(t),o.onBuyCallback(t)}))},a.onBuyCallback=function(t){m.show("prefabs/popup/PopupPropTips",[t],{immediately:!0}),h.emit(l.EventHome.UpdateCoin)},a.init=function(){this.initPropList()},a.initPropList=function(){for(var t,n=r(d);!(t=n()).done;){var o=t.value;o.hide||this.createItem(o)}},a.createItem=function(t){var n=c(this.propItemPrefab);this.propList.addChild(n);var o=n.getComponent(y);return null==o||o.init(t),null==o||o.onClickCallback(this.onBuy.bind(this)),n},n}(f)).prototype,"propItemPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(B.prototype,"propList",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=B))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/PropRewardPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./PopupBase.ts","./Config.ts","./Ad.ts","./EventManager.ts","./PopupManager.ts","./Utils.ts","./LogicAudio.ts","./LogicData.ts","./UI.ts","./l10n-manager.ts"],(function(t){var e,n,o,i,a,u,r,c,d,s,l,p,f,h,v,b,g,y,w,m,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.extends},function(t){u=t.cclegacy,r=t._decorator,c=t.Label,d=t.Node},null,function(t){s=t.Constant},function(t){l=t.default},function(t){p=t.default,f=t.PropConfigs},function(t){h=t.Ad},function(t){v=t.default},function(t){b=t.default},function(t){g=t.default},function(t){y=t.default},function(t){w=t.default},function(t){m=t.UI},function(t){P=t.default}],execute:function(){var N,B,C,R,A,E,k,L,D;u._RF.push({},"91da7pASYVDDqcjXOHHcy4j","PropRewardPopup",void 0);var T=r.ccclass,U=r.property;t("PropRewardPopup",(N=T("PropRewardPopup"),B=U(c),C=U(d),R=U(d),N((k=e((E=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a))||this,o(e,"dateLabel",k,i(e)),o(e,"buttonNode",L,i(e)),o(e,"typesNode",D,i(e)),e}n(e,t);var u=e.prototype;return u.init=function(){this.updateTimeAndButton(),this.showValues(),v.on(s.EventPopup.UpdateReward,this.updateTimeAndButton,this),this.changeAdBtn(p.adEnable)},u.changeAdBtn=function(t){this.buttonNode.getChildByName("ad").active=t},u.onDestroy=function(){v.off(s.EventPopup.UpdateReward,this.updateTimeAndButton,this)},u.btnReceive=function(t,e){var n=this;if(y.playClick(),"ad"==e)h.instance.showVideo((function(){var t=w.giveReward(!0);t&&n.onBuyCallback(t)}));else{var o=w.giveReward();o?this.onBuyCallback(o):m.instance.showTip(P.t("msgNoReward"))}},u.onBuyCallback=function(t){this.hide(!1,0);var e=[];t.content.forEach((function(t){var n=f.find((function(e){return e.id==t.id}));n&&e.push(a({},n,{count:t.count}))})),b.show("prefabs/popup/PopupPropTips",e),v.emit(s.EventHome.UpdateCoin),v.emit(s.EventPopup.RewardOnBuyCallback)},u.updateTimeAndButton=function(){var t=w.getRewardInfo();t?(this.buttonNode.active=!0,this.dateLabel.string=g.formatSeconds(t.time),this.buttonNode.getChildByName("ad").active=!t.isok&&p.adEnable,this.buttonNode.getChildByName("reward").active=t.isok):this.buttonNode.active=!1},u.showValues=function(){var t=w.getRewardInfo();this.typesNode.active=!!t,this.typesNode.children.forEach((function(e){var n,o=null==t?void 0:t.content.find((function(t){return t.id==e.name}));(e.active=!!o,e.active)&&((null==(n=e.getChildByName("count"))?void 0:n.getComponent(c)).string="x"+o.count)}))},e}(l)).prototype,"dateLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(E.prototype,"buttonNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(E.prototype,"typesNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=E))||A));u._RF.pop()}}}));

System.register("chunks:///_virtual/PropTipsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupBase.ts","./LogicScene.ts","./TimeManager.ts","./LogicAudio.ts"],(function(t){var i,n,o,e,r,s,a,p,u,c,l,h,d,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,p=t.Label,u=t.Layout,c=t.UITransform},function(t){l=t.default},function(t){h=t.default},function(t){d=t.TimeManager},function(t){f=t.default}],execute:function(){var y,v,g,m,P;r._RF.push({},"d6e42mR8GNClqO788bkGUrn","PropTipsPopup",void 0);var N=s.ccclass,A=s.property;t("PropTipsPopup",(y=N("PropTipsPopup"),v=A(a),y((P=i((m=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,o(i,"typesNode",P,e(i)),i}n(i,t);var r=i.prototype;return r.init=function(){this.showHp()||this.showValues(),this.updateLayout(),f.playPropTip()},r.onHide=function(){if(f.playClick(),"Game"==h.current){var t;if(!Array.isArray(this.options)&&"hp"==(null==(t=this.options)?void 0:t.id))return;if(Array.isArray(this.options)&&this.options.length>=3)return;d.instance.continue()}},r.showValues=function(){var t=this;this.options&&Array.isArray(this.options)&&this.typesNode.children.forEach((function(i){var n,o=t.options.find((function(t){return t.id==i.name}));(i.active=!!o,i.active)&&((null==(n=i.getChildByName("count"))?void 0:n.getComponent(p)).string="x"+(null==o?void 0:o.count))}))},r.showHp=function(){if(this.options&&!Array.isArray(this.options)){var t="x"+this.options.count;return this.typesNode.children.forEach((function(i){var n;(i.active="hp"==i.name,i.active)&&((null==(n=i.getChildByName("count"))?void 0:n.getComponent(p)).string=t)})),!0}},r.updateLayout=function(){var t=this.typesNode.children.filter((function(t){return t.active})).length,i=Math.min(620,155*t),n=this.typesNode.getComponent(u);this.typesNode.getComponent(c).width=i,n.updateLayout()},i}(l)).prototype,"typesNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/Random.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LogicData.ts","./BSingleton.ts"],(function(n){var t,e,o,r,a,u,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n.randomRangeInt,r=n.pseudoRandomRange,a=n.js},function(n){u=n.default},function(n){i=n.default}],execute:function(){e._RF.push({},"942cat3oxpFTI0MFsRuxUJz","Random",void 0);var s=Math.pow(2,32)-1;n("default",function(n){function e(){var t;return(t=n.call(this)||this).seed=0,t.init(u.data.init.randomSeed),t}t(e,n);var i=e.prototype;return i.init=function(n){var t=(1103515245*u.runData.level+123456789)%s+(1103515245*n+123456789)%s;this.seed=t},i.randomSystemRangeInt=function(n,t){return o(n,t)},i.pseudo=function(n,t){var e=(1103515245*this.seed+123456789)%s;return this.seed=e,r(this.seed,n,t)},i.pseudoInt=function(n,t){return Math.floor(this.pseudo(n,t))},i.arrayRandom=function(n){var t=this,e=a.array.copy(n);return{random:function(){0===e.length&&(e=a.array.copy(n));var o=t.pseudoInt(0,e.length);return e.splice(o,1)[0]}}},e}(i.Instance0()));e._RF.pop()}}}));

System.register("chunks:///_virtual/resource-data-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localization-global.ts"],(function(r){var e,n,t,u,a,s,c,o,i,p,f;return{setters:[function(r){e=r.asyncToGenerator,n=r.regeneratorRuntime},function(r){t=r.cclegacy,u=r.settings,a=r.Settings,s=r.assetManager},function(r){c=r.resourceListPath,o=r.pluginName,i=r.resourceBundlePath,p=r.mainName,f=r.runtimeBundleName}],execute:function(){t._RF.push({},"0a95a0kirtJnJnMnZWSRaFn","resource-data-manager",void 0);r("default",function(){function r(){}var t=r.prototype;return t.readResourceList=function(){var r=e(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=4;break;case 4:return console.log("["+o+"] this is build env"),r.abrupt("return",this.runtimeLoad(c));case 9:return r.abrupt("return",this.previewLoad(c));case 10:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),t.readResourceBundle=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=4;break;case 4:return r.abrupt("return",this.runtimeLoad(i));case 8:return r.abrupt("return",this.previewLoad(i));case 9:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),t.editorLoad=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Editor.Message.request(p,"get-resource-bundle",e));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t.runtimeLoad=function(){var r=e(n().mark((function r(e){var t,u;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getBundle(f);case 2:if(t=r.sent){r.next=5;break}return r.abrupt("return",void 0);case 5:return r.next=7,this.getResource(t,e);case 7:if((u=r.sent)&&u.json){r.next=10;break}return r.abrupt("return",void 0);case 10:return r.abrupt("return",u.json);case 11:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),t.previewLoad=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch(p+"/"+e);case 3:return r.next=5,r.sent.json();case 5:return r.abrupt("return",r.sent);case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",void 0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}(),t.checkBundle=function(){var r=e(n().mark((function r(e){var t,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=u.querySettings(a.Category.ASSETS,"preloadBundles"),s=null==t?void 0:t.find((function(r){return r.bundle===e})),r.abrupt("return",!!s);case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t.getBundle=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){s.loadBundle(e,(function(e,n){r(e?void 0:n)}))})));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t.getResource=function(){var r=e(n().mark((function r(e,t){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){e.load(t,(function(e,n){r(e?void 0:n)}))})));case 1:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SettingPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./PopupBase.ts","./Ad.ts","./EventManager.ts","./TimeManager.ts","./LogicAudio.ts","./LogicData.ts","./LogicScene.ts"],(function(t){var i,n,o,e,s,u,a,c,r,p,l,h,f,d,g,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,u=t._decorator,a=t.Node,c=t.UITransform},function(t){r=t.Constant},function(t){p=t.default},function(t){l=t.Ad},function(t){h=t.default},function(t){f=t.TimeManager},function(t){d=t.default},function(t){g=t.default},function(t){m=t.default}],execute:function(){var v,y,b,S,N,C,D,w,M,P,z;s._RF.push({},"e5917Fu9rhJ6KY9fd4+XDBt","SettingPopup",void 0);var k=u.ccclass,B=u.property;t("SettingPopup",(v=k("SettingPopup"),y=B(a),b=B(a),S=B(a),N=B(c),v((w=i((D=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return i=t.call.apply(t,[this].concat(s))||this,o(i,"nSound",w,e(i)),o(i,"nMusic",M,e(i)),o(i,"nNav",P,e(i)),o(i,"uibg",z,e(i)),i}n(i,t);var s=i.prototype;return s.init=function(){this.options||(this.options={}),this.options.isNav||(this.options.isNav=!1),this.options.option||(this.options.option=g.data.settings),this.nNav.active=this.options.isNav;var t=this.main.getComponent(c);this.uibg.height=t.height=this.options.isNav?550:400,this.updateDisplay()},s.onHide=function(){"Game"==m.current&&f.instance.continue()},s.btnMusic=function(){d.playClick();var t=this.options.option;this.options.option={sound:t.sound,music:!t.music},g.setSettings(this.options.option),this.updateDisplay(),d.setVolume(g.settings.music,g.settings.sound)},s.btnSound=function(){d.playClick();var t=this.options.option;this.options.option={sound:!t.sound,music:t.music},g.setSettings(this.options.option),this.updateDisplay(),d.setVolume(g.settings.music,g.settings.sound)},s.btnHome=function(){d.playClick(),m.instance.toHome(),this.hide(!1,0)},s.btnReset=function(){d.playClick(),g.isHpEmpty||l.instance.showFullScreen(),h.emit(r.EventGame.GameRestart)},s.updateDisplay=function(){var t=this,i=this.nSound.getChildByName("btnSwitch");null==i||i.children.forEach((function(i){"on"==i.name?i.active=t.options.option.sound:i.active=!t.options.option.sound}));var n=this.nMusic.getChildByName("btnSwitch");null==n||n.children.forEach((function(i){"on"==i.name?i.active=t.options.option.music:i.active=!t.options.option.music}))},i}(p)).prototype,"nSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(D.prototype,"nMusic",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(D.prototype,"nNav",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(D.prototype,"uibg",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=D))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/TimeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BSingleton.ts","./Utils.ts","./Crazy.ts"],(function(t){var i,n,e,s,a,u,c;return{setters:[function(t){i=t.inheritsLoose,n=t.createClass},function(t){e=t.cclegacy,s=t.tween},function(t){a=t.default},function(t){u=t.default},function(t){c=t.Crazy}],execute:function(){e._RF.push({},"540d9oPPBdLrJnzassUOtCk","TimeManager",void 0);t("TimeManager",function(t){function e(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this)._time=0,i._timeLabel=null,i._isRun=!1,i._callback=function(){},i._tween=null,i._incrby=-1,i}i(e,t);var a=e.prototype;return a.init=function(t){this._timeLabel=t},a.start=function(t,i,n){void 0===i&&(i=-1),this._incrby=i,this._time=t,this._callback=n,this._isRun=!0,this._tween&&this._tween.stop(),this.updateTime(),c.instance.game.playStart()},a.incrby=function(t){this._time+=t,this._isRun||(c.instance.game.playStart(),this._isRun=!0,this.updateTime())},a.stop=function(){var t;this._isRun&&c.instance.game.playStop(),null==(t=this._tween)||t.stop(),this._isRun=!1},a.continue=function(){this._time<=0||this._isRun||(c.instance.game.playStart(),this._isRun=!0,this.updateTime())},a.updateTime=function(){if(this._isRun&&this._timeLabel){var t;if(this._time+=this._incrby,this._timeLabel.string=u.formatSeconds(this._time).toString(),this._time<=0)return c.instance.game.playStop(),this._isRun=!1,void(null==(t=this._callback)||t.call(this));this._tween=s(this).delay(1).call(this.updateTime.bind(this)).start()}},n(e,[{key:"duration",get:function(){return this._time}}]),e}(a.Instance0()));e._RF.pop()}}}));

System.register("chunks:///_virtual/UI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BSingleton.ts","./UITip.ts"],(function(i){var t,e,n,o,r,a,l,u,s,c,p,d,f;return{setters:[function(i){t=i.inheritsLoose,e=i.applyDecoratedDescriptor,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,l=i.Prefab,u=i.Node,s=i.instantiate,c=i.Tween,p=i.tween},function(i){d=i.default},function(i){f=i.UITip}],execute:function(){var h,g,y,v,T,b,L,w,m;r._RF.push({},"752798EUb5NhKJtEjMOvCA+","UI",void 0);var I=a.ccclass,N=a.property;i("UI",(h=I("UI"),g=N(l),y=N(u),v=N(u),h((b=function(i){function e(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r))||this,n(t,"uiTips",L,o(t)),n(t,"uiTipsNode",w,o(t)),n(t,"Loading",m,o(t)),t}t(e,i);var r=e.prototype;return r.onLoad=function(){i.prototype.onLoad.call(this),this.Loading.active=!1},r.showTip=function(i,t){void 0===t&&(t=1);var e=s(this.uiTips);e.parent=this.uiTipsNode,e.getComponent(f).show(i,t)},r.closeTipAll=function(){this.uiTipsNode.destroyAllChildren()},r.showLoading=function(){var i=this.Loading.getChildByName("rotation");i&&(c.stopAllByTarget(i),p(i).by(1,{angle:-360}).repeatForever().start()),this.Loading.active=!0},r.hideLoading=function(){this.Loading.active=!1},e}(d.Complete()),L=e(b.prototype,"uiTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(b.prototype,"uiTipsNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(b.prototype,"Loading",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=b))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/UITip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./LogicData.ts"],(function(t){var i,e,n,o,a,r,c,s,l,u,p,y,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,c=t.Label,s=t.UIOpacity,l=t.tween,u=t.v3,p=t.Component},function(t){y=t.ScreenOrientation},function(t){h=t.GlobalGame}],execute:function(){var d,f,g,b,v,O,m;a._RF.push({},"3b5a2xmTLJHm5cWMuynyxkM","UITip",void 0);var L=r.ccclass,I=r.property;t("UITip",(d=L("UITip"),f=I(c),g=I(s),d((O=i((v=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,n(i,"msgLabel",O,o(i)),n(i,"uiOpacity",m,o(i)),i}return e(i,t),i.prototype.show=function(t,i){var e=this;void 0===i&&(i=1);var n=this;this.uiOpacity.opacity=0,this.msgLabel.string=t;var o=h.orientation==y.HORIZONTAL?1.25:1;this.node.setScale(o,o,o),this.node.layer=0,this.node.setSiblingIndex(this.node.parent.children.length),this.node.setPosition(0,-200),l(this.node).to(.2,{position:u(0,100)},{easing:"quartOut",onUpdate:function(t,i){n.uiOpacity.opacity=255*i}}).delay(i).call((function(){l(e.uiOpacity).to(.2,{opacity:0},{easing:"sineOut"}).call((function(){e.node.destroy()})).start()})).start()},i}(p)).prototype,"msgLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(v.prototype,"uiOpacity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc","./Random.ts"],(function(r){var t,n,e,o;return{setters:[function(r){t=r.cclegacy,n=r.v2,e=r.tween},function(r){o=r.default}],execute:function(){t._RF.push({},"f422alXxwlBcZ3elaI84ZJZ","Utils",void 0);r("default",function(){function r(){}return r.bezierTo=function(r,t,o,a,u,f){f=f||Object.create(null);return f.onUpdate=function(t,e){var f,i,c,h,g,l;r.worldPosition=(c=a,h=u,g=(1-(f=e))*(1-f)*(i=o).x+2*f*(1-f)*c.x+f*f*h.x,l=(1-f)*(1-f)*i.y+2*f*(1-f)*c.y+f*f*h.y,n(g,l))},e(r).to(t,{},f)},r.xor=function(r,t,n){for(var e="",o=0;o<r.length;o++)e+=n?String.fromCharCode(r.charCodeAt(o)^t.charCodeAt(o%t.length)^n):String.fromCharCode(r.charCodeAt(o)^t.charCodeAt(o%t.length));return e},r.randomString=function(r){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",e=0;e<r;e++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},r.hashCode=function(r){var t=0;if(0==r.length)return t;for(var n=0;n<r.length;n++){t=(t<<16)-t+r.charCodeAt(n),t&=t}return Math.abs(t)},r.formatSeconds=function(r){var t=Math.floor(r/60),n=r%60;return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)},r.getRandomObj=function(r){var t=Object.keys(r);return r[t[o.instance.pseudoInt(0,t.length)]]},r.isSameDayAsCurrent=function(r){void 0===r&&(r=0);var t=new Date,n=new Date(1e3*r);return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()},r.getTimestamp=function(){return Math.floor(Date.now()/1e3)},r.md5=function(r){function t(r,t){return r<<t|r>>>32-t}function n(r,t){var n,e,o,a,u;return o=2147483648&r,a=2147483648&t,u=(1073741823&r)+(1073741823&t),(n=1073741824&r)&(e=1073741824&t)?2147483648^u^o^a:n|e?1073741824&u?3221225472^u^o^a:1073741824^u^o^a:u^o^a}function e(r,e,o,a,u,f,i){return r=n(r,n(n(function(r,t,n){return r&t|~r&n}(e,o,a),u),i)),n(t(r,f),e)}function o(r,e,o,a,u,f,i){return r=n(r,n(n(function(r,t,n){return r&n|t&~n}(e,o,a),u),i)),n(t(r,f),e)}function a(r,e,o,a,u,f,i){return r=n(r,n(n(function(r,t,n){return r^t^n}(e,o,a),u),i)),n(t(r,f),e)}function u(r,e,o,a,u,f,i){return r=n(r,n(n(function(r,t,n){return t^(r|~n)}(e,o,a),u),i)),n(t(r,f),e)}function f(r){var t,n="",e="";for(t=0;t<=3;t++)n+=(e="0"+(r>>>8*t&255).toString(16)).substr(e.length-2,2);return n}var i,c,h,g,l,d,C,s,v,m=Array();for(m=function(r){for(var t,n=r.length,e=n+8,o=16*((e-e%64)/64+1),a=Array(o-1),u=0,f=0;f<n;)u=f%4*8,a[t=(f-f%4)/4]=a[t]|r.charCodeAt(f)<<u,f++;return u=f%4*8,a[t=(f-f%4)/4]=a[t]|128<<u,a[o-2]=n<<3,a[o-1]=n>>>29,a}(r=function(r){r=r.replace(/\r\n/g,"\n");for(var t="",n=0;n<r.length;n++){var e=r.charCodeAt(n);e<128?t+=String.fromCharCode(e):e>127&&e<2048?(t+=String.fromCharCode(e>>6|192),t+=String.fromCharCode(63&e|128)):(t+=String.fromCharCode(e>>12|224),t+=String.fromCharCode(e>>6&63|128),t+=String.fromCharCode(63&e|128))}return t}(r)),d=1732584193,C=4023233417,s=2562383102,v=271733878,i=0;i<m.length;i+=16)c=d,h=C,g=s,l=v,d=e(d,C,s,v,m[i+0],7,3614090360),v=e(v,d,C,s,m[i+1],12,3905402710),s=e(s,v,d,C,m[i+2],17,606105819),C=e(C,s,v,d,m[i+3],22,3250441966),d=e(d,C,s,v,m[i+4],7,4118548399),v=e(v,d,C,s,m[i+5],12,1200080426),s=e(s,v,d,C,m[i+6],17,2821735955),C=e(C,s,v,d,m[i+7],22,4249261313),d=e(d,C,s,v,m[i+8],7,1770035416),v=e(v,d,C,s,m[i+9],12,2336552879),s=e(s,v,d,C,m[i+10],17,4294925233),C=e(C,s,v,d,m[i+11],22,2304563134),d=e(d,C,s,v,m[i+12],7,1804603682),v=e(v,d,C,s,m[i+13],12,4254626195),s=e(s,v,d,C,m[i+14],17,2792965006),d=o(d,C=e(C,s,v,d,m[i+15],22,1236535329),s,v,m[i+1],5,4129170786),v=o(v,d,C,s,m[i+6],9,3225465664),s=o(s,v,d,C,m[i+11],14,643717713),C=o(C,s,v,d,m[i+0],20,3921069994),d=o(d,C,s,v,m[i+5],5,3593408605),v=o(v,d,C,s,m[i+10],9,38016083),s=o(s,v,d,C,m[i+15],14,3634488961),C=o(C,s,v,d,m[i+4],20,3889429448),d=o(d,C,s,v,m[i+9],5,568446438),v=o(v,d,C,s,m[i+14],9,3275163606),s=o(s,v,d,C,m[i+3],14,4107603335),C=o(C,s,v,d,m[i+8],20,1163531501),d=o(d,C,s,v,m[i+13],5,2850285829),v=o(v,d,C,s,m[i+2],9,4243563512),s=o(s,v,d,C,m[i+7],14,1735328473),d=a(d,C=o(C,s,v,d,m[i+12],20,2368359562),s,v,m[i+5],4,4294588738),v=a(v,d,C,s,m[i+8],11,2272392833),s=a(s,v,d,C,m[i+11],16,1839030562),C=a(C,s,v,d,m[i+14],23,4259657740),d=a(d,C,s,v,m[i+1],4,2763975236),v=a(v,d,C,s,m[i+4],11,1272893353),s=a(s,v,d,C,m[i+7],16,4139469664),C=a(C,s,v,d,m[i+10],23,3200236656),d=a(d,C,s,v,m[i+13],4,681279174),v=a(v,d,C,s,m[i+0],11,3936430074),s=a(s,v,d,C,m[i+3],16,3572445317),C=a(C,s,v,d,m[i+6],23,76029189),d=a(d,C,s,v,m[i+9],4,3654602809),v=a(v,d,C,s,m[i+12],11,3873151461),s=a(s,v,d,C,m[i+15],16,530742520),d=u(d,C=a(C,s,v,d,m[i+2],23,3299628645),s,v,m[i+0],6,4096336452),v=u(v,d,C,s,m[i+7],10,1126891415),s=u(s,v,d,C,m[i+14],15,2878612391),C=u(C,s,v,d,m[i+5],21,4237533241),d=u(d,C,s,v,m[i+12],6,1700485571),v=u(v,d,C,s,m[i+3],10,2399980690),s=u(s,v,d,C,m[i+10],15,4293915773),C=u(C,s,v,d,m[i+1],21,2240044497),d=u(d,C,s,v,m[i+8],6,1873313359),v=u(v,d,C,s,m[i+15],10,4264355552),s=u(s,v,d,C,m[i+6],15,2734768916),C=u(C,s,v,d,m[i+13],21,1309151649),d=u(d,C,s,v,m[i+4],6,4149444226),v=u(v,d,C,s,m[i+11],10,3174756917),s=u(s,v,d,C,m[i+2],15,718787259),C=u(C,s,v,d,m[i+9],21,3951481745),d=n(d,c),v=n(v,l),s=n(s,g),C=n(C,h);return(f(d)+f(v)+f(s)+f(C)).toLowerCase()},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/WeChat.ts",["cc","./Config.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"56e859ksSxD94K7gJrWw1Nk","WeChat",void 0);var i=function(){function t(t){var n=this;if(this.rewarded=void 0,this.interstitial=void 0,this.banner=void 0,t.videoId&&(this.rewarded=wx.createRewardedVideoAd({adUnitId:t.videoId})),t.interstitialId&&(this.interstitial=wx.createInterstitialAd({adUnitId:t.interstitialId})),t.bannerId){var e=wx.getWindowInfo();this.banner=wx.createBannerAd({adUnitId:t.bannerId,adIntervals:30,style:{left:(e.windowWidth-300)/2,top:e.windowHeight-100,width:300,height:100}}),this.banner.onResize((function(t){n.banner.left=(e.windowWidth-t.width)/2,n.banner.top=e.windowHeight-t.height})),this.banner.onError((function(t){console.error("banner",t)}))}}var n=t.prototype;return n.showRewardVideo=function(t){var n=this;this.rewarded&&(this.rewarded.load().then((function(){return n.rewarded.show()})).catch((function(t){wx.showToast({title:"广告加载失败",icon:"error"}),console.error("激励",t)})),this.rewarded.onClose((function(e){n.rewarded.offClose(),e.isEnded&&t()})),this.rewarded.onError((function(t){n.rewarded.offError(),console.error(t.errMsg)})))},n.showInterstitial=function(){var t=this;this.interstitial&&this.interstitial.load().then((function(){return t.interstitial.show()})).catch((function(t){console.error("插屏",t)}))},n.showBanner=function(){var t;null==(t=this.banner)||t.show()},n.hideBanner=function(){var t;null==(t=this.banner)||t.hide()},t}(),r=function(){function t(){}var n=t.prototype;return n.getData=function(t){var n=0;return new Promise((function(e,i){!function i(){wx.getUserCloudStorage({keyList:t,success:function(t){wx.hideLoading({}),e(t.KVDataList)},fail:function(){n++,wx.showLoading({title:"获取数据失败,重试中..."+n}),setTimeout((function(){i()}),1e3)}})}()}))},n.setData=function(t){return new Promise((function(n){wx.setUserCloudStorage({KVDataList:t,success:function(){n(!0)},fail:function(){n(!1)}})}))},n.removeData=function(t){return new Promise((function(n){wx.removeUserCloudStorage({keyList:t,success:function(){n(!0)},fail:function(){n(!1)}})}))},t}();t("default",new function(){this.ad=void 0,this.data=void 0,this.ad=new i(e.wechatAd),this.data=new r});n._RF.pop()}}}));

System.register("chunks:///_virtual/Yandex.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./UI.ts","./l10n-manager.ts"],(function(e){var n,t,r,o,i,a,s,u;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e.game,a=e.log},null,function(e){s=e.UI},function(e){u=e.default}],execute:function(){o._RF.push({},"685c9QfRzFJBICCfhoDZuli","Yandex",void 0);var d=function(){function e(){this.isAdPlay=!1,this.isReady=!1}var n=e.prototype;return n.showVideo=function(e,n){var t=this;if(this.isAdPlay)return n(u.t("loading"));this.isAdPlay=!0,s.instance.showLoading();var r=!1,o=!1,d=function(){o=!1,r=!1,t.isAdPlay=!1,i.isPaused()&&i.resume(),s.instance.hideLoading()};window.ysdk&&window.ysdk.adv.showRewardedVideo({callbacks:{onOpen:function(){o=!0,i.pause(),a("Video ad open."),window._prevAdTime=i.totalTime},onRewarded:function(){a("Rewarded!"),r=!0},onClose:function(){window._prevAdTime=i.totalTime,r?null==e||e():o?n&&n(u.t("msgNoAdComplete")):n&&n(u.t("msgNoVideo")),d(),a("Video ad closed.")},onError:function(e){d(),a("error video",e)}}})},n.showFullScreen=function(e){var n,t,r=Math.floor((i.totalTime-(null!=(n=window._prevAdTime)?n:0))/1e3);a("full screen click",r),r<120||(window._prevAdTime=i.totalTime,null==(t=window.ysdk)||t.adv.showFullscreenAdv({callbacks:{onOpen:function(){window._prevAdTime=i.totalTime,i.pause(),a("ad open.")},onClose:function(e){i.isPaused()&&i.resume(),a("ad closed.")},onError:function(e){i.isPaused()&&i.resume(),a("Fullscreen error",e)},onOffline:function(){throw i.isPaused()&&i.resume(),new Error("Function not implemented.")}}}))},n.ready=function(){var e;this.isReady||(this.isReady=!0,window._prevAdTime=i.totalTime,null==(e=window.ysdk)||e.features.LoadingAPI.ready())},e}(),c=function(){function e(){}var o=e.prototype;return o.getData=function(){var e=t(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.player){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,this.player.getData(n);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),console.log("player:",e.t0),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(n){return e.apply(this,arguments)}}(),o.setData=function(){var e=t(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.player)||t.setData(n);case 1:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),n(e,[{key:"player",get:function(){return window.yPlayer}}]),e}();e("default",new function(){this.ad=void 0,this.data=void 0,this.ad=new d,this.data=new c});o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});